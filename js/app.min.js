!function(){window.Framework7=function(t){function a(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});d["onPage"+t]=function(t,a){return d.onPage(e,t,a)}}function n(e,t,a){t=u(t);var n=t.find(e);return n.length>1&&("string"==typeof a.selector&&(n=t.find(a.selector+" "+e)),n.length>1&&(n=t.find("."+d.params.viewMainClass+" "+e))),1===n.length?n:void 0}function i(e,t,a){"to-left"===a&&(e.removeClass("page-on-center").addClass("page-from-center-to-left"),t.addClass("page-from-right-to-center")),"to-right"===a&&(e.removeClass("page-on-left").addClass("page-from-left-to-center"),t.removeClass("page-on-center").addClass("page-from-center-to-right"))}function o(e,t,a){"to-left"===a&&(t.removeClass("navbar-on-right").addClass("navbar-from-right-to-center"),t.find(".sliding").each(function(){var e=u(this);e.transform("translate3d(0px,0,0)"),d.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass("navbar-on-center").addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e=u(this);d.params.animateNavBackIcon&&(e.hasClass("center")&&t.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=t.find(".sliding.left .back span")[0].offsetLeft),e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)")),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),"to-right"===a&&(e.removeClass("navbar-on-left").addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=u(this);e.transform("translate3d(0px,0,0)"),d.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass("navbar-on-center").addClass("navbar-from-center-to-right"),t.find(".sliding").each(function(){var e=u(this);d.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))}function s(e,t,a,s){function r(){e.allowPageChange=!0,l.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),c.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),g&&(m.removeClass("navbar-from-right-to-center navbar-on-right").addClass("navbar-on-center"),h.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),d.pageAnimCallbacks("after",e,{pageContainer:l[0],url:t,position:"right",oldPage:c,newPage:l}),d.params.pushState&&d.pushStateClearQueue()}var l,c,p,f,h,m,v,g,b=u(e.container),w=u(e.pagesContainer);if("undefined"==typeof s&&(s=e.params.animatePages),d.pluginHook("loadPage",e,t,a),d._tempDomElement.innerHTML="",t||"string"==typeof a)d._tempDomElement.innerHTML=a;else if("length"in a&&a.length>1)for(var C=0;C<a.length;C++)u(d._tempDomElement).append(a[C]);else u(d._tempDomElement).append(a);if(l=n(".page",d._tempDomElement,e),!l)return void(e.allowPageChange=!0);if(l.addClass("page-on-right"),p=w.children(".page:not(.cached)"),p.length>1){for(f=0;f<p.length-2;f++)e.params.domCache?u(p[f]).addClass("cached"):(d.pageRemoveCallback(e,p[f],"left"),u(p[f]).remove());e.params.domCache?u(p[f]).addClass("cached"):(d.pageRemoveCallback(e,p[f],"left"),u(p[f]).remove())}if(c=w.children(".page:not(.cached)"),e.params.dynamicNavbar&&(g=!0,m=n(".navbar-inner",d._tempDomElement,e),m||(g=!1),v=b.find(".navbar"),h=v.find(".navbar-inner:not(.cached)"),h.length>0)){for(f=0;f<h.length-1;f++)e.params.domCache?u(h[f]).addClass("cached"):u(h[f]).remove();m||1!==h.length||(e.params.domCache?u(h[0]).addClass("cached"):u(h[0]).remove()),h=v.find(".navbar-inner:not(.cached)")}g&&(m.addClass("navbar-on-right"),v.append(m[0])),t||(t="#content-"+e.history.length,e.params.domCache||(1===e.history.length&&(e.contentCache[e.history[0]]={nav:h,page:c}),e.contentCache[t]={nav:m,page:l})),e.url=t,e.history.push(t),w.append(l[0]),d.pageInitCallback(e,l[0],t,"right",g?m[0]:void 0),g&&d.navbarInitCallback(e,l[0],v[0],m[0],t,"right"),g&&s&&m.find(".sliding").each(function(){var e=u(this);e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)"),d.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)")});l[0].clientLeft;d.pageAnimCallbacks("before",e,{pageContainer:l[0],url:t,position:"right",oldPage:c,newPage:l}),s?(i(c,l,"to-left",e),g&&setTimeout(function(){o(h,m,"to-left",e)},0),l.animationEnd(function(){r()})):r()}function r(e,t,a){d.pluginHook("preprocess",e,t,a),e=d.pluginProcess("preprocess",e),d.params.preprocess?(e=d.params.preprocess(e,t,a),"undefined"!=typeof e&&a(e)):a(e)}function l(){var e=this,t=e.scrollTop,a=e.scrollHeight,n=e.offsetHeight,i=e.getAttribute("data-distance");i||(i=50),"string"==typeof i&&i.indexOf("%")>=0&&(i=parseInt(i,10)/100*n),i>n&&(i=n),t+n>=a-i&&u(e).trigger("infinite")}function c(){d.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var d=this;d.version="0.9.5",d.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,pushState:!1,pushStateRoot:void 0,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageBoxShadow:!0,ajaxLinks:void 0,externalLinks:["external"],sortable:!0,swipeout:!0,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalTemplate:'<div class="modal {{noButtons}}"><div class="modal-inner">{{if title}}<div class="modal-title">{{title}}</div>{{/if title}}<div class="modal-text">{{text}}</div>{{afterText}}</div><div class="modal-buttons">{{buttons}}</div></div>',modalActionsTemplate:'<div class="actions-modal">{{buttons}}</div>',modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",init:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0};for(var p in t)d.params[p]=t[p];var u=e;d.touchEvents={start:d.support.touch?"touchstart":"mousedown",move:d.support.touch?"touchmove":"mousemove",end:d.support.touch?"touchend":"mouseup"},d.ls=localStorage,d.rtl="rtl"===u("body").css("direction"),d.rtl&&u("html").attr("dir","rtl"),"undefined"!=typeof d.params.statusbarOverlay&&(d.params.statusbarOverlay?u("html").addClass("with-statusbar-overlay"):u("html").removeClass("with-statusbar-overlay")),d.views=[];var f=function(e,t){var a={dynamicNavbar:!1,domCache:!1,linksView:void 0,swipeBackPage:d.params.swipeBackPage,swipeBackPageBoxShadow:d.params.swipeBackPageBoxShadow,swipeBackPageActiveArea:d.params.swipeBackPageActiveArea,swipeBackPageThreshold:d.params.swipeBackPageThreshold,animatePages:d.params.animatePages};t=t||{};for(var n in a)"undefined"==typeof t[n]&&(t[n]=a[n]);var i=this;i.params=t,i.selector=e;var o=u(e);i.container=o[0];var s=document.location.href;i.history=[];var r=s,l=d.params.pushStateSeparator,c=d.params.pushStateRoot;if(d.params.pushState&&(c?r=c:r.indexOf(l)>=0&&r.indexOf(l+"#")<0&&(r=r.split(l)[0])),i.url=o.attr("data-url")||i.params.url||r,i.url&&i.history.push(i.url),i.contentCache={},o[0].f7View=i,i.pagesContainer=o.find(".pages")[0],i.allowPageChange=!0,!i.activePage){var p,f=u(i.pagesContainer).find(".page-on-center");0===f.length&&(f=u(i.pagesContainer).find(".page"),f=f.eq(f.length-1)),f.length>0&&(p=f[0].f7PageData),p&&(p.view=i,i.url&&(p.url=i.url),i.activePage=p,f[0].f7PageData=p)}i.main=o.hasClass(d.params.viewMainClass);var h,m,v,g,b,w,C,x,k,y,S,T,P,$,E=!1,O=!1,N={},A=!0;if(i.handleTouchStart=function(e){A&&i.params.swipeBackPage&&!E&&!d.swipeoutOpenedEl&&(O=!1,E=!0,h=void 0,N.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,N.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,w=(new Date).getTime(),P=i.params.dynamicNavbar&&o.find(".navbar-inner").length>1)},i.handleTouchMove=function(e){if(E){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof h&&(h=!!(h||Math.abs(a-N.y)>Math.abs(t-N.x))),h||e.f7PreventSwipeBack)return void(E=!1);if(e.f7PreventPanelSwipe=!0,!O){var n=!1;g=o.width();var s=u(e.target);m=s.is(".page")?s:s.parents(".page"),m.hasClass("no-swipeback")&&(n=!0),v=o.find(".page-on-left:not(.cached)");var r=N.x-o.offset().left>i.params.swipeBackPageActiveArea;if(r=d.rtl?N.x<o.offset().left-o[0].scrollLeft+g-i.params.swipeBackPageActiveArea:N.x-o.offset().left>i.params.swipeBackPageActiveArea,r&&(n=!0),(0===v.length||0===m.length)&&(n=!0),n)return void(E=!1);P&&(C=o.find(".navbar-on-center:not(.cached)"),x=o.find(".navbar-on-left:not(.cached)"),k=C.find(".left, .center, .right"),y=x.find(".left, .center, .right"),d.params.animateNavBackIcon&&(S=C.find(".left.sliding .back .icon"),T=x.find(".left.sliding .back .icon")))}O=!0,e.preventDefault();var l=d.rtl?-1:1;b=(t-N.x-i.params.swipeBackPageThreshold)*l,0>b&&(b=0);var c=b/g,p={percentage:c,activePage:m[0],previousPage:v[0],activeNavbar:C[0],previousNavbar:x[0]};i.params.onSwipeBackMove&&i.params.onSwipeBackMove(p),o.trigger("swipebackmove",p);var f=b*l,w=(b/5-g/5)*l;if(1===d.device.pixelRatio&&(f=Math.round(f),w=Math.round(w)),m.transform("translate3d("+f+"px,0,0)"),i.params.swipeBackPageBoxShadow&&"android"!==d.device.os&&(m[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*c)+")"),v.transform("translate3d("+w+"px,0,0)"),v[0].style.opacity=.9+.1*c,P){var A;for(A=0;A<k.length;A++)if($=u(k[A]),$[0].style.opacity=1-1.3*c,$[0].className.indexOf("sliding")>=0){var B=c*$[0].f7NavbarRightOffset;1===d.device.pixelRatio&&(B=Math.round(B)),$.transform("translate3d("+B+"px,0,0)"),d.params.animateNavBackIcon&&$[0].className.indexOf("left")>=0&&S.length>0&&S.transform("translate3d("+-B+"px,0,0)")}for(A=0;A<y.length;A++)if($=u(y[A]),$[0].style.opacity=1.3*c-.3,$[0].className.indexOf("sliding")>=0){var I=$[0].f7NavbarLeftOffset*(1-c);1===d.device.pixelRatio&&(I=Math.round(I)),$.transform("translate3d("+I+"px,0,0)"),d.params.animateNavBackIcon&&$[0].className.indexOf("left")>=0&&T.length>0&&T.transform("translate3d("+-I+"px,0,0)")}}}},i.handleTouchEnd=function(){if(!E||!O)return E=!1,void(O=!1);if(E=!1,O=!1,0===b)return u([m[0],v[0]]).transform("").css({opacity:"",boxShadow:""}),void(P&&(k.transform("").css({opacity:""}),y.transform("").css({opacity:""}),S&&S.length>0&&S.transform(""),T&&S.length>0&&T.transform("")));var e=(new Date).getTime()-w,t=!1;if((300>e&&b>10||e>=300&&b>g/2)&&(m.removeClass("page-on-center").addClass("page-on-right"),v.removeClass("page-on-left").addClass("page-on-center"),P&&(C.removeClass("navbar-on-center").addClass("navbar-on-right"),x.removeClass("navbar-on-left").addClass("navbar-on-center")),t=!0),u([m[0],v[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),P&&(k.css({opacity:""}).each(function(){var e=t?this.f7NavbarRightOffset:0,a=u(this);a.transform("translate3d("+e+"px,0,0)"),d.params.animateNavBackIcon&&a.hasClass("left")&&S.length>0&&S.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning"),y.transform("").css({opacity:""}).each(function(){var e=t?0:this.f7NavbarLeftOffset,a=u(this);a.transform("translate3d("+e+"px,0,0)"),d.params.animateNavBackIcon&&a.hasClass("left")&&T.length>0&&T.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning")),A=!1,i.allowPageChange=!1,t){var a=i.history[i.history.length-2];i.url=a,d.pageAnimCallbacks("before",i,{pageContainer:v[0],url:a,position:"left",newPage:v,oldPage:m,swipeBack:!0})}m.transitionEnd(function(){u([m[0],v[0]]).removeClass("page-transitioning"),P&&(k.removeClass("page-transitioning").css({opacity:""}),y.removeClass("page-transitioning").css({opacity:""}),S&&S.length>0&&S.removeClass("page-transitioning"),T&&T.length>0&&T.removeClass("page-transitioning")),A=!0,i.allowPageChange=!0,t&&(d.params.pushState&&history.back(),d.pageAnimCallbacks("after",i,{pageContainer:v[0],url:a,position:"left",newPage:v,oldPage:m,swipeBack:!0}),d.afterGoBack(i,m,v))})},i.attachEvents=function(e){var t=e?"off":"on";o[t](d.touchEvents.start,i.handleTouchStart),o[t](d.touchEvents.move,i.handleTouchMove),o[t](d.touchEvents.end,i.handleTouchEnd)},i.detachEvents=function(){i.attachEvents(!0)},i.params.swipeBackPage&&i.attachEvents(),d.views.push(i),i.main&&(d.mainView=i),i.loadPage=function(e,t){return d.loadPage(i,e,t)},i.loadContent=function(e,t){return d.loadContent(i,e,t)},i.goBack=function(e,t){return d.goBack(i,e,t)},i.hideNavbar=function(){return d.hideNavbar(o)},i.showNavbar=function(){return d.showNavbar(o)},i.hideToolbar=function(){return d.hideToolbar(o)},i.showToolbar=function(){return d.showToolbar(o)},d.params.pushState&&i.main){var B;c?B=s.split(d.params.pushStateRoot+l)[1]:s.indexOf(l)>=0&&s.indexOf(l+"#")<0&&(B=s.split(l)[1]);var I;d.params.pushStateNoAnimation===!0&&(I=!1),B&&d.loadPage(i,B,I,!1)}return i.destroy=function(){i.detachEvents(),i=void 0},d.pluginHook("addView",i),i};d.addView=function(e,t){return new f(e,t)},d.navbarInitCallback=function(e,t,a,n,i,o){var s={container:a,innerContainer:n},r={url:i,query:u.parseUrlQuery(i||""),container:t,name:u(t).attr("data-page"),view:e,from:o},l={navbar:s,page:r};d.pluginHook("navbarInit",s,r),u(n).trigger("navbarInit",l)},d.sizeNavbars=function(e){var t=e?u(e).find(".navbar .navbar-inner:not(.cached)"):u(".navbar .navbar-inner:not(.cached)");t.each(function(){var e,t,a=u(this),n=a.find(d.rtl?".right":".left"),i=a.find(d.rtl?".left":".right"),o=a.find(".center"),s=0===n.length,r=0===i.length,l=s?0:n.outerWidth(!0),c=r?0:i.outerWidth(!0),p=o.outerWidth(!0),f=a.width(),h=a.hasClass("navbar-on-left");r&&(e=f-p),s&&(e=0),s||r||(e=(f-c-p+l)/2);var m=(f-p)/2;f-l-c>p?(l>m&&(m=l),m+p>f-c&&(m=f-c-p),t=m-e):t=0;var v=d.rtl?-1:1,g=t;d.rtl&&s&&r&&o.length>0&&(g=-g),o.css({left:g+"px"}),o.hasClass("sliding")&&(o[0].f7NavbarLeftOffset=-(e+t)*v,o[0].f7NavbarRightOffset=(f-e-t-p)*v,h&&o.transform("translate3d("+o[0].f7NavbarLeftOffset+"px, 0, 0)")),!s&&n.hasClass("sliding")&&(d.rtl?(n[0].f7NavbarLeftOffset=-(f-n.outerWidth())/2*v,n[0].f7NavbarRightOffset=l*v):(n[0].f7NavbarLeftOffset=-l,n[0].f7NavbarRightOffset=(f-n.outerWidth())/2),h&&n.transform("translate3d("+n[0].f7NavbarLeftOffset+"px, 0, 0)")),!r&&i.hasClass("sliding")&&(d.rtl?(i[0].f7NavbarLeftOffset=-c*v,i[0].f7NavbarRightOffset=(f-i.outerWidth())/2*v):(i[0].f7NavbarLeftOffset=-(f-i.outerWidth())/2,i[0].f7NavbarRightOffset=c),h&&i.transform("translate3d("+i[0].f7NavbarLeftOffset+"px, 0, 0)"))})},d.hideNavbar=function(e){return u(e).addClass("hidden-navbar"),!0},d.showNavbar=function(e){var t=u(e);return t.addClass("hiding-navbar").removeClass("hidden-navbar").find(".navbar").transitionEnd(function(){t.removeClass("hiding-navbar")}),!0},d.hideToolbar=function(e){return u(e).addClass("hidden-toolbar"),!0},d.showToolbar=function(e){var t=u(e);t.addClass("hiding-toolbar").removeClass("hidden-toolbar").find(".toolbar").transitionEnd(function(){t.removeClass("hiding-toolbar")})},d.initSearchbar=function(e){function t(){h.val("").trigger("change"),p.removeClass("searchbar-active searchbar-not-empty"),v.length>0&&v.css(k,-x+"px"),g&&f.removeClass("searchbar-overlay-active"),d.device.ios?setTimeout(function(){h.blur()},400):h.blur()}function a(){d.device.ios?setTimeout(function(){g&&!p.hasClass("searchbar-active")&&f.addClass("searchbar-overlay-active"),p.addClass("searchbar-active"),v.length>0&&v.css(k,"0px"),g.trigger("enableSearch")},400):(g&&!p.hasClass("searchbar-active")&&f.addClass("searchbar-overlay-active"),p.addClass("searchbar-active"),v.length>0&&v.css(k,"0px"),g.trigger("disableSearch"))}function n(){h.val("").trigger("change"),g.trigger("clearSearch")}function i(){setTimeout(function(){var e=h.val().trim();0===e.length?(p.removeClass("searchbar-not-empty"),g&&p.hasClass("searchbar-active")&&f.addClass("searchbar-overlay-active")):(p.addClass("searchbar-not-empty"),g&&p.hasClass("searchbar-active")&&f.removeClass("searchbar-overlay-active")),g.length>0&&b&&l(e)},0)}function o(e){e.preventDefault()}function s(e){var s=e?"off":"on";p[s]("submit",o),v[s]("click",t),f[s]("click",t),h[s]("focus",a),h[s]("change keydown keypress keyup",i),m[s]("click",n)}function r(){s(!0)}function l(e){var t=e.trim().toLowerCase().split(" ");g.find("li").removeClass("hidden-by-searchbar");var a=[];g.find("li").each(function(e,n){n=u(n);var i=n.find(b);if(0!==i.length){var o;o=i.text().trim().toLowerCase();for(var s=0,r=0;r<t.length;r++)o.indexOf(t[r])>=0&&s++;s!==t.length?n.addClass("hidden-by-searchbar"):a.push(n[0])}}),d.params.searchbarHideDividers&&g.find(".item-divider, .list-group-title").each(function(){for(var e=u(this),t=e.nextAll("li"),a=!0,n=0;n<t.length;n++){var i=u(t[n]);if(i.hasClass("list-group-title")||i.hasClass("item-divider"))break;i.hasClass("hidden-by-searchbar")||(a=!1)}a?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),d.params.searchbarHideGroups&&g.find(".list-group").each(function(){var e=u(this),t=e.find("li:not(.hidden-by-searchbar)");0===t.length?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),g.trigger("search",{query:e,foundItems:a}),0===a.length?(C.show(),w.hide()):(C.hide(),w.show())}function c(){r(),e.off("pageBeforeRemove",c)}e=u(e);var p=e.hasClass("searchbar")?e:e.find(".searchbar");if(0!==p.length){e.hasClass("page")||(e=p.parents(".page").eq(0));var f=e.hasClass("page")?e.find(".searchbar-overlay"):u(".searchbar-overlay"),h=p.find('input[type="search"]'),m=p.find(".searchbar-clear"),v=p.find(".searchbar-cancel"),g=u(p.attr("data-search-list")),b=p.attr("data-search-in"),w=(p.attr("data-search-by"),p.attr("data-searchbar-found"));w?w=u(w):(w=e.find(".searchbar-found"),0===w.length&&(w=u(".searchbar-found")));var C=p.attr("data-searchbar-not-found");C?C=u(C):(C=e.find(".searchbar-not-found"),0===C.length&&(C=u(".searchbar-not-found")));var x,k=d.rtl?"margin-left":"margin-right";v.length>0&&(x=v.width(),v.css(k,-x+"px")),p[0].f7DestroySearchbar=r,s(),e.hasClass("page")&&e.on("pageBeforeRemove",c)}},d.destroySearchbar=function(e){e=u(e);var t=e.hasClass("searchbar")?e:e.find(".searchbar");0!==t.length&&t[0].f7DestroySearchbar&&t[0].f7DestroySearchbar()},d.initMessagebar=function(e){function t(e){e.preventDefault()}function a(){c.css({height:""});var e=c[0].offsetHeight,t=e-c[0].clientHeight,a=c[0].scrollHeight;if(a+t>e){var n=a+t,i=p+(n-f),o=r.attr("data-max-height")||r.parents(".view")[0].offsetHeight-88;i>o&&(i=o,n=i-p+f),c.css("height",n+"px"),r.css("height",i+"px"),d.length>0&&(d.css("padding-bottom",i+"px"),d.scrollTop(d[0].scrollHeight-d[0].offsetHeight))}else d.length>0&&(r.css({height:""}),d.css({"padding-bottom":""}))}function n(){clearTimeout(l),l=setTimeout(function(){a()},0)}function i(e){var a=e?"off":"on";r[a]("submit",t),c[a]("change keydown keypress keyup paste cut",n)}function o(){i(!0)}function s(){o(),e.off("pageBeforeRemove",s)}e=u(e);var r=e.hasClass("messagebar")?e:e.find(".messagebar");if(0!==r.length){var l,c=r.find("textarea"),d=r.parents(".page").find(".page-content"),p=r[0].offsetHeight,f=c[0].offsetHeight;r[0].f7DestroyMessagebar=o,i(),e.hasClass("page")&&e.on("pageBeforeRemove",s)}},d.destroyMessagebar=function(e){e=u(e);var t=e.hasClass("messagebar")?e:e.find(".messagebar");0!==t.length&&t[0].f7DestroyMessagebar&&t[0].f7DestroyMessagebar()},d.cache=[],d.removeFromCache=function(e){for(var t=!1,a=0;a<d.cache.length;a++)d.cache[a].url===e&&(t=a);t!==!1&&d.cache.splice(t,1)},d.xhr=!1,d.get=function(e,t,a){var n=e;if(d.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(n=e.split("?")[0]),d.params.cache&&e.indexOf("nocache")<0&&d.params.cacheIgnore.indexOf(n)<0)for(var i=0;i<d.cache.length;i++)if(d.cache[i].url===n&&(new Date).getTime()-d.cache[i].time<d.params.cacheDuration)return a(d.cache[i].data),!1;return d.xhr=u.ajax({url:e,method:"GET",start:d.params.onAjaxStart,complete:function(e){200===e.status||0===e.status?(a(e.responseText,!1),d.params.cache&&(d.removeFromCache(n),d.cache.push({url:n,time:(new Date).getTime(),data:e.responseText}))):a(e.responseText,!0),d.params.onAjaxComplete&&d.params.onAjaxComplete(e)},error:function(e){a(e.responseText,!0),d.params.onAjaxError&&d.params.onAjaxonAjaxError(e)}}),t&&(t.xhr=d.xhr),d.xhr},d.pageCallbacks={},d.onPage=function(e,t,a){if(t&&t.split(" ").length>1){for(var n=t.split(" "),i=[],o=0;o<n.length;o++)i.push(d.onPage(e,n[o],a));return i.remove=function(){for(var e=0;e<i.length;e++)i[e].remove()},i.trigger=function(){for(var e=0;e<i.length;e++)i[e].trigger()},i}var s=d.pageCallbacks[e][t];return s||(s=d.pageCallbacks[e][t]=[]),d.pageCallbacks[e][t].push(a),{remove:function(){for(var e,t=0;t<s.length;t++)s[t].toString()===a.toString()&&(e=t);"undefined"!=typeof e&&s.splice(e,1)},trigger:a}};for(var h="beforeInit init beforeAnimation afterAnimation beforeRemove".split(" "),m=0;m<h.length;m++)d.pageCallbacks[h[m]]={},a(h[m]);d.triggerPageCallbacks=function(e,t,a){var n=d.pageCallbacks[e]["*"];if(n)for(var i=0;i<n.length;i++)n[i](a);var o=d.pageCallbacks[e][t];if(o&&0!==o.length)for(var s=0;s<o.length;s++)o[s](a)},d.pageInitCallback=function(e,t,a,n,i){if(!t.f7PageInitialized){t.f7PageInitialized=!0;var o={container:t,url:a,query:u.parseUrlQuery(a||""),name:u(t).attr("data-page"),view:e,from:n,navbarInnerContainer:i};t.f7PageData=o,e&&(e.activePage=o),d.pluginHook("pageBeforeInit",o),d.params.onPageBeforeInit&&d.params.onPageBeforeInit(d,o),d.triggerPageCallbacks("beforeInit",o.name,o),u(o.container).trigger("pageBeforeInit",{page:o}),d.initPage(t),d.pluginHook("pageInit",o),d.params.onPageInit&&d.params.onPageInit(d,o),d.triggerPageCallbacks("init",o.name,o),u(o.container).trigger("pageInit",{page:o})}},d.pageRemoveCallback=function(e,t,a){var n={container:t,name:u(t).attr("data-page"),view:e,from:a};d.pluginHook("pageBeforeRemove",n),d.params.onPageBeforeRemove&&d.params.onPageBeforeRemove(d,n),d.triggerPageCallbacks("beforeRemove",n.name,n),u(n.container).trigger("pageBeforeRemove",{page:n})},d.pageAnimCallbacks=function(e,t,a){var n={container:a.pageContainer,url:a.url,query:u.parseUrlQuery(a.url||""),name:u(a.pageContainer).attr("data-page"),view:t,from:a.position,swipeBack:a.swipeBack},i=a.oldPage,o=a.newPage;a.pageContainer.f7PageData=n,"after"===e&&(d.pluginHook("pageAfterAnimation",n),d.params.onPageAfterAnimation&&d.params.onPageAfterAnimation(d,n),d.triggerPageCallbacks("afterAnimation",n.name,n),u(n.container).trigger("pageAfterAnimation",{page:n})),"before"===e&&(u(t.container).attr("data-page",n.name),t&&(t.activePage=n),o.hasClass("no-navbar")&&!i.hasClass("no-navbar")&&t.hideNavbar(),!o.hasClass("no-navbar")&&i.hasClass("no-navbar")&&t.showNavbar(),o.hasClass("no-toolbar")&&!i.hasClass("no-toolbar")&&t.hideToolbar(),!o.hasClass("no-toolbar")&&i.hasClass("no-toolbar")&&t.showToolbar(),d.pluginHook("pageBeforeAnimation",n),d.params.onPageBeforeAnimation&&d.params.onPageBeforeAnimation(d,n),d.triggerPageCallbacks("beforeAnimation",n.name,n),u(n.container).trigger("pageBeforeAnimation",{page:n}))},d.initPage=function(e){d.sizeNavbars&&d.sizeNavbars(u(e).parents("."+d.params.viewClass)[0]),d.initMessages&&d.initMessages(e),d.initFormsStorage&&d.initFormsStorage(e),d.initSmartSelects&&d.initSmartSelects(e),d.initSlider&&d.initSlider(e),d.initPullToRefresh&&d.initPullToRefresh(e),d.initInfiniteScroll&&d.initInfiniteScroll(e),d.initSearchbar&&d.initSearchbar(e),d.initMessagebar&&d.initMessagebar(e)},d.allowPageChange=!0,d._tempDomElement=document.createElement("div"),d.loadContent=function(e,t,a,n){if(!e.allowPageChange)return!1;if(e.allowPageChange=!1,d.xhr&&e.xhr&&e.xhr===d.xhr&&(d.xhr.abort(),d.xhr=!1),d.params.pushState){"undefined"==typeof n&&(n=!0);var i=d.params.pushStateRoot||"";n&&history.pushState({content:t,url:"#content-"+e.history.length},"",i+d.params.pushStateSeparator+"#content-"+e.history.length)}r(t,null,function(t){s(e,null,t,a)})},d.loadPage=function(e,t,a,n){return e.allowPageChange?e.url===t?!1:(e.allowPageChange=!1,d.xhr&&e.xhr&&e.xhr===d.xhr&&(d.xhr.abort(),d.xhr=!1),void d.get(t,e,function(i,o){if(o)return void(e.allowPageChange=!0);if(d.params.pushState){"undefined"==typeof n&&(n=!0);var l=d.params.pushStateRoot||"";n&&history.pushState({url:t},"",l+d.params.pushStateSeparator+t)}r(i,t,function(n){s(e,t,n,a)})})):!1},d.goBack=function(e,t,a,s,l){function c(){function n(){d.afterGoBack(e,f[0],h[0]),d.pageAnimCallbacks("after",e,{pageContainer:h[0],url:t,position:"left",oldPage:f,newPage:h})}d.pageAnimCallbacks("before",e,{pageContainer:h[0],url:t,position:"left",oldPage:f,newPage:h}),a?(i(h,f,"to-right",e),b&&setTimeout(function(){o(v,m,"to-right",e)},0),h.animationEnd(function(){n()})):(v.find(".sliding, .sliding .back .icon").transform(""),n())}function p(){if(h=n(".page",d._tempDomElement,e),!h)return void(e.allowPageChange=!0);if(h.addClass("page-on-left"),f=u(x[0]),e.params.dynamicNavbar&&(b=!0,v=n(".navbar-inner",d._tempDomElement,e),v||(b=!1)),b&&(g=w.find(".navbar"),m=g.find(".navbar-inner"),v.addClass(m.length>0?"navbar-on-left":"navbar-on-center"),m.length>1&&(u(m[0]).remove(),m=g.find(".navbar-inner")),g.prepend(v[0])),C.prepend(h[0]),d.pageInitCallback(e,h[0],t,"left",b?v[0]:void 0),b&&d.navbarInitCallback(e,h[0],g[0],v[0],t,"right"),b&&v.hasClass("navbar-on-left")&&a&&v.find(".sliding").each(function(){var e=u(this);d.params.animateNavBackIcon&&(e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)"),e.hasClass("center")&&m.find(".left .back .icon ~ span").length>0&&(this.f7NavbarLeftOffset+=m.find(".left .back span")[0].offsetLeft)),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")}),s)return h.addClass("page-on-left"),void(e.allowPageChange=!0);e.url=t;h[0].clientLeft;c()}if(!e.allowPageChange)return!1;e.allowPageChange=!1,d.xhr&&e.xhr&&e.xhr===d.xhr&&(d.xhr.abort(),d.xhr=!1),d.pluginHook("goBack",e,t,s),d.params.pushState&&("undefined"==typeof l&&(l=!0),!s&&history.state&&l&&history.back());var f,h,m,v,g,b,w=u(e.container),C=u(e.pagesContainer),x=C.children(".page");if("undefined"==typeof a&&(a=e.params.animatePages),x.length>1){if(s)return void(e.allowPageChange=!0);if(e.url=e.history[e.history.length-2],h=u(x[x.length-2]),f=u(x[x.length-1]),e.params.dynamicNavbar){b=!0;var k=w.find(".navbar-inner:not(.cached)");v=u(k[0]),m=u(k[1])}c()}else{if(t&&0===t.indexOf("#")&&(t=void 0),e.history.length>1&&(t=e.history[e.history.length-2]),!t)return void(e.allowPageChange=!0);if(!e.params.domCache&&t in e.contentCache){var y=e.contentCache[t];return d._tempDomElement.innerHTML="",u(d._tempDomElement).append(y.nav[0]).append(y.page[0]),void p()}d.get(t,e,function(t,a){return a?void(e.allowPageChange=!0):void r(t,null,function(e){d._tempDomElement.innerHTML=e,p()})})}},d.afterGoBack=function(e,t,a){if(t=u(t),a=u(a),d.pageRemoveCallback(e,t[0],"right"),t.remove(),a.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),e.allowPageChange=!0,e.params.dynamicNavbar){{var n=u(e.container).find(".navbar-inner:not(.cached)");u(n[1]).remove(),u(n[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center")}if(d.params.preloadPreviousPage&&e.params.domCache){var i=u(e.container).find(".navbar-inner.cached");u(i[i.length-1]).removeClass("cached")}}var o=e.history.pop();if(!e.params.domCache&&o&&o.indexOf("#content-")>-1&&o in e.contentCache&&(e.contentCache[o]=null,delete e.contentCache[o]),d.params.pushState&&d.pushStateClearQueue(),d.params.preloadPreviousPage){if(e.params.domCache){var s=u(e.container).find(".page.cached");u(s[s.length-1]).removeClass("cached")}d.goBack(e,!1,void 0,!0)}};var v=document.createElement("div");d.modal=function(e){e=e||{};var t="";if(e.buttons&&e.buttons.length>0)for(var a=0;a<e.buttons.length;a++)t+='<span class="modal-button'+(e.buttons[a].bold?" modal-button-bold":"")+'">'+e.buttons[a].text+"</span>";var n=d.params.modalTemplate;n=e.title?n.replace(/{{if\ title}}/g,"").replace(/{{\/if\ title}}/g,""):n.split("{{if title}}")[0]+n.split("{{/if title}}")[1];var i=n.replace(/{{title}}/g,e.title||"").replace(/{{text}}/g,e.text||"").replace(/{{afterText}}/g,e.afterText||"").replace(/{{buttons}}/g,t).replace(/{{noButtons}}/g,e.buttons&&0!==e.buttons.length?"":"modal-no-buttons");v.innerHTML=i;var o=u(v).children();return u("body").append(o[0]),o.find(".modal-button").each(function(t,a){u(a).on("click",function(a){e.buttons[t].close!==!1&&d.closeModal(o),e.buttons[t].onClick&&e.buttons[t].onClick(o,a),e.onClick&&e.onClick(o,t)})}),d.openModal(o),o[0]},d.alert=function(e,t,a){return"function"==typeof t&&(a=arguments[1],t=void 0),d.modal({text:e||"",title:"undefined"==typeof t?d.params.modalTitle:t,buttons:[{text:d.params.modalButtonOk,bold:!0,onClick:a}]})},d.confirm=function(e,t,a,n){return"function"==typeof t&&(n=arguments[2],a=arguments[1],t=void 0),d.modal({text:e||"",title:"undefined"==typeof t?d.params.modalTitle:t,buttons:[{text:d.params.modalButtonCancel,onClick:n},{text:d.params.modalButtonOk,bold:!0,onClick:a}]})},d.prompt=function(e,t,a,n){return"function"==typeof t&&(n=arguments[2],a=arguments[1],t=void 0),d.modal({text:e||"",title:"undefined"==typeof t?d.params.modalTitle:t,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:d.params.modalButtonCancel},{text:d.params.modalButtonOk,bold:!0}],onClick:function(e,t){0===t&&n&&n(u(e).find(".modal-text-input").val()),1===t&&a&&a(u(e).find(".modal-text-input").val())}})},d.modalLogin=function(e,t,a,n){return"function"==typeof t&&(n=arguments[2],a=arguments[1],t=void 0),d.modal({text:e||"",title:"undefined"==typeof t?d.params.modalTitle:t,afterText:'<input type="text" name="modal-username" placeholder="'+d.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+d.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:d.params.modalButtonCancel},{text:d.params.modalButtonOk,bold:!0}],onClick:function(e,t){var i=u(e).find('.modal-text-input[name="modal-username"]').val(),o=u(e).find('.modal-text-input[name="modal-password"]').val();0===t&&n&&n(i,o),1===t&&a&&a(i,o)}})},d.modalPassword=function(e,t,a,n){return"function"==typeof t&&(n=arguments[2],a=arguments[1],t=void 0),d.modal({text:e||"",title:"undefined"==typeof t?d.params.modalTitle:t,afterText:'<input type="password" name="modal-password" placeholder="'+d.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:d.params.modalButtonCancel},{text:d.params.modalButtonOk,bold:!0}],onClick:function(e,t){var i=u(e).find('.modal-text-input[name="modal-password"]').val();0===t&&n&&n(i),1===t&&a&&a(i)}})},d.showPreloader=function(e){return d.modal({title:e||d.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},d.hidePreloader=function(){d.closeModal(".modal.modal-in")},d.showIndicator=function(){u("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},d.hideIndicator=function(){u(".preloader-indicator-overlay, .preloader-indicator-modal").remove()
},d.actions=function(e){e=e||[],e.length>0&&!u.isArray(e[0])&&(e=[e]);for(var t=d.params.modalActionsTemplate,a="",n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){0===i&&(a+='<div class="actions-modal-group">');var o=e[n][i],s=o.label?"actions-modal-label":"actions-modal-button";o.bold&&(s+=" actions-modal-button-bold"),o.color&&(s+=" color-"+o.color),a+='<span class="'+s+'">'+o.text+"</span>",i===e[n].length-1&&(a+="</div>")}var r=t.replace(/{{buttons}}/g,a);v.innerHTML=r;var l=u(v).children();u("body").append(l[0]);var c=l.find(".actions-modal-group");return c.each(function(t,a){var n=t;u(a).children().each(function(t,a){var i=t,o=e[n][i];u(a).hasClass("actions-modal-button")&&u(a).on("click",function(e){o.close!==!1&&d.closeModal(l),o.onClick&&o.onClick(l,e)})})}),d.openModal(l),l[0]},d.popover=function(e,t,a){function n(){e.css({left:"",top:""});var a=e.width(),n=e.height(),i=e.find(".popover-angle"),o=i.width()/2;i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var s=t.outerWidth(),r=t.outerHeight(),l=t.offset(),c=t.parents(".page");c.length>0&&(l.top=l.top-c[0].scrollTop);var d=u(window).height(),p=u(window).width(),f=0,h=0,m=0,v="top";n+o<l.top?f=l.top-n-o:n+o<d-l.top-r?(v="bottom",f=l.top+r+o):(v="middle",f=r/2+l.top-n/2,m=f,0>f?f=5:f+n>d&&(f=d-n-5),m-=f),"top"===v||"bottom"===v?(h=s/2+l.left-a/2,m=h,5>h&&(h=5),h+a>p&&(h=p-a-5),"top"===v&&i.addClass("on-bottom"),"bottom"===v&&i.addClass("on-top"),m-=h,i.css({left:a/2-o+m+"px"})):"middle"===v&&(h=l.left-a-o,i.addClass("on-right"),5>h&&(h=l.left+s+o,i.removeClass("on-right").addClass("on-left")),h+a>p&&(h=p-a-5,i.removeClass("on-right").addClass("on-left")),i.css({top:n/2-o+m+"px"})),e.css({top:f+"px",left:h+"px"})}if("undefined"==typeof a&&(a=!0),"string"==typeof e&&e.indexOf("<")>=0){var i=document.createElement("div");if(i.innerHTML=u.trim(e),!(i.childNodes.length>0))return!1;e=i.childNodes[0],a&&e.classList.add("remove-on-close"),u("body").append(e)}return e=u(e),t=u(t),0===e.length||0===t.length?!1:(0===e.find(".popover-angle").length&&e.append('<div class="popover-angle"></div>'),e.show(),n(),u(window).on("resize",n),e.on("close",function(){u(window).off("resize",n)}),e.find("."+d.params.viewClass).length>0&&d.sizeNavbars(e.find("."+d.params.viewClass)[0]),d.openModal(e),e[0])},d.popup=function(e,t){if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){var a=document.createElement("div");if(a.innerHTML=u.trim(e),!(a.childNodes.length>0))return!1;e=a.childNodes[0],t&&e.classList.add("remove-on-close"),u("body").append(e)}return e=u(e),0===e.length?!1:(e.show(),e.find("."+d.params.viewClass).length>0&&d.sizeNavbars(e.find("."+d.params.viewClass)[0]),d.openModal(e),e[0])},d.loginScreen=function(e){return e||(e=".login-screen"),e=u(e),0===e.length?!1:(e.show(),e.find("."+d.params.viewClass).length>0&&d.sizeNavbars(e.find("."+d.params.viewClass)[0]),d.openModal(e),e[0])},d.openModal=function(e){e=u(e);var t=e.hasClass("popover"),a=e.hasClass("popup"),n=e.hasClass("login-screen");t||a||n||e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"});var i;n||(0!==u(".modal-overlay").length||a||u("body").append('<div class="modal-overlay"></div>'),0===u(".popup-overlay").length&&a&&u("body").append('<div class="popup-overlay"></div>'),i=u(a?".popup-overlay":".modal-overlay"));e[0].clientLeft;return e.trigger("open"),n||i.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened")}),!0},d.closeModal=function(e){if(e=u(e||".modal-in"),"undefined"==typeof e||0!==e.length){var t=e.hasClass("popover"),a=e.hasClass("popup"),n=e.hasClass("login-screen"),i=e.hasClass("remove-on-close"),o=u(a?".popup-overlay":".modal-overlay");return o.removeClass("modal-overlay-visible"),e.trigger("close"),t?(e.removeClass("modal-in modal-out").trigger("closed").hide(),i&&e.remove()):e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened"),a||n?(e.removeClass("modal-out").hide(),i&&e.length>0&&e.remove()):e.remove()}),!0}},d.allowPanelOpen=!0,d.openPanel=function(e){function t(){i.transitionEnd(function(e){u(e.target).is(i)?(a.trigger(a.hasClass("active")?"opened":"closed"),d.allowPanelOpen=!0):t()})}if(!d.allowPanelOpen)return!1;var a=u(".panel-"+e);if(0===a.length||a.hasClass("active"))return!1;d.closePanel(),d.allowPanelOpen=!1;var n=a.hasClass("panel-reveal")?"reveal":"cover";a.css({display:"block"}).addClass("active"),a.trigger("open"),a.find("."+d.params.viewClass).length>0&&d.sizeNavbars&&d.sizeNavbars(a.find("."+d.params.viewClass)[0]);var i=(a[0].clientLeft,"reveal"===n?u("."+d.params.viewsClass):a);return t(),u("body").addClass("with-panel-"+e+"-"+n),!0},d.closePanel=function(){var e=u(".panel.active");if(0===e.length)return!1;var t=e.hasClass("panel-reveal")?"reveal":"cover",a=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var n="reveal"===t?u("."+d.params.viewsClass):e;e.trigger("close"),d.allowPanelOpen=!1,n.transitionEnd(function(){e.hasClass("active")||(e.css({display:""}),e.trigger("closed"),u("body").removeClass("panel-closing"),d.allowPanelOpen=!0)}),u("body").addClass("panel-closing").removeClass("with-panel-"+a+"-"+t)},d.initSwipePanels=function(){function e(e){if(d.allowPanelOpen&&d.params.swipePanel&&!i&&!(u(".modal-in, .photo-browser-in").length>0||!d.params.swipePanelCloseOpposite&&u(".panel.active").length>0&&!n.hasClass("active"))){if(b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d.params.swipePanelCloseOpposite&&(v=u(".panel.active").length>0?u(".panel.active").hasClass("panel-left")?"left":"right":d.params.swipePanel),n=u(".panel.panel-"+v),d.params.swipePanelActiveArea){if("left"===v&&b.x>d.params.swipePanelActiveArea)return;if("right"===v&&b.x<window.innerWidth-d.params.swipePanelActiveArea)return}o=!1,i=!0,s=void 0,r=(new Date).getTime(),m=void 0}}function t(e){if(i&&!e.f7PreventPanelSwipe){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof s&&(s=!!(s||Math.abs(a-b.y)>Math.abs(t-b.x))),s)return void(i=!1);if(!m&&(m=t>b.x?"to-right":"to-left","left"===v&&"to-left"===m&&!n.hasClass("active")||"right"===v&&"to-right"===m&&!n.hasClass("active")))return void(i=!1);if(d.params.swipePanelNoFollow){var u=(new Date).getTime()-r;return 300>u&&("to-left"===m&&("right"===v&&d.openPanel(v),"left"===v&&n.hasClass("active")&&d.closePanel()),"to-right"===m&&("left"===v&&d.openPanel(v),"right"===v&&n.hasClass("active")&&d.closePanel())),i=!1,void(o=!1)}o||(h=n.hasClass("panel-cover")?"cover":"reveal",n.show(),g.show(),p=n.hasClass("active"),f=n.width(),n.transition(0),n.find("."+d.params.viewClass).length>0&&d.sizeNavbars&&d.sizeNavbars(n.find("."+d.params.viewClass)[0])),o=!0,e.preventDefault();var C=p?0:-d.params.swipePanelThreshold;"right"===v&&(C=-C),l=t-b.x+C,"right"===v?(c=l-(p?f:0),c>0&&(c=0),-f>c&&(c=-f)):(c=l+(p?f:0),0>c&&(c=0),c>f&&(c=f)),"reveal"===h?(w.transform("translate3d("+c+"px,0,0)").transition(0),g.transform("translate3d("+c+"px,0,0)"),d.pluginHook("swipePanelSetTransform",w[0],n[0],Math.abs(c/f))):(n.transform("translate3d("+c+"px,0,0)").transition(0),d.pluginHook("swipePanelSetTransform",w[0],n[0],Math.abs(c/f)))}}function a(){if(!i||!o)return i=!1,void(o=!1);i=!1,o=!1;var e,t=(new Date).getTime()-r,a=0===c||Math.abs(c)===f;if(e=p?c===-f?"reset":300>t&&Math.abs(c)>=0||t>=300&&Math.abs(c)<=f/2?"left"===v&&c===f?"reset":"swap":"reset":0===c?"reset":300>t&&Math.abs(c)>0||t>=300&&Math.abs(c)>=f/2?"swap":"reset","swap"===e&&(d.allowPanelOpen=!0,p?(d.closePanel(),a&&(n.css({display:""}),u("body").removeClass("panel-closing"))):d.openPanel(v),a&&(d.allowPanelOpen=!0)),"reset"===e)if(p)d.allowPanelOpen=!0,d.openPanel(v);else if(d.closePanel(),a)d.allowPanelOpen=!0,n.css({display:""});else{var s="reveal"===h?w:n;u("body").addClass("panel-closing"),s.transitionEnd(function(){d.allowPanelOpen=!0,n.css({display:""}),u("body").removeClass("panel-closing")})}"reveal"===h&&(w.transition(""),w.transform("")),n.transition("").transform(""),g.css({display:""}).transform("")}var n=u(".panel.panel-"+d.params.swipePanel);if(0!==n.length){var i,o,s,r,l,c,p,f,h,m,v,g=u(".panel-overlay"),b={},w=u("."+d.params.viewsClass);v=d.params.swipePanel,u(document).on(d.touchEvents.start,e),u(document).on(d.touchEvents.move,t),u(document).on(d.touchEvents.end,a)}},d.initMessages=function(e){var t=u(e),a=t.find(".messages");if(0!==a.length){var n=t.find(".page-content");a.hasClass("new-messages-first")||(n[0].scrollTop=a.height()-n.height()),d.updateMessagesAngles(a)}},d.addMessage=function(e){if(e=e||{},e.type=e.type||"sent",!e.text||0===e.length)return!1;var t=u(".messages-content");if(0===t.length)return!1;var a=t.find(".messages"),n=a.hasClass("new-messages-first"),i="";e.day&&(i+='<div class="messages-date">'+e.day+(e.time?",":"")+(e.time?" <span>"+e.time+"</span>":"")+"</div>");var o=e.text.indexOf("<img")>=0?"message-pic":"",s=e.avatar?"message-with-avatar":"",r="message message-"+e.type+o+" "+s+" message-appear";i+='<div class="'+r+'">'+(e.name?'<div class="message-name">'+e.name+"</div>":"")+'<div class="message-text">'+e.text+"</div>"+(e.avatar?'<div class="message-avatar" style="background-image:url('+e.avatar+')"></div>':"")+"</div>",n?a.prepend(i):a.append(i),d.updateMessagesAngles(a),d.scrollMessagesContainer(t)},d.updateMessagesAngles=function(e){e.find(".message").each(function(){var e=u(this);e.find(".message-text img").length>0&&e.addClass("message-pic"),e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),e.find(".message-sent").each(function(){var e=u(this),t=e.next(".message-sent"),a=e.prev(".message-sent");0===t.length?e.addClass("message-last"):e.removeClass("message-last"),0===a.length?e.addClass("message-first"):e.removeClass("message-first"),a.length>0&&a.find(".message-name").length>0&&e.find(".message-name").length>0&&a.find(".message-name").text()!==e.find(".message-name").text()&&(a.addClass("message-last"),e.addClass("message-first"))}),e.find(".message-received").each(function(){var e=u(this),t=e.next(".message-received"),a=e.prev(".message-received");0===t.length?e.addClass("message-last"):e.removeClass("message-last"),0===a.length?e.addClass("message-first"):e.removeClass("message-first"),a.length>0&&a.find(".message-name").length>0&&e.find(".message-name").length>0&&a.find(".message-name").text()!==e.find(".message-name").text()&&(a.addClass("message-last"),e.addClass("message-first"))})},d.scrollMessagesContainer=function(e){if(e=u(e||".messages-content"),0!==e.length){var t=e.find(".messages"),a=t.hasClass("new-messages-first"),n=e[0].scrollTop,i=a?0:t.height()-e.height();i!==n&&e.scrollTop(i,300)}},d.swipeoutOpenedEl=void 0,d.allowSwipeout=!0,d.initSwipeout=function(e){function t(e){d.allowSwipeout&&(o=!1,i=!0,s=void 0,g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,r=(new Date).getTime())}function a(e){if(i){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof s&&(s=!!(s||Math.abs(a-g.y)>Math.abs(t-g.x))),s)return void(i=!1);if(!o){if(u(".list-block.sortable-opened").length>0)return;c=u(this),p=c.find(".swipeout-content"),f=c.find(".swipeout-actions-inner"),h=f.width(),v=c.hasClass("swipeout-opened"),c.removeClass("transitioning")}if(o=!0,e.preventDefault(),d.rtl&&(e.f7PreventSwipeBack=!0),l=t-g.x,m=l-(v?h:0),m>0){if(!v)return void(i=o=!1);m=0}if(-h>m&&(m=-h-Math.pow(-m-h,.8)),e.f7PreventPanelSwipe=!0,d.params.swipeoutNoFollow){if(0>l&&!v)return d.swipeoutOpen(c),i=!1,void(o=!1);if(l>0&&v)return d.swipeoutClose(c),i=!1,void(o=!1)}else c.trigger("swipeout",{progress:Math.abs(m/h)}),p.transform("translate3d("+m+"px,0,0)")}}function n(){if(!i||!o)return i=!1,void(o=!1);i=!1,o=!1;var e=(new Date).getTime()-r;0!==m&&m!==-h&&(d.allowSwipeout=!1);var t;if(t=v?300>e&&m>-(h-10)||e>=300&&m>-h/2?"close":"open":300>e&&-10>m||e>=300&&-h/2>m?"open":"close","open"===t){d.swipeoutOpenedEl=c,c.trigger("open"),c.addClass("swipeout-opened transitioning");var a=-h;p.transform("translate3d("+a+"px,0,0)")}else c.trigger("close"),d.swipeoutOpenedEl=void 0,c.addClass("transitioning").removeClass("swipeout-opened"),p.transform("translate3d(0px,0,0)");-h>=m?(v||c.trigger("opened"),d.allowSwipeout=!0):m>=0?(v&&c.trigger("closed"),d.allowSwipeout=!0):p.transitionEnd(function(){d.allowSwipeout=!0,c.trigger("open"===t?"opened":"closed")})}var i,o,s,r,l,c,p,f,h,m,v,g={};u(document).on(d.touchEvents.start,function(e){if(d.swipeoutOpenedEl){var t=u(e.target);d.swipeoutOpenedEl.is(t[0])||t.parents(".swipeout").is(d.swipeoutOpenedEl)||t.hasClass("modal-in")||t.parents(".modal-in").length>0||t.hasClass("modal-overlay")||d.swipeoutClose(d.swipeoutOpenedEl)}}),e?(u(e).on(d.touchEvents.start,t),u(e).on(d.touchEvents.move,a),u(e).on(d.touchEvents.end,n)):(u(document).on(d.touchEvents.start,".list-block li.swipeout",t),u(document).on(d.touchEvents.move,".list-block li.swipeout",a),u(document).on(d.touchEvents.end,".list-block li.swipeout",n))},d.swipeoutOpen=function(e){if(e=u(e),e.hasClass("swipeout")&&0!==e.length){e.length>1&&(e=u(e[0])),e.trigger("open").addClass("transitioning swipeout-opened");var t=e.find(".swipeout-actions-inner"),a=-t.width();e.find(".swipeout-content").transform("translate3d("+a+"px,0,0)").transitionEnd(function(){e.trigger("opened")}),d.swipeoutOpenedEl=e}},d.swipeoutClose=function(e){e=u(e),0!==e.length&&(d.allowSwipeout=!1,e.trigger("close"),e.removeClass("swipeout-opened").addClass("transitioning").find(".swipeout-content").transform("translate3d(0px,0,0)").transitionEnd(function(){e.trigger("closed"),d.allowSwipeout=!0}),d.swipeoutOpenedEl&&d.swipeoutOpenedEl[0]===e[0]&&(d.swipeoutOpenedEl=void 0))},d.swipeoutDelete=function(e){if(e=u(e),0!==e.length){e.length>1&&(e=u(e[0])),d.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});{e[0].clientLeft}e.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){e.trigger("deleted"),e.remove()});var t="-100%";e.find(".swipeout-content").transform("translate3d("+t+",0,0)")}},d.sortableToggle=function(e){return e=u(e),0===e.length&&(e=u(".list-block.sortable")),e.toggleClass("sortable-opened"),e.trigger(e.hasClass("sortable-opened")?"open":"close"),e},d.sortableOpen=function(e){return e=u(e),0===e.length&&(e=u(".list-block.sortable")),e.addClass("sortable-opened"),e.trigger("open"),e},d.sortableClose=function(e){return e=u(e),0===e.length&&(e=u(".list-block.sortable")),e.removeClass("sortable-opened"),e.trigger("close"),e},d.initSortable=function(){function e(e){i=!1,n=!0,o="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,r=u(this).parent(),l=r.parent().find("li"),m=r.parents(".sortable"),e.preventDefault(),d.allowsPanelOpen=d.allowSwipeout=!1}function t(e){if(n&&r){var t=("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);i||(r.addClass("sorting"),m.addClass("sortable-sorting"),c=r[0].offsetTop,p=r.parent().height()-r[0].offsetTop-r.height()),i=!0,e.preventDefault(),e.f7PreventPanelSwipe=!0,s=t-o;var a=s;-c>a&&(a=-c),a>p&&(a=p),r.transform("translate3d(0,"+a+"px,0)"),h=f=void 0,l.each(function(){var e=u(this);if(e[0]!==r[0]){var t=e[0].offsetTop,n=e.height(),i=r[0].offsetTop+a;i>=t-n/2&&r.index()<e.index()?(e.transform("translate3d(0,-100%,0)"),f=e,h=void 0):t+n/2>=i&&r.index()>e.index()?(u(this).transform("translate3d(0,100%,0)"),f=void 0,h||(h=e)):u(this).transform("translate3d(0, 0%,0)")}})}}function a(e){return d.allowsPanelOpen=d.allowSwipeout=!0,n&&i?(e.preventDefault(),l.transform(""),r.removeClass("sorting"),m.removeClass("sortable-sorting"),f&&(r.insertAfter(f),r.trigger("sort")),h&&(r.insertBefore(h),r.trigger("sort")),f=h=void 0,n=!1,void(i=!1)):(n=!1,void(i=!1))}var n,i,o,s,r,l,c,p,f,h,m;u(document).on(d.touchEvents.start,".list-block.sortable .sortable-handler",e),d.support.touch?(u(document).on(d.touchEvents.move,".list-block.sortable .sortable-handler",t),u(document).on(d.touchEvents.end,".list-block.sortable .sortable-handler",a)):(u(document).on(d.touchEvents.move,t),u(document).on(d.touchEvents.end,a))},d.initSmartSelects=function(e){var t=u(e);if(0!==t.length){var a=t.find(".smart-select");0!==a.length&&a.each(function(){var e=u(this),t=e.find("select");if(0!==t.length){var a=t[0];if(0!==a.length){for(var n=[],i=0;i<a.length;i++)a[i].selected&&n.push(a[i].textContent.trim());var o=e.find(".item-after");0===o.length?e.find(".item-inner").append('<div class="item-after">'+n.join(", ")+"</div>"):o.text(n)}}})}},d.smartSelectOpen=function(e){function t(o){var s=o.detail.page;s.name===T&&(u(document).off("pageInit",t),u(s.container).find('input[name="'+v+'"]').on("change",function(){var t=this,o=t.value,s=[];if("checkbox"===t.type)for(var r=0;r<n.options.length;r++){var l=n.options[r];l.value===o&&(l.selected=t.checked),l.selected&&s.push(l.textContent.trim())}else s=[e.find('option[value="'+o+'"]').text()],n.value=o;i.trigger("change"),e.find(".item-after").text(s.join(", ")),f&&"radio"===m&&a.goBack()}))}if(e=u(e),0!==e.length){var a=e.parents("."+d.params.viewClass);if(0!==a.length&&(a=a[0].f7View)){var n=e.find("select")[0],i=u(n);if(!(n.disabled||e.hasClass("disabled")||i.hasClass("disabled"))){var o={};o.length=n.length;for(var s,r=0;r<n.length;r++)s=u(n[r]),o[r]={value:n[r].value,text:n[r].textContent.trim(),selected:n[r].selected,group:s.parent("optgroup")[0],image:s.attr("data-option-image")||i.attr("data-option-image"),icon:s.attr("data-option-icon")||i.attr("data-option-icon"),disabled:n[r].disabled};for(var l,c=e.attr("data-page-title")||e.find(".item-title").text(),p=e.attr("data-back-text")||d.params.smartSelectBackText,f=e.attr("data-back-onselect")?"true"===e.attr("data-back-onselect")?!0:!1:d.params.smartSelectBackOnSelect,h=(new Date).getTime(),m=n.multiple?"checkbox":"radio",v=m+"-"+h,g="",b=0;b<o.length;b++)if(!o[b].disabled){var w=o[b].selected?"checked":"";o[b].group&&o[b].group!==l&&(g+='<li class="item-divider">'+o[b].group.label+"</li>",l=o[b].group);var C="";"checkbox"===m&&(C+='<i class="icon icon-form-checkbox"></i>'),o[b].icon&&(C+='<i class="icon '+o[b].icon+'"></i>'),o[b].image&&(C+='<img src="'+o[b].image+'">'),g+='<li><label class="label-'+m+' item-content"><input type="'+m+'" name="'+v+'" value="'+o[b].value+'" '+w+">"+(""!==C?'<div class="item-media">'+C+"</div>":"")+'<div class="item-inner"><div class="item-title">'+o[b].text+"</div></div></label></li>"}var x='<div class="navbar">  <div class="navbar-inner">'+d.params.smartSelectBackTemplate.replace(/{{backText}}/g,p)+'    <div class="center sliding">'+c+"</div>  </div></div>",k="static";e.parents(".navbar-through").length>0&&(k="through"),e.parents(".navbar-fixed").length>0&&(k="fixed");var y,S,T="smart-select-"+v,P=e.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",$=e.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+k,E="undefined"==typeof e.data("searchbar")?d.params.smartSelectSearchbar:"true"===e.data("searchbar")?!0:!1;E&&(y=e.data("searchbar-placeholder")||"Search",S=e.data("searchbar-cancel")||"Cancel");var O='<form class="searchbar" data-search-list=".smart-select-list-'+h+'" data-search-in=".item-title"><div class="searchbar-input"><input type="search" placeholder="'+y+'"><a href="#" class="searchbar-clear"></a></div><a href="#" class="searchbar-cancel">'+S+'</a></form><div class="searchbar-overlay"></div>',N=("through"===k?x:"")+'<div class="pages">  <div data-page="'+T+'" class="page smart-select-page '+$+" "+P+'">'+("fixed"===k?x:"")+(E?O:"")+'    <div class="page-content">'+("static"===k?x:"")+'      <div class="list-block smart-select-list-'+h+'">        <ul>'+g+"        </ul>      </div>    </div>  </div></div>";u(document).on("pageInit",t),a.loadContent(N)}}}},d.initPullToRefresh=function(e){function t(e){if(s){if("android"!==d.device.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}r=!1,s=!0,l=void 0,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,p=(new Date).getTime()}function a(e){if(s){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof l&&(l=!!(l||Math.abs(a-v.y)>Math.abs(t-v.x))),!l)return void(s=!1);if(m=f[0].scrollTop,!r){if(f.removeClass("transitioning"),m>f[0].offsetHeight)return void(s=!1);w=f.hasClass("refreshing")?44:0,b=f[0].scrollHeight===f[0].offsetHeight||"ios"!==d.device.os?!0:!1}return r=!0,c=a-v.y,c>0&&0>=m||0>m?(b&&(e.preventDefault(),h=Math.pow(c,.85)+w,f.transform("translate3d(0,"+h+"px,0)")),void(b&&Math.pow(c,.85)>44||!b&&c>=88?(g=!0,f.addClass("pull-up")):(g=!1,f.removeClass("pull-up")))):(f.removeClass("pull-up"),void(g=!1))}}function n(){return s&&r?(h&&(f.addClass("transitioning"),h=0),f.transform(""),g&&(f.addClass("refreshing"),f.trigger("refresh",{done:function(){d.pullToRefreshDone(f)}})),s=!1,void(r=!1)):(s=!1,void(r=!1))}function i(){o.off(d.touchEvents.start,t),o.off(d.touchEvents.move,a),o.off(d.touchEvents.end,n),C.off("pageBeforeRemove",i)}var o=u(e);if(o.hasClass("pull-to-refresh-content")||(o=o.find(".pull-to-refresh-content")),0!==o.length){var s,r,l,c,p,f,h,m,v={},g=!1,b=!1,w=0;f=o,o.on(d.touchEvents.start,t),o.on(d.touchEvents.move,a),o.on(d.touchEvents.end,n);var C=o.hasClass("page")?o:o.parents(".page");0!==C.length&&C.on("pageBeforeRemove",i)}},d.pullToRefreshDone=function(e){e=u(e),0===e.length&&(e=u(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up")})},d.pullToRefreshTrigger=function(e){e=u(e),0===e.length&&(e=u(".pull-to-refresh-content")),e.hasClass("refreshing")||(e.addClass("transitioning refreshing"),e.trigger("refresh",{done:function(){d.pullToRefreshDone(e)}}))},d.attachInfiniteScroll=function(e){u(e).on("scroll",l)},d.detachInfiniteScroll=function(e){u(e).off("scroll",l)},d.initInfiniteScroll=function(e){function t(){d.detachInfiniteScroll(a),e.off("pageBeforeRemove",t)}e=u(e);var a=e.find(".infinite-scroll");d.attachInfiniteScroll(a),e.on("pageBeforeRemove",t)},d.showTab=function(e,t){var a=u(e);if(a.hasClass("active"))return!1;if(0===a.length)return!1;var n=a.parent(".tabs");if(0===n.length)return!1;d.allowSwipeout=!0;var i=n.parent().hasClass("tabs-animated-wrap");i&&n.transform("translate3d("+100*-a.index()+"%,0,0)");var o=n.children(".tab.active").removeClass("active");if(a.addClass("active"),a.trigger("show"),!i&&a.find(".navbar").length>0){var s;s=a.hasClass(d.params.viewClass)?a[0]:a.parents("."+d.params.viewClass)[0],d.sizeNavbars(s)}if(t?t=u(t):(t=u("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+a.attr("id")+'"]'),0===t.length&&u("[data-tab]").each(function(){a.is(u(this).attr("data-tab"))&&(t=u(this))})),0!==t.length){var r;if(o&&o.length>0){var l=o.attr("id");l&&(r=u('.tab-link[href="#'+l+'"]')),0===r.length&&u("[data-tab]").each(function(){o.is(u(this).attr("data-tab"))&&(r=u(this))})}return t&&t.length>0&&t.addClass("active"),r&&r.length>0&&r.removeClass("active"),!0}},d.accordionToggle=function(e){e=u(e),0!==e.length&&(e.hasClass("accordion-item-expanded")?d.accordionClose(e):d.accordionOpen(e))},d.accordionOpen=function(e){e=u(e);var t=e.parents(".accordion-list"),a=e.find(".accordion-item-content"),n=t.find(".accordion-item-expanded");n.length>0&&d.accordionClose(n),a.css("height",a[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){a.transition(0),a.css("height","auto");{a[0].clientLeft}a.transition("")}else a.css("height","")}),e.addClass("accordion-item-expanded")},d.accordionClose=function(e){e=u(e);var t=e.find(".accordion-item-content");e.removeClass("accordion-item-expanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){t.transition(0),t.css("height","auto");{t[0].clientLeft}t.transition("")}else t.css("height","")})},d.initFastClicks=function(){function e(e){var t="button checkbox file image radio submit input textarea".split(" ");return document.activeElement&&e!==document.activeElement&&document.activeElement!==document.body?t.indexOf(e.nodeName.toLowerCase())>=0?!1:!0:!1}function t(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),a="button checkbox file image radio submit".split(" ");return e.disabled||e.readOnly?!1:"textarea"===t?!0:"select"===t?"android"===d.device.os?!1:!0:"input"===t&&a.indexOf(e.type)<0?!0:void 0}function a(e){if(e=u(e),e.is("label")||e.parents("label").length>0){if("android"===d.device.os){var t=d.device.osVersion.split(".");return 1*t[0]>4||1*t[0]===4&&1*t[1]>=4?!1:!0}return!1}return!0}function n(t){if(b=!1,t.targetTouches.length>1)return!0;if("ios"===d.device.os){var a=window.getSelection();if(a.rangeCount&&(!a.isCollapsed||document.activeElement===a.focusNode))return m=!0,!0;m=!1}"android"===d.device.os&&e(t.target)&&document.activeElement.blur(),h=!0,f=t.target,p=(new Date).getTime(),l=t.targetTouches[0].pageX,c=t.targetTouches[0].pageY,"ios"===d.device.os&&(v=void 0,u(f).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!v&&(v=e,v.f7ScrollTop=v.scrollTop)})),t.timeStamp-g<200&&t.preventDefault()}function i(){h&&(h=!1,f=null,b=!0)}function o(e){if(!h)return m||e.preventDefault(),!0;if(document.activeElement===e.target)return!0;if(m||e.preventDefault(),e.timeStamp-g<200)return!0;if(g=e.timeStamp,p=0,h=!1,"ios"===d.device.os&&v&&v.scrollTop!==v.f7ScrollTop)return!1;t(f)&&f.focus(),e.preventDefault();var a=e.changedTouches[0],n=document.createEvent("MouseEvents"),i="click";return"android"===d.device.os&&"select"===f.nodeName.toLowerCase()&&(i="mousedown"),n.initMouseEvent(i,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,f.dispatchEvent(n),!1}function s(){h=!1,f=null}function r(e){var t=!1;return h?(f=null,h=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(f||(t=!0),document.activeElement===f&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),t||(e.stopImmediatePropagation(),e.stopPropagation(),f?(a(f)||b)&&e.preventDefault():e.preventDefault(),f=null),t)}if(d.support.touch){var l,c,p,f,h,m,v,g,b;document.addEventListener("click",r,!0),u(document).on("touchstart",n),u(document).on("touchmove",i),u(document).on("touchend",o),u(document).on("touchcancel",s)}},d.initClickEvents=function(){function e(e){var t=u(this),a=t.attr("href"),n="a"===t[0].nodeName.toLowerCase();if(n)for(var i=0;i<d.params.externalLinks.length;i++){if(t.hasClass(d.params.externalLinks[i]))return;if(t[0].rel===d.params.externalLinks[i])return}if(t.hasClass("smart-select")&&d.smartSelectOpen&&d.smartSelectOpen(t),t.hasClass("open-panel")&&d.openPanel(1===u(".panel").length?u(".panel").hasClass("panel-left")?"left":"right":"right"===t.attr("data-panel")?"right":"left"),t.hasClass("close-panel")&&d.closePanel(),t.hasClass("panel-overlay")&&d.params.panelsCloseByOutside&&d.closePanel(),t.hasClass("open-popover")){var o;o=t.attr("data-popover")?t.attr("data-popover"):".popover",d.popover(o,t)}t.hasClass("close-popover")&&d.closeModal(".popover.modal-in");var s;t.hasClass("open-popup")&&(s=t.attr("data-popup")?t.attr("data-popup"):".popup",d.popup(s)),t.hasClass("close-popup")&&(s=t.attr("data-popup")?t.attr("data-popup"):".popup.modal-in",d.closeModal(s));var r;if(t.hasClass("open-login-screen")&&(r=t.attr("data-login-screen")?t.attr("data-login-screen"):".login-screen",d.loginScreen(r)),t.hasClass("close-login-screen")&&d.closeModal(".login-screen.modal-in"),t.hasClass("modal-overlay")&&(u(".modal.modal-in").length>0&&d.params.modalCloseByOutside&&d.closeModal(".modal.modal-in"),u(".actions-modal.modal-in").length>0&&d.params.actionsCloseByOutside&&d.closeModal(".actions-modal.modal-in"),u(".popover.modal-in").length>0&&d.closeModal(".popover.modal-in")),t.hasClass("popup-overlay")&&u(".popup.modal-in").length>0&&d.params.popupCloseByOutside&&d.closeModal(".popup.modal-in"),t.hasClass("tab-link")&&d.showTab(t.attr("data-tab")||t.attr("href"),t),t.hasClass("swipeout-delete"))if(t.attr("data-confirm")){var l=t.attr("data-confirm"),c=t.attr("data-confirm-title");c?d.confirm(l,c,function(){d.swipeoutDelete(t.parents(".swipeout"))}):d.confirm(l,function(){d.swipeoutDelete(t.parents(".swipeout"))})}else d.swipeoutDelete(t.parents(".swipeout"));if(t.hasClass("toggle-sortable")&&d.sortableToggle(t.data("sortable")),t.hasClass("open-sortable")&&d.sortableOpen(t.data("sortable")),t.hasClass("close-sortable")&&d.sortableClose(t.data("sortable")),t.hasClass("accordion-item-toggle")||t.hasClass("item-link")&&t.parent().hasClass("accordion-item")){var p=t.parents(".accordion-item");0===p.length&&(p=t.parents("li")),d.accordionToggle(p)}if((!d.params.ajaxLinks||t.is(d.params.ajaxLinks))&&n){n&&e.preventDefault();var f=a&&a.length>0&&0!==a.indexOf("#");if(f||t.hasClass("back")){var h;if(t.attr("data-view")?h=u(t.attr("data-view"))[0].f7View:(h=t.parents("."+d.params.viewClass)[0]&&t.parents("."+d.params.viewClass)[0].f7View,h&&h.params.linksView&&(h=u(h.params.linksView)[0].f7View)),!h)for(var i=0;i<d.views.length;i++)d.views[i].main&&(h=d.views[i]);if(!h)return;var m;t.hasClass("no-animation")&&(m=!1),t.hasClass("with-animation")&&(m=!0),t.hasClass("back")?h.goBack(t.attr("href"),m):h.loadPage(t.attr("href"),m)}}}u(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle",e)},d.initResize=function(){u(window).on("resize",d.resize),u(window).on("orientationchange",d.orientationchange)},d.resize=function(){d.sizeNavbars&&d.sizeNavbars(),c()},d.orientationchange=function(){d.device&&d.device.minimalUi&&(90===window.orientation||-90===window.orientation)&&(document.body.scrollTop=0),c()},d.formsData={},d.formStoreData=function(e,t){d.formsData[e]=t,d.ls["f7form-"+e]=JSON.stringify(t)},d.formDeleteData=function(e){d.formsData[e]&&(d.formsData[e]="",delete d.formsData[e]),d.ls["f7form-"+e]&&(d.ls["f7form-"+e]="",delete d.ls["f7form-"+e])},d.formGetData=function(e){return d.ls["f7form-"+e]?JSON.parse(d.ls["f7form-"+e]):d.formsData[e]?d.formsData[e]:void 0},d.formToJSON=function(e){if(e=u(e),1!==e.length)return!1;var t={},a=["submit","image","button","file"],n=[];return e.find("input, select, textarea").each(function(){var i=u(this),o=i.attr("name"),s=i.attr("type"),r=this.nodeName.toLowerCase();if(!(a.indexOf(s)>=0||n.indexOf(o)>=0||!o))if("select"===r&&i.attr("multiple"))n.push(o),t[o]=[],e.find('select[name="'+o+'"] option').each(function(){this.selected&&t[o].push(this.value)});else switch(s){case"checkbox":n.push(o),t[o]=[],e.find('input[name="'+o+'"]').each(function(){this.checked&&t[o].push(this.value)});break;case"radio":n.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked&&(t[o]=this.value)});break;default:t[o]=i.val()}}),t},d.formFromJSON=function(e,t){if(e=u(e),1!==e.length)return!1;var a=["submit","image","button","file"],n=[];e.find("input, select, textarea").each(function(){var i=u(this),o=i.attr("name"),s=i.attr("type"),r=this.nodeName.toLowerCase();if(t[o]&&!(a.indexOf(s)>=0||n.indexOf(o)>=0||!o))if("select"===r&&i.attr("multiple"))n.push(o),e.find('select[name="'+o+'"] option').each(function(){this.selected=t[o].indexOf(this.value)>=0?!0:!1});else switch(s){case"checkbox":n.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked=t[o].indexOf(this.value)>=0?!0:!1});break;case"radio":n.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked=t[o]===this.value?!0:!1
});break;default:i.val(t[o])}})},d.initFormsStorage=function(e){function t(){var e=u(this),t=e[0].id;if(t){var a=d.formToJSON(e);a&&(d.formStoreData(t,a),e.trigger("store",{data:a}))}}function a(){n.off("change submit",t),e.off("pageBeforeRemove",a)}if(e=u(e),0!==e.length){var n=e.find("form.store-data");0!==n.length&&(n.each(function(){var e=this.getAttribute("id");if(e){var t=d.formGetData(e);t&&d.formFromJSON(this,t)}}),n.on("change submit",t),e.on("pageBeforeRemove",a))}},u(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var t=u(this);if("change"!==e.type||t.hasClass("ajax-submit-onchange")){"submit"===e.type&&e.preventDefault();var a=t.attr("method")||"GET",n=t.attr("enctype"),i=t.attr("action");if(i){var o;o="POST"===a?new FormData(t[0]):u.serializeObject(d.formToJSON(t[0]));var s=u.ajax({method:a,url:i,contentType:n,data:o,success:function(e){t.trigger("submitted",{data:e,xhr:s})}})}}}),d.pushStateQueue=[],d.pushStateClearQueue=function(){if(0!==d.pushStateQueue.length){var e,t=d.pushStateQueue.pop();d.params.pushStateNoAnimation===!0&&(e=!1),"goBack"===t.action&&d.goBack(t.view,void 0,e,!1,!1),"loadPage"===t.action&&d.loadPage(t.view,t.stateUrl,e,!1),"loadContent"===t.action&&d.loadContent(t.view,t.stateContent,e,!1)}},d.initPushState=function(){function e(e){if(!t){for(var a,n=0;n<d.views.length;n++)d.views[n].main&&(a=d.views[n]);if(a){var i=e.state;i||(i={url:a.history[0]});var o,s=i&&i.url||void 0,r=i&&i.content||void 0;d.params.pushStateNoAnimation===!0&&(o=!1),s!==a.url&&(a.history.indexOf(s)>=0?a.allowPageChange?d.goBack(a,void 0,o,!1,!1):d.pushStateQueue.push({action:"goBack",view:a}):s&&!r?a.allowPageChange?d.loadPage(a,s,o,!1):d.pushStateQueue.unshift({action:"loadPage",stateUrl:s,view:a}):r&&(a.allowPageChange?d.loadContent(a,r,o,!1):d.pushStateQueue.unshift({action:"loadContent",stateContent:r,view:a})))}}}var t=!0;u(window).on("load",function(){setTimeout(function(){t=!1},0)}),u(window).on("popstate",e)};var g=function(e,t){var a={initialSlide:0,spaceBetween:0,speed:300,slidesPerView:1,direction:"horizontal",paginationHide:!0,slideClass:"slider-slide",slideActiveClass:"slider-slide-active",slideNextClass:"slider-slide-next",slidePrevClass:"slider-slide-prev",wrapperClass:"slider-wrapper",bulletClass:"slider-pagination-bullet",bulletActiveClass:"slider-pagination-active",preventClicks:!0,preventClicksPropagation:!0,autoplay:!1,autoplayDisableOnInteraction:!0};t=t||{};for(var n in a)"undefined"==typeof t[n]&&(t[n]=a[n]);var i=this;if(i.params=t,i.container=u(e),0!==i.container.length){i.container[0].f7Slider=i,i.container.addClass("vertical"===i.params.direction?"slider-container-vertical":"slider-container-horizontal"),i.wrapper=i.container.children("."+i.params.wrapperClass),i.params.pagination&&(i.paginationContainer=u(i.params.pagination)),i.activeSlideIndex=i.previousSlideIndex=i.params.initialSlide||0;var o="horizontal"===i.params.direction,s=o&&d.rtl?-1:1;i.updateSlides=function(){if(i.slides=i.wrapper.children("."+i.params.slideClass),0!==i.params.spaceBetween){var e=d.rtl?"margin-left":"margin-right";o?i.slides.css(e,i.params.spaceBetween+"px"):i.slides.css({marginBottom:i.params.spaceBetween+"px"})}if(i.params.slidesPerView>1){var a="(100% - "+(i.params.slidesPerView-1)*t.spaceBetween+"px)/"+i.params.slidesPerView;o?(i.slides.css("width","-webkit-calc("+a+")"),i.slides.css("width","-moz-calc("+a+")"),i.slides.css("width","calc("+a+")")):(i.slides.css("height","-webkit-calc("+a+")"),i.slides.css("height","-moz-calc("+a+")"),i.slides.css("height","calc("+a+")"))}},i.updatePagination=function(){if(i.paginationContainer&&i.paginationContainer.length>0){for(var e="",t=0;t<i.slides.length-i.params.slidesPerView+1;t++)e+='<span class="'+i.params.bulletClass+'"></span>';i.paginationContainer.html(e),i.bullets=i.paginationContainer.find("."+i.params.bulletClass)}},i.updateSize=function(){i.width=i.container[0].offsetWidth,i.height=i.container[0].offsetHeight,i.size=o?i.width:i.height},i.attachEvents=function(e){var t=e?"off":"on";i.container[t](d.touchEvents.start,i.onTouchStart),i.container[t](d.touchEvents.move,i.onTouchMove),i.container[t](d.touchEvents.end,i.onTouchEnd),u(window)[t]("resize",i.onResize),i.params.nextButton&&u(i.params.nextButton)[t]("click",i.onClickNext),i.params.prevButton&&u(i.params.prevButton)[t]("click",i.onClickPrev),i.params.indexButton&&u(i.params.indexButton)[t]("click",i.onClickIndex),i.params.preventClicks&&i.container[t]("click",i.onClick)},i.detachEvents=function(){i.attachEvents(!0)},i.onResize=function(){i.updateSize(),i.slideTo(i.activeSlideIndex,0,!1)};var r,l,c,p,f,h,m={},v={},g=!1,b=Date.now();i.allowClick=!0,i.onClick=function(e){i.params.preventClicks&&!i.allowClick&&(e.preventDefault(),i.params.preventClicksPropagation&&(e.stopPropagation(),e.stopImmediatePropagation()))},i.onTouchStart=function(e){r=!0,l=!1,p=void 0,m.x=v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,m.y=v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,c=Date.now(),i.allowClick=!0,i.updateSize(),i.params.onTouchStart&&i.params.onTouchStart(i,e),"mousedown"===e.type&&e.preventDefault()},i.onTouchMove=function(e){if(i.params.onTouchMove&&i.params.onTouchMove(i,e),i.allowClick=!1,!(e.targetTouches&&e.targetTouches.length>1)&&(v.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof p&&(p=!!(p||Math.abs(v.y-m.y)>Math.abs(v.x-m.x))),(o&&p||!o&&!p)&&i.params.onOppositeTouchMove&&i.params.onOppositeTouchMove(i,e),r)){if(o&&p||!o&&!p)return void(r=!1);i.params.onSliderMove&&i.params.onSliderMove(i,e),e.preventDefault(),e.stopPropagation(),l||(f=u.getTranslate(i.wrapper[0],o?"x":"y")*s,i.wrapper.transition(0),g&&i.onSlideChangeEnd(),t.autoplay&&C&&(i.params.autoplayDisableOnInteraction?i.stopAutoplay():w&&clearTimeout(w))),l=!0;var a=o?(v.x-m.x)*s:v.y-m.y;a>0&&0===i.activeSlideIndex?a=Math.pow(a,.85):0>a&&i.activeSlideIndex===i.slides.length-i.params.slidesPerView&&(a=-Math.pow(-a,.85));var n=o?(a+f)*s:0,c=o?0:a+f;i.wrapper.transform("translate3d("+n+"px, "+c+"px,0)")}},i.onTouchEnd=function(e){i.params.onTouchEnd&&i.params.onTouchEnd(i,e);var t=Date.now(),a=t-c;if(i.allowClick&&(300>a&&t-b>300&&(h&&clearTimeout(h),h=setTimeout(function(){i&&(i.params.paginationHide&&i.paginationContainer&&i.paginationContainer.toggleClass("slider-pagination-hidden"),i.params.onClick&&i.params.onClick(i,e))},300)),300>a&&300>t-b&&(h&&clearTimeout(h),i.params.onDoubleTap&&i.params.onDoubleTap(i,e)),i.params.onTap&&i.params.onTap(i,e)),b=Date.now(),!r||!l)return void(r=l=!1);r=l=!1;var n=o?(v.x-m.x)*s:v.y-m.y;Math.abs(n)<5&&300>a&&i.allowClick===!1&&(i.allowClick=!0),setTimeout(function(){i&&(i.allowClick=!0)},100);var d=i.params.autoplay&&C&&!i.params.autoplayDisableOnInteraction;if(0===n)return void(d&&i.startAutoplay());var p=1,u=i.size/i.params.slidesPerView;i.params.slidesPerView>1&&(p=Math.abs((Math.abs(n)+u/2)/u)),d&&i.wrapper.transitionEnd(function(){i.startAutoplay()}),a>300?-u/2>=n?i.slideTo(i.activeSlideIndex+Math.floor(p)):n>u/2?i.slideTo(i.activeSlideIndex-Math.floor(p)):i.slideReset():Math.abs(n)<10?i.slideReset():i.slideTo(0>n?i.activeSlideIndex+Math.round(p):i.activeSlideIndex-Math.round(p))},i.slideTo=function(e,t,a){"undefined"==typeof e&&(e=0),0>e&&(e=0),e>i.slides.length-i.params.slidesPerView&&(e=i.slides.length-i.params.slidesPerView);var n=-(i.size+i.params.spaceBetween)*e/i.params.slidesPerView;"undefined"==typeof t&&(t=i.params.speed),i.previousSlideIndex=i.activeSlideIndex,i.activeSlideIndex=Math.round(e),i.isFirst=0===i.activeSlideIndex,i.isLast=i.activeSlideIndex===i.slides.length-i.params.slidesPerView,i.onSlideChangeStart();var r=o?n*s:0,l=o?0:n;0===t?(i.wrapper.transition(0).transform("translate3d("+r+"px,"+l+"px,0)"),a!==!1&&i.onSlideChangeEnd()):(g=!0,i.wrapper.transition(t).transform("translate3d("+r+"px,"+l+"px,0)").transitionEnd(function(){a!==!1&&i.onSlideChangeEnd()}))},i.updateClasses=function(){i.slides.removeClass(i.params.slideActiveClass+" "+i.params.slideNextClass+" "+i.params.slidePrevClass);var e=i.slides.eq(i.activeSlideIndex);e.addClass(i.params.slideActiveClass),e.next().addClass(i.params.slideNextClass),e.prev().addClass(i.params.slidePrevClass),i.bullets&&i.bullets.length>0&&(i.bullets.removeClass(i.params.bulletActiveClass),i.bullets.eq(i.activeSlideIndex).addClass(i.params.bulletActiveClass))},i.onSlideChangeStart=function(){i.updateClasses(),i.params.onSlideChangeStart&&i.params.onSlideChangeStart(i)},i.onSlideChangeEnd=function(){g=!1,i.wrapper.transition(0),i.params.onSlideChangeEnd&&i.params.onSlideChangeEnd(i)},i.slideNext=function(){i.slideTo(i.activeSlideIndex+1)},i.slidePrev=function(){i.slideTo(i.activeSlideIndex-1)},i.slideReset=function(){i.slideTo(i.activeSlideIndex)},i.onClickNext=function(e){e.preventDefault(),i.slideNext()},i.onClickPrev=function(e){e.preventDefault(),i.slidePrev()},i.onClickIndex=function(e){e.preventDefault(),i.slideTo(u(this).index())};var w,C;return i.startAutoplay=function(){i.params.autoplay&&(C=!0,w&&clearTimeout(w),w=setTimeout(function(){i.wrapper.transitionEnd(function(){i.startAutoplay()});var e=i.activeSlideIndex+1;e>i.slides.length-i.params.slidesPerView&&(e=0),i.slideTo(e)},i.params.autoplay))},i.stopAutoplay=function(){C=!1,w&&clearTimeout(w)},i.resetAutoplay=function(){i.stopAutoplay(),i.startAutoplay()},i.init=function(){i.updateSlides(),i.updatePagination(),i.updateSize(),i.slideTo(i.params.initialSlide,0),i.attachEvents(),i.params.autoplay&&i.startAutoplay()},i.destroy=function(){i.detachEvents(),i.params.onDestroy&&i.params.onDestroy(),i=void 0},i.init(),i}};d.slider=function(e,t){return new g(e,t)},d.initSlider=function(e){function t(e){function t(){e.destroy(),a.off("pageBeforeRemove",t)}a.on("pageBeforeRemove",t)}var a=u(e),n=a.find(".slider-init");if(0!==n.length)for(var i=0;i<n.length;i++){var o,s=n.eq(i);o=s.data("slider")?JSON.parse(s.data("slider")):{initialSlide:parseInt(s.data("initialSlide"),10)||void 0,spaceBetween:parseInt(s.data("spaceBetween"),10)||void 0,speed:parseInt(s.data("speed"),10)||void 0,slidesPerView:s.data("slidesPerView"),direction:s.data("direction"),pagination:s.data("pagination"),paginationHide:s.data("paginationHide")&&("true"===s.data("paginationHide")?!0:!1),slideClass:s.data("slideClass"),slideActiveClass:s.data("slideActiveClass"),slideNextClass:s.data("slideNextClass"),slidePrevClass:s.data("slidePrevClass"),wrapperClass:s.data("wrapperClass"),bulletClass:s.data("bulletClass"),bulletActiveClass:s.data("bulletActiveClass"),nextButton:s.data("nextButton"),prevButton:s.data("prevButton"),indexButton:s.data("indexButton"),autoplay:s.data("autoplay")};var r=d.slider(s[0],o);t(r)}};var b=function(e){function t(){var e;for(a=0;a<d.views.length;a++)d.views[a].main&&(e=d.views[a]);return e}var a,n=this,i={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of"};e=e||{};for(var o in i)"undefined"==typeof e[o]&&(e[o]=i[o]);n.params=e;var s="dark"===n.params.theme?"color-white":"",r=n.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+("page"===n.params.type&&"back")+' close-popup photo-browser-close-link" data-popup=".photo-browser-popup"><i class="icon icon-back '+s+'"></i><span>'+n.params.backLinkText+'</span></a></div><div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">'+n.params.ofText+'</span> <span class="photo-browser-total"></span></div><div class="right"></div></div></div>',l=d.rtl?"next":"prev",c=d.rtl?"prev":"next",p=n.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-'+l+" "+s+'"></i></a><a href="#" class="link photo-browser-next"><i class="icon icon-'+c+" "+s+'"></i></a></div></div>',f=n.params.template||'<div class="photo-browser photo-browser-'+n.params.theme+'"><div class="view navbar-fixed toolbar-fixed">{{navbar}}<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">{{toolbar}}{{captions}}<div class="photo-browser-slider-container slider-container"><div class="photo-browser-slider-wrapper slider-wrapper">{{photos}}</div></div></div></div></div>',h=n.params.photoTemplate||'<div class="photo-browser-slide slider-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',m=n.params.captionsTheme||n.params.theme,v=n.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+m+'">{{captions}}</div>',g=n.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',b=n.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide slider-slide">{{html}}</div>',w="",C="";for(a=0;a<n.params.photos.length;a++){var x=n.params.photos[a],k="";"string"==typeof x||x instanceof String?k=x.indexOf("<")>=0||x.indexOf(">")>=0?b.replace(/{{html}}/g,x):h.replace(/{{url}}/g,x):"object"==typeof x&&(x.hasOwnProperty("html")&&x.html.length>0?k=b.replace(/{{html}}/g,x.html):x.hasOwnProperty("url")&&x.url.length>0&&(k=h.replace(/{{url}}/g,x.url)),x.hasOwnProperty("caption")&&x.caption.length>0?C+=g.replace(/{{caption}}/g,x.caption).replace(/{{captionIndex}}/g,a):k=k.replace(/{{caption}}/g,"")),w+=k}var y=f.replace("{{navbar}}",n.params.navbar?r:"").replace("{{noNavbar}}",n.params.navbar?"":"no-navbar").replace("{{photos}}",w).replace("{{captions}}",v.replace(/{{captions}}/g,C)).replace("{{toolbar}}",n.params.toolbar?p:"");n.activeSlideIndex=n.params.initialSlide,n.openIndex=n.activeSlideIndex,n.opened=!1,n.open=function(e){return"undefined"==typeof e&&(e=n.activeSlideIndex),e=parseInt(e,10),n.opened&&n.slider?void n.slider.slideTo(e):(n.opened=!0,n.openIndex=e,"standalone"===n.params.type&&u("body").append(y),"popup"===n.params.type&&(n.popup=d.popup('<div class="popup photo-browser-popup">'+y+"</div>"),u(n.popup).on("closed",n.onPopupClose)),"page"===n.params.type?(u(document).on("pageBeforeInit",n.onPageBeforeInit),u(document).on("pageBeforeRemove",n.onPageBeforeRemove),n.params.view||(n.params.view=t()),void n.params.view.loadContent(y)):(n.layout(n.openIndex),void(n.params.onOpen&&n.params.onOpen(n))))},n.close=function(){n.opened=!1,n.sliderContainer&&0!==n.sliderContainer.length&&(n.params.onClose&&n.params.onClose(n),n.attachEvents(!0),"standalone"===n.params.type&&n.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){n.container.remove()}),n.slider.destroy(),n.slider=n.sliderContainer=n.sliderWrapper=n.slides=S=T=P=void 0)},n.onPopupClose=function(){n.close(),u(n.popup).off("pageBeforeInit",n.onPopupClose)},n.onPageBeforeInit=function(e){"photo-browser-slides"===e.detail.page.name&&n.layout(n.openIndex),u(document).off("pageBeforeInit",n.onPageBeforeInit)},n.onPageBeforeRemove=function(e){"photo-browser-slides"===e.detail.page.name&&n.close(),u(document).off("pageBeforeRemove",n.onPageBeforeRemove)},n.layout=function(e){n.container="page"===n.params.type?u(".photo-browser-slider-container").parents(".view"):u(".photo-browser"),"standalone"===n.params.type&&(n.container.addClass("photo-browser-in"),d.sizeNavbars(n.container)),n.sliderContainer=n.container.find(".photo-browser-slider-container"),n.sliderWrapper=n.container.find(".photo-browser-slider-wrapper"),n.slides=n.container.find(".photo-browser-slide"),n.captionsContainer=n.container.find(".photo-browser-captions"),n.captions=n.container.find(".photo-browser-caption");var t={nextButton:n.params.nextButton||".photo-browser-next",prevButton:n.params.prevButton||".photo-browser-prev",indexButton:n.params.indexButton,initialSlide:e,spaceBetween:n.params.spaceBetween,speed:n.params.speed,onTap:function(e,t){n.params.onTap&&n.params.onTap(e,t)},onClick:function(e,t){n.params.exposition&&n.toggleExposition(),n.params.onClick&&n.params.onClick(e,t)},onDoubleTap:function(e,t){n.toggleZoom(u(t.target).parents(".photo-browser-slide")),n.params.onDoubleTap&&n.params.onDoubleTap(e,t)},onSlideChangeStart:function(e){n.activeSlideIndex=e.activeSlideIndex,n.container.find(".photo-browser-current").text(e.activeSlideIndex+1),n.container.find(".photo-browser-total").text(e.slides.length),u(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),e.isFirst&&u(".photo-browser-prev").addClass("photo-browser-link-inactive"),e.isLast&&u(".photo-browser-next").addClass("photo-browser-link-inactive"),n.captions.length>0&&(n.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),n.captionsContainer.find('[data-caption-index="'+n.activeSlideIndex+'"]').addClass("photo-browser-caption-active"));var t=e.slides.eq(e.previousSlideIndex).find("video");t.length>0&&"pause"in t[0]&&t[0].pause(),n.params.onSlideChangeStart&&n.params.onSlideChangeStart(e)},onSlideChangeEnd:function(e){n.params.zoom&&S&&e.previousSlideIndex!==e.activeSlideIndex&&(T.transform("translate3d(0,0,0) scale(1)"),P.transform("translate3d(0,0,0)"),S=T=P=void 0,$=E=1),n.params.onSlideChangeEnd&&n.params.onSlideChangeEnd(e)}};n.params.swipeToClose&&"page"!==n.params.type&&(t.onTouchStart=n.swipeCloseTouchStart,t.onOppositeTouchMove=n.swipeCloseTouchMove,t.onTouchEnd=n.swipeCloseTouchEnd),n.slider=d.slider(n.sliderContainer,t),n.attachEvents()},n.attachEvents=function(e){var t=e?"off":"on";n.params.zoom&&(n.slides[t]("gesturestart",n.onSlideGestureStart),n.slides[t]("gesturechange",n.onSlideGestureChange),n.slides[t]("gestureend",n.onSlideGestureEnd),n.slides[t](d.touchEvents.start,n.onSlideTouchStart),n.slides[t](d.touchEvents.move,n.onSlideTouchMove),n.slides[t](d.touchEvents.end,n.onSlideTouchEnd)),n.container.find(".photo-browser-close-link")[t]("click",n.close)};n.exposed=!1,n.toggleExposition=function(){n.container&&n.container.toggleClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.toggleClass("photo-browser-captions-exposed"),n.exposed=!n.exposed},n.expositionOn=function(){n.container&&n.container.addClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.addClass("photo-browser-captions-exposed"),n.exposed=!0},n.expositionOff=function(){n.container&&n.container.removeClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.removeClass("photo-browser-captions-exposed"),n.exposed=!1};var S,T,P,$=1,E=1,O=!1;n.onSlideGestureStart=function(){S||(S=u(this),T=S.find("img"),P=T.parent()),T.transition(0),O=!0},n.onSlideGestureChange=function(e){$=e.scale*E,$>n.params.maxZoom&&($=n.params.maxZoom-1+Math.pow($-n.params.maxZoom+1,.5)),$<n.params.minZoom&&($=n.params.minZoom+1-Math.pow(n.params.minZoom-$+1,.5)),T.transform("translate3d(0,0,0) scale("+$+")")},n.onSlideGestureEnd=function(){$=Math.max(Math.min($,n.params.maxZoom),n.params.minZoom),T.transition(n.params.speed).transform("translate3d(0,0,0) scale("+$+")"),E=$,O=!1,1===$&&(S=void 0)},n.toggleZoom=function(){S||(S=n.slides.eq(n.slider.activeSlideIndex),T=S.find("img"),P=T.parent()),P.transition(300).transform("translate3d(0,0,0)"),$&&1!==$?($=E=1,T.transition(300).transform("translate3d(0,0,0) scale(1)"),S=void 0):($=E=n.params.maxZoom,T.transition(300).transform("translate3d(0,0,0) scale("+$+")"))};var N,A,B,I,M,L,D,j,V,R,H,F,z,q,X,G,U,_={},J={};n.onSlideTouchStart=function(e){N||("android"===d.device.os&&e.preventDefault(),N=!0,_.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,_.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)},n.onSlideTouchMove=function(e){if(n.slider.allowClick=!1,N&&S){A||(V=T[0].offsetWidth,R=T[0].offsetHeight,H=u.getTranslate(P[0],"x")||0,F=u.getTranslate(P[0],"y")||0,P.transition(0));var t=V*$,a=R*$;if(!(t<n.slider.width&&a<n.slider.height)){if(M=Math.min(n.slider.width/2-t/2,0),D=-M,L=Math.min(n.slider.height/2-a/2,0),j=-L,J.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,J.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!A&&!O&&(Math.floor(M)===Math.floor(H)&&J.x<_.x||Math.floor(D)===Math.floor(H)&&J.x>_.x))return void(N=!1);e.stopPropagation(),A=!0,B=J.x-_.x+H,I=J.y-_.y+F,M>B&&(B=M+1-Math.pow(M-B+1,.8)),B>D&&(B=D-1+Math.pow(B-D+1,.8)),L>I&&(I=L+1-Math.pow(L-I+1,.8)),I>j&&(I=j-1+Math.pow(I-j+1,.8)),z||(z=J.x),G||(G=J.y),q||(q=Date.now()),X=(J.x-z)/(Date.now()-q)/2,U=(J.y-G)/(Date.now()-q)/2,Math.abs(J.x-z)<2&&(X=0),Math.abs(J.y-G)<2&&(U=0),z=J.x,G=J.y,q=Date.now(),P.transform("translate3d("+B+"px, "+I+"px,0)")}}},n.onSlideTouchEnd=function(){if(!N||!A)return N=!1,void(A=!1);N=!1,A=!1;var e=300,t=300,a=X*e,i=B+a,o=U*t,s=I+o;0!==X&&(e=Math.abs((i-B)/X)),0!==U&&(t=Math.abs((s-I)/U));var r=Math.max(e,t);B=i,I=s;var l=V*$,c=R*$;M=Math.min(n.slider.width/2-l/2,0),D=-M,L=Math.min(n.slider.height/2-c/2,0),j=-L,B=Math.max(Math.min(B,D),M),I=Math.max(Math.min(I,j),L),P.transition(r).transform("translate3d("+B+"px, "+I+"px,0)")};var Y,W,Q,Z,K,et=!1,tt=!0,at=!1;return n.swipeCloseTouchStart=function(){tt&&(et=!0)},n.swipeCloseTouchMove=function(e,t){if(et){at||(at=!0,W="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,Z=n.slider.slides.eq(n.slider.activeSlideIndex),K=(new Date).getTime()),t.preventDefault(),Q="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,Y=W-Q;var a=1-Math.abs(Y)/300;Z.transform("translate3d(0,"+-Y+"px,0)"),n.slider.container.css("opacity",a).transition(0)}},n.swipeCloseTouchEnd=function(){if(et=!1,!at)return void(at=!1);at=!1,tt=!1;var e=Math.abs(Y),t=(new Date).getTime()-K;return 300>t&&e>20||t>=300&&e>100?void setTimeout(function(){"standalone"===n.params.type&&n.close(),"popup"===n.params.type&&d.closeModal(n.popup),n.params.onSwipeToClose&&n.params.onSwipeToClose(n),tt=!0},0):(0!==e?Z.addClass("transitioning").transitionEnd(function(){tt=!0,Z.removeClass("transitioning")}):tt=!0,n.slider.container.css("opacity","").transition(""),void Z.transform(""))},n};d.photoBrowser=function(e){return new b(e)};var w;d.addNotification=function(e){if(e){"undefined"==typeof e.media&&(e.media=d.params.notificationMedia),"undefined"==typeof e.title&&(e.title=d.params.notificationTitle),"undefined"==typeof e.subtitle&&(e.subtitle=d.params.notificationSubtitle),"undefined"==typeof e.closeIcon&&(e.closeIcon=d.params.notificationCloseIcon),"undefined"==typeof e.hold&&(e.hold=d.params.notificationHold),"undefined"==typeof e.closeOnClick&&(e.closeOnClick=d.params.notificationCloseOnClick),w||(w=document.createElement("div"));var t=u(".notifications");0===t.length&&(u("body").append('<div class="notifications list-block media-list"><ul></ul></div>'),t=u(".notifications"));var a,n=t.children("ul");a=e.custom?"<li>"+e.custom+"</li>":'<li class="notification-item notification-hidden"><div class="item-content">'+(e.media?'<div class="item-media">'+e.media+"</div>":"")+'<div class="item-inner"><div class="item-title-row">'+(e.title?'<div class="item-title">'+e.title+"</div>":"")+(e.closeIcon?'<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>':"")+"</div>"+(e.subtitle?'<div class="item-subtitle">'+e.subtitle+"</div>":"")+(e.message?'<div class="item-text">'+e.message+"</div>":"")+"</div></div></li>",w.innerHTML=a;var i=u(w).children();i.on("click",function(t){e.onClick&&e.onClick(t,i[0]),e.closeOnClick?d.closeNotification(i[0]):(u(t.target).is(".close-notification")||u(t.target).parents(".close-notification").length>0)&&d.closeNotification(i[0])}),e.onClose&&i.data("f7NotificationOnClose",function(){e.onClose(i[0])}),e.additionalClass&&i.addClass(e.additionalClass),e.hold&&setTimeout(function(){i.length>0&&d.closeNotification(i[0])},e.hold),n.prepend(i[0]),t.show();var o=i.height();i.css("marginTop",-o+"px"),i.transition(0);{i[0].clientLeft}return i.transition(""),i.css("marginTop","0px"),t.transform("translate3d(0, 0,0)"),i.removeClass("notification-hidden"),i[0]}},d.closeNotification=function(e){if(e=u(e),0!==e.length&&!e.hasClass("notification-item-removing")){var t=u(".notifications"),a=e.height();e.css("height",a+"px").transition(0);{e[0].clientLeft}e.css("height","0px").transition("").addClass("notification-item-removing"),e.data("f7NotificationOnClose")&&e.data("f7NotificationOnClose")(),0===t.find(".notification-item:not(.notification-item-removing)").length&&t.transform(""),e.addClass("notification-hidden").transitionEnd(function(){e.remove(),0===t.find(".notification-item").length&&t.hide()})}};var C=[];return d.initPlugins=function(){for(var e in d.plugins){var t=d.plugins[e](d,d.params[e]);t&&C.push(t)}},d.pluginHook=function(e){for(var t=0;t<C.length;t++)C[t].hooks&&e in C[t].hooks&&C[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},d.pluginPrevent=function(e){for(var t=!1,a=0;a<C.length;a++)C[a].prevents&&e in C[a].prevents&&C[a].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},d.pluginProcess=function(e,t){for(var a=t,n=0;n<C.length;n++)C[n].preprocess&&process in C[n].preprocess&&(a=C[n].preprocess[process](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return a},d.init=function(){d.initPlugins&&d.initPlugins(),d.getDeviceInfo&&d.getDeviceInfo(),d.initFastClicks&&d.params.fastClicks&&d.initFastClicks(),d.initClickEvents&&d.initClickEvents(),u(".page").each(function(){var e=u(this),t=e.parents("."+d.params.viewClass);if(0!==t.length){var a=t[0].f7View||!1,n=a&&a.url?a.url:!1;t&&t.attr("data-page",e.attr("data-page")||void 0),d.pageInitCallback(a,this,n,"center")}}),d.initResize&&d.initResize(),d.initPushState&&d.params.pushState&&d.initPushState(),d.initSwipeout&&d.params.swipeout&&d.initSwipeout(),d.initSortable&&d.params.sortable&&d.initSortable(),d.initSwipePanels&&d.params.swipePanel&&d.initSwipePanels(),d.params.onAppInit&&d.params.onAppInit(),d.pluginHook("appInit")},d.params.init&&d.init(),d};var e=function(){var e=function(e){var t=this,a=0;for(a=0;a<e.length;a++)t[a]=e[a];return t.length=e.length,this},t=function(t,a){var n=[],i=0;if(t&&!a&&t instanceof e)return t;if(t)if("string"==typeof t){var o=(a||document).querySelectorAll(t);for(i=0;i<o.length;i++)n.push(o[i])}else if(t.nodeType||t===window||t===document)n.push(t);else if(t.length>0&&t[0].nodeType)for(i=0;i<t.length;i++)n.push(t[i]);return new e(n)};e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var t=e.split(" "),a=0;a<t.length;a++)for(var n=0;n<this.length;n++)this[n].classList.add(t[a]);return this},removeClass:function(e){if("undefined"==typeof e)return this.removeAttr("class");for(var t=e.split(" "),a=0;a<t.length;a++)for(var n=0;n<this.length;n++)this[n].classList.remove(t[a]);return this},hasClass:function(e){return this[0]?this[0].classList.contains(e):!1},toggleClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a++)for(var n=0;n<this.length;n++)this[n].classList.toggle(t[a]);return this},attr:function(e,t){if("undefined"==typeof t)return this[0]?this[0].getAttribute(e):void 0;for(var a=0;a<this.length;a++)this[a].setAttribute(e,t);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e)},prop:function(e,t){if("undefined"==typeof t)return this[0]?this[0][e]:void 0;for(var a=0;a<this.length;a++)this[a][e]=t;return this},data:function(e,t){if("undefined"==typeof t){if(this[0]){var a=this[0].getAttribute("data-"+e);return a?a:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}return void 0}for(var n=0;n<this.length;n++){var i=this[n];i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t}return this},val:function(e){if("undefined"==typeof e)return this[0]?this[0].value:null;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var a=this[t].style;a.webkitTransform=a.MsTransform=a.msTransform=a.MozTransform=a.OTransform=a.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var a=this[t].style;a.webkitTransitionDuration=a.MsTransitionDuration=a.msTransitionDuration=a.MozTransitionDuration=a.OTransitionDuration=a.transitionDuration=e}return this},on:function(e,a,n){function i(e){var i=e.target;if(t(i).is(a))n.call(i,e);else for(var o=t(i).parents(),s=0;s<o.length;s++)t(o[s]).is(a)&&n.call(o[s],e)}var o,s,r=e.split(" ");for(o=0;o<this.length;o++)if(2===arguments.length||a===!1)for(2===arguments.length&&(n=arguments[1]),s=0;s<r.length;s++)this[o].addEventListener(r[s],n,!1);else for(s=0;s<r.length;s++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:n,liveListener:i}),this[o].addEventListener(r[s],i,!1);return this},off:function(e,t){for(var a=e.split(" "),n=0;n<a.length;n++)for(var i=0;i<this.length;i++)if(3===arguments.length){var o=(arguments[1],arguments[2]);if(this[i].dom7LiveListeners)for(var s=0;s<this[i].dom7LiveListeners.length;s++)this[i].dom7LiveListeners[s].listener===o&&this[i].removeEventListener(a[n],this[i].dom7LiveListeners[s].liveListener,!1)}else this[i].removeEventListener(a[n],t,!1);return this},trigger:function(e,t){for(var a=0;a<this.length;a++){var n;try{n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){n=document.createEvent("Event"),n.initEvent(e,!0,!0),n.detail=t}this[a].dispatchEvent(n)}return this},transitionEnd:function(e){function t(o){for(e.call(this,o),a=0;a<n.length;a++)i.off(n[a],t)}var a,n=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(a=0;a<n.length;a++)i.on(n[a],t);return this},animationEnd:function(e){function t(o){for(e(o),a=0;a<n.length;a++)i.off(n[a],t)}var a,n=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(e)for(a=0;a<n.length;a++)i.on(n[a],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width"))-parseFloat(this.css("padding-left"))-parseFloat(this.css("padding-right")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?this[0].offsetHeight-parseFloat(this.css("padding-top"))-parseFloat(this.css("padding-bottom")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),a=document.body,n=e.clientTop||a.clientTop||0,i=e.clientLeft||a.clientLeft||0,o=window.pageYOffset||e.scrollTop,s=window.pageXOffset||e.scrollLeft;return{top:t.top+o-n,left:t.left+s-i}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},css:function(e,t){var a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a++)for(var n in e)this[a].style[n]=e[n];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(a=0;a<this.length;a++)this[a].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[0].textContent=e},is:function(a){if(!this[0])return!1;var n,i;if("string"==typeof a){var o=this[0];if(o===document)return a===document;
if(o===window)return a===window;if(o.matches)return o.matches(a);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(a);if(o.mozMatchesSelector)return o.mozMatchesSelector(a);if(o.msMatchesSelector)return o.msMatchesSelector(a);for(n=t(a),i=0;i<n.length;i++)if(n[i]===this[0])return!0;return!1}if(a===document)return this[0]===document;if(a===window)return this[0]===window;if(a.nodeType||a instanceof e){for(n=a.nodeType?[a]:a,i=0;i<n.length;i++)if(n[i]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}return void 0},eq:function(t){if("undefined"==typeof t)return this;var a,n=this.length;return t>n-1?new e([]):0>t?(a=n+t,new e(0>a?[]:[this[a]])):new e([this[t]])},append:function(t){var a,n;for(a=0;a<this.length;a++)if("string"==typeof t){var i=document.createElement("div");for(i.innerHTML=t;i.firstChild;)this[a].appendChild(i.firstChild)}else if(t instanceof e)for(n=0;n<t.length;n++)this[a].appendChild(t[n]);else this[a].appendChild(t);return this},prepend:function(t){var a,n;for(a=0;a<this.length;a++)if("string"==typeof t){var i=document.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n--)this[a].insertBefore(i.childNodes[n],this[a].childNodes[0])}else if(t instanceof e)for(n=0;n<t.length;n++)this[a].insertBefore(t[n],this[a].childNodes[0]);else this[a].insertBefore(t,this[a].childNodes[0]);return this},insertBefore:function(e){for(var a=t(e),n=0;n<this.length;n++)if(1===a.length)a[0].parentNode.insertBefore(this[n],a[0]);else if(a.length>1)for(var i=0;i<a.length;i++)a[i].parentNode.insertBefore(this[n].cloneNode(!0),a[i])},insertAfter:function(e){for(var a=t(e),n=0;n<this.length;n++)if(1===a.length)a[0].parentNode.insertBefore(this[n],a[0].nextSibling);else if(a.length>1)for(var i=0;i<a.length;i++)a[i].parentNode.insertBefore(this[n].cloneNode(!0),a[i].nextSibling)},next:function(a){return new e(this.length>0?a?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(a)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(a){var n=[],i=this[0];if(!i)return new e([]);for(;i.nextElementSibling;){var o=i.nextElementSibling;n.push(a&&t(o).is(a)?o:o),i=o}return new e(n)},prev:function(a){return new e(this.length>0?a?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(a)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(a){var n=[],i=this[0];if(!i)return new e([]);for(;i.previousElementSibling;){var o=i.previousElementSibling;n.push(a&&t(o).is(a)?o:o),i=o}return new e(n)},parent:function(e){for(var a=[],n=0;n<this.length;n++)e?t(this[n].parentNode).is(e)&&a.push(this[n].parentNode):a.push(this[n].parentNode);return t(t.unique(a))},parents:function(e){for(var a=[],n=0;n<this.length;n++)for(var i=this[n].parentNode;i;)e?t(i).is(e)&&a.push(i):a.push(i),i=i.parentNode;return t(t.unique(a))},find:function(t){for(var a=[],n=0;n<this.length;n++)for(var i=this[n].querySelectorAll(t),o=0;o<i.length;o++)a.push(i[o]);return new e(a)},children:function(a){for(var n=[],i=0;i<this.length;i++)for(var o=this[i].childNodes,s=0;s<o.length;s++)a?1===o[s].nodeType&&t(o[s]).is(a)&&n.push(o[s]):1===o[s].nodeType&&n.push(o[s]);return new e(t.unique(n))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()}},function(){function t(t){e.prototype[t]=function(e){var a;if("undefined"==typeof e){for(a=0;a<this.length;a++)n.indexOf(t)<0&&this[a][t]();return this}return this.on(t,e)}}for(var a="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),n="resize scroll".split(" "),i=0;i<a.length;i++)t(a[i])}();var a=0;return t.ajax=function(e){var n={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded"};e.type&&(e.type=e.method);for(var i in n)i in e||(e[i]=n[i]);if(e.url||(e.url=window.location.toString()),("GET"===e.method||"HEAD"===e.method)&&e.data){var o;o="string"==typeof e.data?e.data.indexOf("?")>=0?e.data.split("?")[1]:e.data:t.serializeObject(e.data),e.url+=e.url.indexOf("?")>=0?"&"+o:"?"+o}if("json"===e.dataType&&e.url.indexOf("callback=")>=0){var s,r="f7jsonp_"+Date.now()+a++,l=e.url.split("callback=");if(l[1].indexOf("&")>=0){var c=l[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");s=l[0]+"callback="+r+(c.length>0?"&"+c:"")}else s=l[0]+"callback="+r;var d=document.createElement("script");return d.type="text/javascript",d.src=s,window[r]=function(t){e.success&&e.success(t),d.parentNode.removeChild(d),d=null,delete window[r]},void document.querySelector("head").appendChild(d)}("GET"===e.method||"HEAD"===e.method)&&e.cache===!1&&(e.url+="_nocache="+Date.now());var p=new XMLHttpRequest;p.open(e.method,e.url,e.async,e.user,e.password);var u=null;if(("POST"===e.method||"PUT"===e.method)&&e.data)if(e.processData){var f=[ArrayBuffer,Blob,Document,FormData];if(f.indexOf(e.data.constructor)>=0)u=e.data;else{var h="---------------------------"+Date.now().toString(16);"multipart/form-data"===e.contentType?p.setRequestHeader("Content-Type","multipart/form-data; boundary="+h):p.setRequestHeader("Content-Type",e.contentType),u="";var m=t.serializeObject(e.data);if("multipart/form-data"===e.contentType){h="---------------------------"+Date.now().toString(16),m=m.split("&");for(var v=[],g=0;g<m.length;g++)v.push('Content-Disposition: form-data; name="'+m[g].split("=")[0]+'"\r\n\r\n'+m[g].split("=")[1]+"\r\n");u="--"+h+"\r\n"+v.join("--"+h+"\r\n")+"--"+h+"--\r\n"}else u="application/x-www-form-urlencoded"===e.contentType?m:m.replace(/&/g,"\r\n")}}else u=e.data;if(e.headers)for(var b in e.headers)p.setRequestHeader(b,e.headers[b]);if("undefined"==typeof e.crossDomain&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||p.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.xhrFields)for(var w in e.xhrFields)p[w]=e.xhrFields[w];return p.onload=function(){if((200===p.status||0===p.status)&&(t(document).trigger("ajaxSuccess",{xhr:p}),e.success)){var a=p.responseText;"json"===e.dataType&&(a=JSON.parse(a)),e.success(a,p.status,p)}e.statusCode&&e.statusCode[p.status]&&e.statusCode[p.status](p),e.complete&&e.complete(p),t(document).trigger("ajaxComplete",{xhr:p})},p.onerror=function(){t(document).trigger("ajaxError",{xhr:p}),e.error&&e.error(p)},e.start&&e.start(p),t(document).trigger("ajaxStart",{xhr:p}),p.send(u),p},function(){function e(e){t[e]=function(a,n,i){return t.ajax({url:a,method:"post"===e?"POST":"GET",data:"function"==typeof n?void 0:n,success:"function"==typeof n?n:i,dataType:"getJSON"===e?"json":void 0})}}for(var a="get post getJSON".split(" "),n=0;n<a.length;n++)e(a[n])}(),t.parseUrlQuery=function(e){var t,a,n,i={};if(!(e.indexOf("?")>=0))return i;for(e=e.split("?")[1],a=e.split("&"),t=0;t<a.length;t++)n=a[t].split("="),i[n[0]]=n[1];return i},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)?!0:!1},t.unique=function(e){for(var t=[],a=0;a<e.length;a++)-1===t.indexOf(e[a])&&t.push(e[a]);return t},t.trim=function(e){return e.trim()},t.serializeObject=function(e){if("string"==typeof e)return e;var a=[],n="&";for(var i in e)if(t.isArray(e[i])){for(var o=[],s=0;s<e[i].length;s++)o.push(i+"="+e[i][s]);a.push(o.join(n))}else a.push(i+"="+e[i]);return a.join(n)},t.getTranslate=function(e,t){var a,n,i,o;return"undefined"==typeof t&&(t="x"),i=window.getComputedStyle(e,null),window.WebKitCSSMatrix?o=new WebKitCSSMatrix("none"===i.webkitTransform?"":i.webkitTransform):(o=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=o.toString().split(",")),"x"===t&&(n=window.WebKitCSSMatrix?o.m41:parseFloat(16===a.length?a[12]:a[4])),"y"===t&&(n=window.WebKitCSSMatrix?o.m42:parseFloat(16===a.length?a[13]:a[5])),n||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},t.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),t.fn=e.prototype,t.fn.scrollTo=function(e,a,n){return this.each(function(){function i(e){void 0===e&&(e=(new Date).getTime()),null===v&&(v=e);var a;h&&(p=o+(e-v)/n*(c-o)),m&&(u=s+(e-v)/n*(d-s)),h&&c>o&&p>=c&&(f.scrollTop=c,a=!0),h&&o>c&&c>=p&&(f.scrollTop=c,a=!0),m&&d>s&&u>=d&&(f.scrollLeft=d,a=!0),m&&s>d&&d>=u&&(f.scrollLeft=d,a=!0),a||(h&&(f.scrollTop=p),m&&(f.scrollLeft=u),t.requestAnimationFrame(i))}var o,s,r,l,c,d,p,u,f=this,h=a>0||0===a,m=e>0||0===e;if(h&&(o=f.scrollTop,n||(f.scrollTop=a)),m&&(s=f.scrollLeft,n||(f.scrollLeft=e)),n){h&&(r=f.scrollHeight-f.offsetHeight,c=Math.max(Math.min(a,r),0)),m&&(l=f.scrollWidth-f.offsetWidth,d=Math.max(Math.min(e,l),0));var v=null;h&&c===o&&(h=!1),m&&d===s&&(m=!1),t.requestAnimationFrame(i)}})},t.fn.scrollTop=function(e,t){var a=this;return"undefined"==typeof e?a.length>0?a[0].scrollTop:null:a.scrollTo(void 0,e,t)},t.fn.scrollLeft=function(e,t){var a=this;return"undefined"==typeof e?a.length>0?a[0].scrollLeft:null:a.scrollTo(e,void 0,t)},t}();Framework7.$=e;window.Dom7=e,Framework7.prototype.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),Framework7.prototype.device=function(){var t={},a=navigator.userAgent,n=e,i=a.match(/(Android);?[\s\/]+([\d.]+)?/),o=a.match(/(iPad).*OS\s([\d_]+)/),s=a.match(/(iPod)(.*OS\s([\d_]+))?/),r=!o&&a.match(/(iPhone\sOS)\s([\d_]+)/);if(t.ios=t.android=t.iphone=t.ipad=!1,i&&(t.os="android",t.osVersion=i[2],t.android=!0),(o||r||s)&&(t.os="ios",t.ios=!0),r&&!s&&(t.osVersion=r[2].replace(/_/g,"."),t.iphone=!0),o&&(t.osVersion=o[2].replace(/_/g,"."),t.ipad=!0),s&&(t.osVersion=s[3]?s[3].replace(/_/g,"."):null,t.iphone=!0),t.webView=(r||o||s)&&a.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split(".");t.minimalUi=!t.webView&&(s||r)&&(1*l[0]===7?1*l[1]>=1:1*l[0]>7)&&n('meta[name="viewport"]').length>0&&n('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var c=n(window).width(),d=n(window).height();t.statusBar=!1,t.statusBar=t.webView&&(320===c&&568===d||568===c&&320===d||320===c&&480===d||480===c&&320===d||768===c&&1024===d||1024===c&&768===d)?!0:!1;var p=[];if(t.pixelRatio=window.devicePixelRatio||1,t.pixelRatio>=2&&p.push("retina"),t.os&&(p.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var u=parseInt(t.osVersion.split(".")[0],10),f=u-1;f>=6;f--)p.push("ios-gt-"+f);return t.statusBar?p.push("with-statusbar-overlay"):n("html").removeClass("with-statusbar-overlay"),p.length>0&&n("html").addClass(p.join(" ")),t}(),Framework7.prototype.plugins={}}(),define("Framework7",function(e){return function(){var t;return t||e.Framework7}}(this)),define("services/openTypeService",[],function(){function e(){return o}function t(e){for(var t=0;t<n.length;t++)if(e===n[t].type)return n[t]}function a(){return i.length>1?"guide.html":1===i.length?"login.html?type="+o[0].type:void 0}for(var n=[{type:"1",name:"kh",title:"新开户",explain:"我是新入市投资者，还没有股东账户"},{type:"3",name:"zh",title:"转户",explain:"我已有股东账户，已撤销指定交易和完成转托管"},{type:"5",name:"lch",title:"理财户",explain:"无论有没有在其他券商开立股东账户，都可开立理财户"}],i=window.appParams.openType,o=[],s=0;s<i.length;s++)for(var r=0;r<n.length;r++)i[s]===n[r].type&&o.push(n[r]);return{getCurrentTypeData:e,getTypeData:t,setStartPage:a}}),define("GS",["services/openTypeService"],function(e){function t(){c||(c={},c.currentUser={},localStorage.getItem("user")&&(c.currentUser=JSON.parse(localStorage.getItem("user"))),localStorage.getItem("sid")&&(c.currentUser.sid=localStorage.getItem("sid")))}function a(){return c.currentUser}function n(){var e=$$.parseUrlQuery(window.location.href||"");return e.sid||localStorage.getItem("sid")}function i(e,t){c.currentUser=t,localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("sid",e)}function o(){c.currentUser={},localStorage.removeItem("user"),localStorage.removeItem("sid")}function s(){return c.currentUser&&localStorage.getItem("sid")?!0:!1}function r(){khApp.confirm("您确定要退出登录吗？",function(){var e=$$(".page-on-center").data("page");o(),khApp.closeModal(),khApp.closePanel(),"video"===e&&(clearTimeout(window.videoQueryTimer),console.log("quit video query successful")),mainView.loadPage(d)})}function l(){khApp.modal({title:"当前版本",text:window.appParams.version,buttons:[{text:"检测更新",onClick:function(){khApp.alert("您当前的版本已经是最新")}},{text:"返回"}]})}var c=null;t();var d=e.setStartPage();return{getSid:n,getCurrentUser:a,setCurrentUser:i,removeCurrentUser:o,isLogin:s,logout:r,checkUpdate:l,startPage:d}}),define("router",["GS"],function(e){function t(){if($$(document).on("pageBeforeInit",function(e){var t=e.detail.page;a(t.name,t.query)}),$$(".logout").on("click",e.logout),$$(".version").on("click",e.checkUpdate),e.isLogin()){var t=e.getCurrentUser();mainView.loadPage(t.node+".html")}else mainView.loadPage(e.startPage,!1)}function a(e,t){e in n&&require(["controllers/"+n[e]+"Controller"],function(e){e.init(t)})}var n={guide:"guide",login:"login",identity:"identity",collect:"collect",profile:"profile",department:"department",departments:"departments",video:"video",appoint:"appoint",cert:"cert",account:"account",risk:"risk",password:"password",depository:"depository",review:"review",audit:"audit",protocal:"protocal",reform:"reform",prov:"prov",city:"city",deps:"deps",accountList:"accountList"};return{init:t,load:a}}),require.config({baseUrl:"js",paths:{Framework7:"libs/framework7",mustache:"libs/mustache",text:"libs/text",templates:"../mustache",GS:"services/globalService"},shim:{Framework7:{exports:"Framework7"}}}),require(["Framework7","router"],function(e,t){window.$$=window.Dom7;var a=e.prototype.device;window.khApp=new e(a.android?{animatePages:!1,swipeout:!1,sortable:!1,cache:!1,pushState:!1,swipeBackPage:!1,popupCloseByOutside:!1,preloadPreviousPage:!1,animateNavBackIcon:!0,modalTitle:"系统消息",modalButtonOk:"确定",modalButtonCancel:"取消",smartSelectBackText:"完成",smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>'}:{cache:!1,pushState:!1,swipeBackPage:!1,popupCloseByOutside:!1,preloadPreviousPage:!1,animateNavBackIcon:!0,modalTitle:"系统消息",modalButtonOk:"确定",modalButtonCancel:"取消",smartSelectBackText:"完成",smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>'}),window.mainView=khApp.addView("#mainView",{dynamicNavbar:!0}),t.init()}),define("app",function(){}),define("utils",[],function(){function e(e){if($$.isArray(e)&&e.length>0)for(var t in e)$$(e[t].element).on(e[t].event,e[t].handler)}function t(e){var t=$$(e).parents(".page-content");$$(e).removeClass("fixed-bottom"),a(t[0])||$$(e).addClass("fixed-bottom")}function a(e){return e.scrollHeight>e.clientHeight}return{bindEvents:e,setButtonPosition:t}}),define("text",["module"],function(e){var t,a,n,i,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,u=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,a;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){a=s[t];try{e=new ActiveXObject(a)}catch(n){}if(e){s=[a];break}}return e},parseName:function(e){var t,a,n,i=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),a=e.substring(o+1,e.length)):t=e,n=a||t,o=n.indexOf("!"),-1!==o&&(i="strip"===n.substring(o+1),n=n.substring(0,o),a?a=n:t=n),{moduleName:t,ext:a,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,a,n,i){var o,s,r,l=t.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),r=s[1],s=s[0],!(o&&o!==a||s&&s.toLowerCase()!==n.toLowerCase()||(r||s)&&r!==i)):!0},finishLoad:function(e,a,n,i){n=a?t.strip(n):n,h.isBuild&&(f[e]=n),i(n)},load:function(e,a,n,i){if(i&&i.isBuild&&!i.inlineText)return void n();h.isBuild=i&&i.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),r=a.toUrl(s),l=h.useXhr||t.useXhr;return 0===r.indexOf("empty:")?void n():void(!c||l(r,d,p,u)?t.get(r,function(a){t.finishLoad(e,o.strip,a,n)},function(e){n.error&&n.error(e)}):a([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,a,n){if(f.hasOwnProperty(a)){var i=t.jsEscape(f[a]);n.asModule(e+"!"+a,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,a,n,i,o){var s=t.parseName(a),r=s.ext?"."+s.ext:"",l=s.moduleName+r,c=n.toUrl(s.moduleName+r)+".js";t.load(l,n,function(){var a=function(e){return i(c,e)};a.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,l,a,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(a=require.nodeRequire("fs"),t.get=function(e,t,n){try{var i=a.readFileSync(e,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),t(i)}catch(o){n&&n(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,a,n,i){var o,s=t.createXhr();if(s.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(){var t,i;4===s.readyState&&(t=s.status||0,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=s,n&&n(i)):a(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var a,n,i="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),l="";try{for(a=new java.lang.StringBuffer,n=r.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&a.append(n);null!==(n=r.readLine());)a.append(s),a.append(n);l=String(a.toString())}finally{r.close()}t(l)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var a,s,r,l={};o&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{a=n["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),a.init(r,1,0,!1),s=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(a,"utf-8",a.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(a.available(),l),s.close(),a.close(),t(l.value)}catch(c){throw new Error((r&&r.path||"")+": "+c)}}),t}),define("text!templates/account.mustache",[],function(){return'<ol class="step clearfix"><li class=step-item>1 身份验证</li><li class="step-item current">2 协议签署</li><li class=step-item>3 三方存管</li></ol><div class=content-block-title>选择开通账户</div><div class=content-block><div class=row><div class=col-50><input class=select-radio type=radio name=accountStock value="上海A股 深圳A股"><a href=account-list-stock.html class=select-trigger>股票账户</a></div><div class=col-50><input class=select-radio type=radio name=accountFund value><a href=account-list-fund.html class=select-trigger>基金账户</a></div></div></div><div class=content-block-title>签署协议</div><div class=list-block><ul>{{#model.protocals}}<li><a href="protocal.html?econtract_id={{id}}" class="item-link item-content protocal-link"><div class=item-inner><div class=item-title>{{name}}</div></div></a></li>{{/model.protocals}}</ul></div><div class=content-block-title><label class="label-checkbox item-content agree-block"><input type=checkbox name=agreement value=agreement><div class=item-media><i class="icon icon-form-checkbox"></i></div><div class=item-inner><div class=item-title>我已阅读并同意签署以上协议</div></div></label></div><div class=content-block><a href=# class="button button-big active account-next-button">下一步</a></div>'}),define("text!templates/protocal.mustache",[],function(){return"<div class=content-block><p>{{{model.agreementContent}}}</p></div>"}),function(e,t){if("object"==typeof exports&&exports)t(exports);else{var a={};t(a),"function"==typeof define&&define.amd?define("mustache",a):e.Mustache=a}}(this,function(e){function t(e,t){return f.call(e,t)}function a(e){return!t(h,e)}function n(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e){return String(e).replace(/[&<>"'\/]/g,function(e){return g[e]})}function s(e){if(!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function r(t,n){function o(){if(P&&!$)for(;T.length;)delete S[T.pop()];else T=[];P=!1,$=!1}n=n||e.tags,t=t||"","string"==typeof n&&(n=n.split(w));for(var r,p,u,f,h,m,v=s(n),g=new d(t),y=[],S=[],T=[],P=!1,$=!1;!g.eos();){if(r=g.pos,u=g.scanUntil(v[0]))for(var E=0,O=u.length;O>E;++E)f=u.charAt(E),a(f)?T.push(S.length):$=!0,S.push(["text",f,r,r+1]),r+=1,"\n"===f&&o();if(!g.scan(v[0]))break;if(P=!0,p=g.scan(k)||"name",g.scan(b),"="===p?(u=g.scanUntil(C),g.scan(C),g.scanUntil(v[1])):"{"===p?(u=g.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),g.scan(x),g.scanUntil(v[1]),p="&"):u=g.scanUntil(v[1]),!g.scan(v[1]))throw new Error("Unclosed tag at "+g.pos);if(h=[p,u,r,g.pos],S.push(h),"#"===p||"^"===p)y.push(h);else if("/"===p){if(m=y.pop(),!m)throw new Error('Unopened section "'+u+'" at '+r);if(m[1]!==u)throw new Error('Unclosed section "'+m[1]+'" at '+r)}else"name"===p||"{"===p||"&"===p?$=!0:"="===p&&(v=s(n=u.split(w)))}if(m=y.pop())throw new Error('Unclosed section "'+m[1]+'" at '+g.pos);return c(l(S))}function l(e){for(var t,a,n=[],i=0,o=e.length;o>i;++i)t=e[i],t&&("text"===t[0]&&a&&"text"===a[0]?(a[1]+=t[1],a[3]=t[3]):(n.push(t),a=t));return n}function c(e){for(var t,a,n=[],i=n,o=[],s=0,r=e.length;r>s;++s)switch(t=e[s],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":a=o.pop(),a[5]=t[2],i=o.length>0?o[o.length-1][4]:n;break;default:i.push(t)}return n}function d(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function u(){this.cache={}}var f=RegExp.prototype.test,h=/\S/,m=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===m.call(e)},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,w=/\s+/,C=/\s*=/,x=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(t&&0===t.index){var a=t[0];return this.tail=this.tail.substring(a.length),this.pos+=a.length,a}return""},d.prototype.scanUntil=function(e){var t,a=this.tail.search(e);switch(a){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,a),this.tail=this.tail.substring(a)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{for(var a=this;a;){if(e.indexOf(".")>0){t=a.view;for(var i=e.split("."),o=0;null!=t&&o<i.length;)t=t[i[o++]]}else t=a.view[e];if(null!=t)break;a=a.parent}this.cache[e]=t}return n(t)&&(t=t.call(this.view)),t},u.prototype.clearCache=function(){this.cache={}},u.prototype.parse=function(e,t){var a=this.cache,n=a[e];return null==n&&(n=a[e]=r(e,t)),n},u.prototype.render=function(e,t,a){var n=this.parse(e),i=t instanceof p?t:new p(t);return this.renderTokens(n,i,a,e)},u.prototype.renderTokens=function(t,a,i,o){function s(e){return d.render(e,a,i)}for(var r,l,c="",d=this,p=0,u=t.length;u>p;++p)switch(r=t[p],r[0]){case"#":if(l=a.lookup(r[1]),!l)continue;if(v(l))for(var f=0,h=l.length;h>f;++f)c+=this.renderTokens(r[4],a.push(l[f]),i,o);else if("object"==typeof l||"string"==typeof l)c+=this.renderTokens(r[4],a.push(l),i,o);else if(n(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");l=l.call(a.view,o.slice(r[3],r[5]),s),null!=l&&(c+=l)}else c+=this.renderTokens(r[4],a,i,o);break;case"^":l=a.lookup(r[1]),(!l||v(l)&&0===l.length)&&(c+=this.renderTokens(r[4],a,i,o));break;case">":if(!i)continue;l=n(i)?i(r[1]):i[r[1]],null!=l&&(c+=this.renderTokens(this.parse(l),a,i,l));break;case"&":l=a.lookup(r[1]),null!=l&&(c+=l);break;case"name":l=a.lookup(r[1]),null!=l&&(c+=e.escape(l));break;case"text":c+=r[1]}return c},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var y=new u;e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,a){return y.render(e,t,a)},e.to_html=function(t,a,i,o){var s=e.render(t,a,i);return n(o)?void o(s):s},e.escape=o,e.Scanner=d,e.Context=p,e.Writer=u}),define("views/accountView",["utils","text!templates/account.mustache","text!templates/protocal.mustache","mustache"],function(e,t,a,n){function i(a){var i=n.render(t,{model:a.model});$$("#accountContent").html(i),e.bindEvents(a.bindings),e.setButtonPosition(".account-next-button")}function o(t){var i=n.render(a,{model:t.model});$$(".popup").html(i),e.bindEvents(t.bindings)}return{render:i,renderPopup:o}}),define("controllers/accountController",["views/accountView","GS"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/account.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var n=t.model;e.render({bindings:i,model:n}),a(),khApp.hideIndicator()}}})}function a(){var e=$$('#accountContent input[type="radio"]');e.each(function(){0!==this.value.length&&(this.checked=!0,$$(this).next()[0].search="?value="+this.value)})}function n(){mainView.loadPage("password.html")}var i=[{element:".account-next-button",event:"click",handler:n}];return{init:t}}),define("controllers/accountListController",["utils","GS"],function(e){function t(t){e.bindEvents(r);var a=decodeURI(t.value);console.log(a),$$('#accountList input[type="checkbox"]').each(function(){-1!==a.indexOf(this.value)&&(this.checked=!0)})}function a(){var e,t,a,n=$$('#accountList input[type="checkbox"]'),i=[];n.each(function(){e=$$('#accountContent input[name="'+this.name+'"]'),this.checked=!0,i.push(this.value),t=i.join(" "),e.val(t),e[0].checked=0===t.length?!1:!0,a=e.next()[0],s(a,t)})}function n(e,t,a){var n,r,l=$$('#accountContent input[name="'+e+'"]');l.each(function(){"add"===a?i(this,t):"remove"===a&&o(this,t),r=this.value,this.checked=0===r.length?!1:!0,n=$$(this).next()[0],s(n,r)})}function i(e,t){if("undefined"!=typeof e.value)if(0===e.value.length)$$(e).val(t);else{var a=e.value.split(" ");-1===a.indexOf(t)&&a.push(t),$$(e).val(a.join(" "))}}function o(e,t){var a=e.value.split(" ");if(-1!==a.indexOf(t))if(1===a.length)$$(e).val("");else{var n=[];a.map(function(e){e!==t&&n.push(e)}),$$(e).val(n.join(" "))}}function s(e,t){var a="?value=";e.search=a+t}var r=[{element:".select-all",event:"click",handler:a},{element:'#accountList input[type="checkbox"]',event:"change",handler:function(){var e=this.checked?"add":"remove";n(this.name,this.value,e)}}];return{init:t}}),define("views/appointView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}return{render:t}}),define("controllers/appointController",["views/appointView","GS"],function(e,t){function a(){e.render({bindings:i})}function n(){var e=khApp.formToJSON("#appointContent");console.log(e),mainView.loadPage(t.startPage)}var i=[{element:"#logout",event:"click",handler:t.logout},{element:".appoint-done-button",event:"click",handler:n}];return{init:a}}),define("text!templates/audit.mustache",[],function(){return'<div class=info><i class="iconfont icon-success"></i>开户成功</div><div class=content-block-title>我们将尽快完成申请资料的审核，审核后您将收到手机短信提示，请保持手机畅通。</div><div class=list-block><ul>{{#model.accountInfo}}<li class=item-content><div class=item-inner><div class=item-title>{{key}}</div><div class=item-after>{{val}}</div></div></li>{{/model.accountInfo}}</ul></div>'}),define("views/auditView",["utils","text!templates/audit.mustache","mustache"],function(e,t,a){function n(n){var i=a.render(t,{model:n.model});$$("#auditContent").append(i),e.bindEvents(n.bindings)}return{render:n}}),define("controllers/auditController",["views/auditView","GS"],function(e,t){function a(){khApp.showIndicator(),$$.ajax({url:"api/audit.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.model;e.render({bindings:n,model:a}),khApp.hideIndicator()}}})}var n=[{element:"#logout",event:"click",handler:t.logout}];return{init:a}}),define("text!templates/cert_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class=navbar><div class=navbar-inner><div class="center sliding">安装证书</div></div></div><div class=page><div class=page-content>{{#model.success}}<div class="info-content vertical-align"><div class=info><i class="iconfont icon-success"></i>{{model.successText}}</div></div><div class=content-block><a href=# class="button button-big active fixed-bottom cert-download-button">完成</a></div>{{/model.success}} {{#model.fail}}<div class="info-content vertical-align"><div class=info><i class="iconfont icon-fail"></i>{{model.failText}}</div></div><div class=content-block><a href=# class="button button-big active fixed-bottom cert-retry-button">重新下载</a></div>{{/model.fail}}</div></div></div>'}),define("views/certView",["utils","text!templates/cert_popup.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$(".popup").html(i),e.bindEvents(n.bindings)}function o(e){$$(".section").hide(),$$("#"+e).show(),khApp.closeModal()}function s(){o("download"),$$(".step").hide()}function r(){o("auditBefore"),$$(".step").show()}function l(){o("auditAfter"),$$(".step").show()}return{render:n,renderPopup:i,showDownloading:s,showAuditBefore:r,showAuditAfter:l}}),define("controllers/certController",["views/certView","GS"],function(e,t){function a(){e.render({bindings:o}),setTimeout(e.showAuditAfter,1500)}function n(){e.showDownloading(),setTimeout(function(){var t=$$.ajax({url:"api/cert.json",type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:s}),khApp.popup(".popup"))}});t.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t),$$("progress").val(t)}}},1500)}function i(){e.showAuditAfter(),khApp.closeModal(),mainView.loadPage("account.html")}var o=[{element:"#logout",event:"click",handler:t.logout},{element:".cert-request-button",event:"click",handler:n}],s=[{element:".cert-download-button",event:"click",handler:i},{element:".cert-retry-button",event:"click",handler:n}];return{init:a}}),define("text!templates/collect.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item current">1 身份验证</li><li class=step-item>2 协议签署</li><li class=step-item>3 三方存管</li></ol><div class=upload-block><div class=upload-content id=cardFront><i class="iconfont icon-cardfront"></i><div class=title>上传身份证正面</div><input type=file id=uploadFront accept=image/* capture=camera></div><div class=upload-content id=cardBack><i class="iconfont icon-cardback"></i><div class=title>上传身份证反面</div><input type=file id=uploadBack accept=image/* capture=camera></div>{{#model.facePic}}<div class=upload-content id=face><i class="iconfont icon-user"></i><div class=title>大头照</div><input type=file id=uploadFace accept=image/* capture=camera></div>{{/model.facePic}}</div><div class=content-block-title><label class="label-checkbox item-content agree-block"><input type=checkbox name=agreement value=agreement><div class=item-media><i class="icon icon-form-checkbox"></i></div><div class=item-inner><div class=item-title>我已阅读并同意签署<a id=protocalLink href="protocal.html?econtract_id={{model.econtractId}}">《个人数字证书申请责任书》</a></div></div></label></div><div class=content-block><a href=# class="button button-big active collect-next-button">下一步</a></div>'
}),define("views/collectView",["utils","text!templates/collect.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$("#collectContent").html(i),e.bindEvents(n.bindings)}function o(e){$$("#cardFront").html("<img src="+e+' alt="" height="160">')}function s(e){$$("#cardBack").html("<img src="+e+' alt="" height="160">')}function r(e){$$("#face").html("<img src="+e+' alt="" height="160">')}return{init:n,render:i,showPhotoFront:o,showPhotoBack:s,showPhotoFace:r}}),define("controllers/collectController",["views/collectView","GS"],function(e,t){function a(){e.init({bindings:s}),$$.ajax({url:"api/collect.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo?e.render({model:t.model,bindings:r}):khApp.alert(t.errorInfo)}})}function n(){}function i(){}function o(){mainView.loadPage("profile.html")}var s=[{element:"#logout",event:"click",handler:t.logout}],r=[{element:".collect-next-button",event:"click",handler:o},{element:"#cardFront",event:"click",handler:n},{element:"#cardBack",event:"click",handler:i}];return{init:a}}),define("text!templates/department.mustache",[],function(){return'{{#model.departmentsNearby}} <a href=# class="item-link smart-select" id=nearbySelect data-page-title=附近营业部><select name=nearby>{{#model.departmentsNearby}}<option value={{value}}>{{department}}</option>{{/model.departmentsNearby}}</select></a> {{/model.departmentsNearby}} {{#model.departmentsAll}} <a href=# class="item-link smart-select" id=allSelect data-page-title=选择营业部 data-searchbar=true data-searchbar-placeholder=营业部名称 data-searchbar-cancel=取消><select name=all>{{#model.departmentsAll}}<optgroup label={{group}}>{{#departments}}<option value={{value}}>{{department}}</option>{{/departments}}</optgroup>{{/model.departmentsAll}}</select></a> {{/model.departmentsAll}}'}),define("views/departmentView",["utils","text!templates/department.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings),e.setButtonPosition(".department-next-button")}function i(n){var i=a.render(t,{model:n.model});$$("#departmentContent").append(i),e.bindEvents(n.bindings),r()}function o(e){$$(".department-name").find("h2").text(e)}function s(){$$(".department-badge").html("您选择的是")}function r(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{render:n,renderName:o,renderBadge:s,renderSelect:i}}),define("controllers/departmentController",["views/departmentView","GS"],function(e){function t(){e.render({bindings:d}),a()}function a(){khApp.showIndicator(),$$.ajax({url:"api/department.json",type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderName(t.model.recDepartment),khApp.hideIndicator())}})}function n(){o("nearbySelect","api/department_near.json")}function i(){o("allSelect","api/department_all.json")}function o(e,t){var a=$$("#"+e)[0];a?r(e):s(e,t)}function s(t,a){var n=t;khApp.showIndicator(),$$.ajax({url:a,type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderSelect({bindings:p,model:t.model}),khApp.hideIndicator(),r(n))}})}function r(e){khApp.smartSelectOpen("#"+e)}function l(){var t=this.options[this.selectedIndex].text;e.renderName(t),e.renderBadge()}function c(){mainView.loadPage("collect.html")}var d=[{element:".department-next-button",event:"click",handler:c},{element:".nearby-link",event:"click",handler:n},{element:".all-link",event:"click",handler:i}],p=[{element:"[name=nearby]",event:"change",handler:l},{element:"[name=all]",event:"change",handler:l}];return{init:t}}),define("controllers/departmentsController",["views/departmentView","GS"],function(e){function t(t){e.render({bindings:d}),t.depsname?(e.renderName(t.depsname),e.renderBadge()):a()}function a(){khApp.showIndicator(),$$.ajax({url:"api/department.json",type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderName(t.model.recDepartment),khApp.hideIndicator())}})}function n(){o("nearbySelect","api/department_near.json")}function i(){mainView.loadPage("select/prov.html")}function o(e,t){var a=$$("#"+e)[0];a?r(e):s(e,t)}function s(t,a){var n=t;khApp.showIndicator(),$$.ajax({url:a,type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderSelect({bindings:p,model:t.model}),khApp.hideIndicator(),r(n))}})}function r(e){khApp.smartSelectOpen("#"+e)}function l(){var t=this.options[this.selectedIndex].text;e.renderName(t),e.renderBadge()}function c(){mainView.loadPage("collect.html")}var d=[{element:".department-next-button",event:"click",handler:c},{element:".nearby-link",event:"click",handler:n},{element:".all-link",event:"click",handler:i}],p=[{element:"[name=nearby]",event:"change",handler:l},{element:"[name=all]",event:"change",handler:l}];return{init:t}}),define("text!templates/depository.mustache",[],function(){return'<ol class="step clearfix"><li class=step-item>1 身份验证</li><li class=step-item>2 协议签署</li><li class="step-item current">3 三方存管</li></ol><div class=content-block-title>开通三方存管后，您的资金可以在银行卡与交易账户中自由调度</div><div class=list-block><ul><li><a href=# class="item-link smart-select"><select name=bank id=bank>{{#model.banks}}<option value={{code}} data-type={{type}} data-protocal-id={{protocalId}}>{{name}}</option>{{/model.banks}}</select><div class=item-content><div class=item-inner><div class=item-title>请选择银行</div><div class=item-after></div></div></div></a></li></ul></div><div class=list-block id=inputGroup style="display: none;"><ul><li class=cardno-input><div class=item-content><div class=item-inner><div class="item-title label">卡号</div><div class=item-input><input type=text name=cardNo placeholder=请输入银行卡卡号></div></div></div></li><li class=cardpsw-input><div class=item-content><div class=item-inner><div class="item-title label">密码</div><div class=item-input><input type=text name=cardPSW placeholder=请输入银行卡密码></div></div></div></li><li class=cardpsw-input><div class=item-content><div class=item-inner><div class="item-title label">重复</div><div class=item-input><input type=text name=cardPSWrepeat placeholder=请再次输入银行卡卡号></div></div></div></li></ul></div><div class="content-block-title agree-block" id=agreeProtocal style="display: none;"><label class="label-checkbox item-content agree-block"><input type=checkbox name=agreement value=agreement><div class=item-media><i class="icon icon-form-checkbox"></i></div><div class=item-inner><div class=item-title>我已阅读并同意签署<a id=protocalLink href=protocal.html>《<span id=bankName></span>三方协议》</a></div></div></label></div><div class=content-block><a href=# class="button button-big active depository-next-button">开通三方存管</a></div>'}),define("views/depositoryView",["utils","text!templates/depository.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$("#depositoryContent").html(i),e.bindEvents(n.bindings),o()}function o(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}function s(){$$("#inputGroup").hide(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex")}function r(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().addClass("bare"),$$(".cardpsw-input").hide()}function l(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().removeClass("bare"),$$(".cardpsw-input").show()}function c(e,t){var a=document.querySelector("#protocalLink");d(a,t),$$("#bankName").text(e)}function d(e,t){e.search="?econtract_id="+t}return{init:n,render:i,noNeedInput:s,onlyCardNoInput:r,bothCardNoPswInput:l,syncProtocal:c}}),define("controllers/depositoryController",["views/depositoryView","GS"],function(e,t){function a(){e.init({bindings:o}),khApp.showIndicator(),$$.ajax({url:"api/depository.json",type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&e.render({model:t.model,bindings:s}),khApp.hideIndicator()}})}function n(){var t=this.options[this.selectedIndex],a=$$(t).data("type"),n=t.text,i=$$(t).data("protocal-id");switch(console.log(a),a){case"00":e.noNeedInput();break;case"01":e.onlyCardNoInput();break;case"11":e.bothCardNoPswInput()}e.syncProtocal(n,i)}function i(){mainView.loadPage("risk.html")}var o=[{element:"#logout",event:"click",handler:t.logout}],s=[{element:"#bank",event:"change",handler:n},{element:".depository-next-button",event:"click",handler:i}];return{init:a}}),define("text!templates/guide.mustache",[],function(){return"{{#model.openTypes}} <a class={{name}} data-type={{type}} href=#>{{explain}}</a> {{/model.openTypes}}"}),define("views/guideView",["utils","services/openTypeService","text!templates/guide.mustache","mustache"],function(e,t,a,n){function i(t){var i=n.render(a,{model:o});$$(".entrance").html(i),e.bindEvents(t.bindings)}var o={openTypes:t.getCurrentTypeData()};return{render:i}}),define("controllers/guideController",["views/guideView"],function(e){function t(){e.render({bindings:i}),a()}function a(){var e=document.documentElement.clientHeight,t=e-120,a=$$(".entrance a").length;$$(".entrance a").css("height",t/a+"px")}function n(){var e=$$(this).data("type");mainView.loadPage("login.html?type="+e)}var i=[{element:".entrance a",event:"click",handler:n}];return{init:t}}),define("views/loginView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}function a(){$$(".login-getcode").html("重新获取验证码"),$$(".login-getcode").removeClass("disabled")}function n(e){$$(".login-getcode").html(e+"秒后重新获取")}function i(){$$(".mobile").blur(),$$(".password").blur()}function o(e,t){$$(".sliding").html(e),$$(".desc").html(t)}return{init:t,resetBtn:a,reRenderBtn:n,inputBlur:i,changeType:o}}),define("controllers/loginController",["views/loginView","GS","services/openTypeService"],function(e,t,a){function n(t){var a=t.type;i(a),e.init({bindings:u})}function i(t){var n=a.getTypeData(t);e.changeType(n.title,n.explain)}function o(e){var t=/^[1][34578]\d{9}$/;return t.test(e)}function s(e){var t=/^\d{4}$/;return t.test(e)}function r(){f&&clearTimeout(f),e.resetBtn()}function l(){var e=$$(".mobile").val();o(e)?c.call(this,e):khApp.alert("手机号码为空或有误，请重新输入")}function c(e){var t=this,a=60,n=0;$$.ajax({url:"api/verify.json",type:"POST",data:{mphone:e},success:function(e){e=JSON.parse(e),0===e.errorNo?($$(t).hasClass("disabled")||$$(t).addClass("disabled"),d(a,n)):(khApp.alert(e.errorInfo),r())},error:function(){khApp.alert("服务器出错"),r()},timeout:function(){khApp.alert("服务器无响应"),r()}})}function d(t,a){var n;f&&clearTimeout(f),a++,n=t-a,e.reRenderBtn(n),n>0?f=setTimeout(function(){d(t,a)},1e3):e.resetBtn()}function p(){var a=$$(".mobile").val(),n=$$(".password").val();o(a)?f?s(n)?(khApp.showIndicator(),$$.ajax({url:"api/login.json",type:"POST",data:{mobile:a,validateCode:n},success:function(a){a=JSON.parse(a),0===a.errorNo?(e.inputBlur(),t.setCurrentUser(a.sid,a.user),mainView.loadPage("department.html"),khApp.hideIndicator()):(khApp.hideIndicator(),khApp.alert(a.errorInfo)),r()}})):khApp.alert("输入4位数字验证码"):khApp.alert("您还没有获取验证码，请先获取验证码"):khApp.alert("手机号码为空或有误，请重新输入")}var u=[{element:".login-submit",event:"click",handler:p},{element:".login-getcode",event:"click",handler:l}],f=null;return{init:n}}),define("views/passwordView",["utils"],function(e){function t(t){e.bindEvents(t.bindings),a()}function a(){e.setButtonPosition(".password-next-button")}function n(e){"hide"===e?$$("#sync").hide():"show"===e&&$$("#sync").show(),a()}return{render:t,toggleInputs:n}}),define("controllers/passwordController",["views/passwordView","GS"],function(e,t){function a(){e.render({bindings:s})}function n(){setTimeout(i,100)}function i(){var t=document.querySelector("#checkSync");e.toggleInputs(t.checked?"hide":"show")}function o(){mainView.loadPage("depository.html")}var s=[{element:"#logout",event:"click",handler:t.logout},{element:".password-next-button",event:"click",handler:o},{element:"#toggleSwitch",event:"click",handler:n}];return{init:a}}),define("text!templates/profile.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item current">1 身份验证</li><li class=step-item>2 协议签署</li><li class=step-item>3 三方存管</li></ol><div class=list-block><ul><li><div class=item-content><div class=item-inner><div class="item-title label">姓名</div><div class=item-input><input type=text name=name placeholder=您的姓名 value={{model.name}}></div></div></div></li><li><div class=item-content><div class=item-inner><div class="item-title label">身份证号</div><div class=item-input><input type=text name=cid placeholder=您的18位二代身份证号 value={{model.cid}}></div></div></div></li><li><div class=item-content><div class=item-inner><div class="item-title label">身份证住址</div><div class=item-input><textarea name=cidAddr placeholder=您的身份证住址>{{model.cidAddr}}</textarea></div></div></div></li><li><div class=item-content><div class=item-inner><div class="item-title label">联系地址</div><div class=item-input><textarea name=address placeholder=您的联系地址>{{model.address}}</textarea></div></div></div></li><li><div class=item-content><div class=item-inner><div class="item-title label">邮编</div><div class=item-input><input type=tel name=postCode maxlength=6 placeholder=联系地址的邮编 value={{model.postCode}}></div></div></div></li><li><a href=# class="item-link smart-select" data-page-title=选择职业><select name=career>{{#model.careers}}<option value={{value}}>{{career}}</option>{{/model.careers}}</select><div class=item-content><div class=item-inner><div class=item-title>职业</div><div class=item-after>请选择</div></div></div></a></li><li><a href=# class="item-link smart-select" data-page-title=选择行业><select name=industry>{{#model.industries}}<option value={{value}}>{{industry}}</option>{{/model.industries}}</select><div class=item-content><div class=item-inner><div class=item-title>行业</div><div class=item-after>请选择</div></div></div></a></li><li><a href=# class="item-link smart-select" data-page-title=选择学历><select name=industry>{{#model.educations}}<option value={{value}}>{{education}}</option>{{/model.educations}}</select><div class=item-content><div class=item-inner><div class=item-title>学历</div><div class=item-after>请选择</div></div></div></a></li></ul></div><div class=content-block><a href=# class="button button-big active profile-next-button">下一步</a></div>'}),define("views/profileView",["utils","text!templates/profile.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$("#profileContent").append(i),e.bindEvents(n.bindings),o()}function o(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{init:n,render:i}}),define("controllers/profileController",["views/profileView","GS"],function(e,t){function a(){khApp.showIndicator(),$$.ajax({url:"api/profile.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.model;e.render({bindings:i,model:a}),khApp.hideIndicator()}}})}function n(){mainView.loadPage("video.html")}var i=[{element:"#logout",event:"click",handler:t.logout},{element:".profile-next-button",event:"click",handler:n}];return{init:a}}),define("views/protocalView",["text!templates/protocal.mustache","mustache"],function(e,t){function a(a){var n=t.render(e,{model:a.model});$$("#protocalContent").append(n)}return{render:a}}),define("controllers/protocalController",["views/protocalView","GS"],function(e){function t(e){console.log(e),a(e)}function a(t){khApp.showIndicator();$$.ajax({url:"api/protocal.json",type:"POST",data:t,success:function(t){t=JSON.parse(t),0===t.errorNo&&e.render({model:t.model}),khApp.hideIndicator()}})}return{init:t}}),define("text!templates/review.mustache",[],function(){return'{{#model.questions}}<div class=content-block-title>{{index}}.{{topic}}</div><div class=content-block><div class=row>{{#options}}<div class=col-50><input class="select-radio {{#checked}}default{{/checked}}" type=radio name={{groupId}} value={{value}} data-warn={{warn}} {{#checked}}checked=checked {{ checked}}><div class=select-trigger {{^checked}}onclick="khApp.alert(\'{{tip}}\');" {{ checked}}>{{option}}</div></div>{{/options}}</div></div>{{/model.questions}}<div class=content-block><a href=# class="button button-big active review-next-button">提交</a></div>'}),define("views/reviewView",["utils","text!templates/review.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$("#reviewContent").append(i),e.bindEvents(n.bindings)}return{init:n,render:i}}),define("controllers/reviewController",["views/reviewView","GS"],function(e,t){function a(){e.init({bindings:s}),khApp.showIndicator(),$$.ajax({url:"api/review.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.model;e.render({model:a,bindings:r}),khApp.hideIndicator()}}})}function n(){var e=o();if(e.length>0)return void khApp.alert(e[0].warn);var t,a=khApp.formToJSON("#reviewContent"),n=[];for(var i in a){var s=i+"&"+a[i];n.push(s)}t=n.join("|"),mainView.loadPage("audit.html")}function i(){{var e=$$(this).parent().find("input[type=radio]");e[0].value}e[0].checked=!0}function o(){var e=[];return $$(".default").each(function(t){if(!this.checked){var a=$$(this).data("warn");e.push({index:t+1,warn:a})}}),e}var s=[{element:"#logout",event:"click",handler:t.logout}],r=[{element:".review-next-button",event:"click",handler:n},{element:".select-trigger",event:"click",handler:i}];return{init:a}}),define("text!templates/risk.mustache",[],function(){return'<form id=riskForm>{{#model.questions}}<div class=content-block-title id=topic_{{index}}>{{index}}.{{topic}} {{#multi}} <small>（多选）</small></div><div class="list-block topic-options"><ul>{{#options}}<li><label class="label-radio item-content topic-option" data-index=multi><div class=item-media></div><input type=checkbox name={{question_no}} value={{value}}><div class=item-inner>{{option}}</div></label></li>{{/options}} {{/multi}} {{^multi}} <small>（单选）</small></ul></div><div class="list-block topic-options"><ul>{{#options}}<li><label class="label-radio item-content topic-option" data-index={{index}}><div class=item-media></div><input type=radio name={{question_no}} value={{value}}><div class=item-inner>{{option}}</div></label></li>{{/options}} {{/multi}}</ul></div>{{/model.questions}}</form><div class=content-block><a href=# class="button button-big active risk-submit-button">提交</a></div>'}),define("text!templates/risk_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class=navbar><div class=navbar-inner><div class="center sliding">风险测评结果</div></div></div><div class=page><div class=page-content><div class="info-content vertical-align"><div class=info><div class=score>{{model.riskScore}}分</div><div class=level>{{model.riskLevel}}</div></div></div><div class=content-block><a href=# class="button button-big active fixed-bottom risk-next-button">下一步</a></div></div></div></div>'}),define("views/riskView",["utils","text!templates/risk.mustache","text!templates/risk_popup.mustache","mustache"],function(e,t,a,n){function i(a){var i=n.render(t,{model:a.model});$$("#riskContent").append(i),e.bindEvents(a.bindings)}function o(t){var i=n.render(a,{model:t.model});$$(".popup").html(i),e.bindEvents(t.bindings)}return{render:i,renderPopup:o}}),define("controllers/riskController",["views/riskView","GS"],function(e,t){function a(){khApp.showIndicator(),$$.ajax({url:"api/risk.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.model;e.render({bindings:c,model:a}),khApp.hideIndicator()}}})}function n(e){var t=$$("#topic_"+e),a=t[0].offsetTop,n=parseInt(t.css("margin-top"),10)+p;$$("#riskContent").scrollTop(a-n,200)}function i(){var e=$$(this).data("index");if("multi"!==e){var t=+e+1;setTimeout(function(e){return function(){var a=$$(e).find("input:checked");a.length>0&&n(t)}}(this),200)}}function o(){var e=[];return $$(".topic-options").each(function(t){var a=$$(this).find("input:checked");0===a.length&&e.push(t+1)}),e}function s(){var e,t=khApp.formToJSON("#riskForm"),a=[];for(var n in t){var i;i=t[n]instanceof Array?n+"&"+t[n].join("^"):n+"&"+t[n],a.push(i)}return e=a.join("|")}function r(){var t=o();if(t.length>0)return void khApp.alert("第"+t[0]+"道题没完成",function(){n(t[0])});var a=s();khApp.showIndicator(),$$.ajax({url:"api/risk_result.json",type:"POST",data:{answers:a},success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:d}),khApp.popup(".popup")),khApp.hideIndicator()}})}function l(){khApp.closeModal(),mainView.loadPage("review.html")}var c=[{element:"#logout",event:"click",handler:t.logout},{element:".risk-submit-button",event:"click",handler:r},{element:".topic-option",event:"click",handler:i}],d=[{element:".risk-next-button",event:"click",handler:l}],p=$$(".navbar").outerHeight();return{init:a}}),define("text!templates/video_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class=navbar><div class=navbar-inner><div class="center sliding">视频验证</div></div></div><div class=page><div class=page-content>{{#model.success}}<div class="info-content vertical-align"><div class=info><i class="iconfont icon-success"></i>{{model.successText}}</div></div><div class=content-block><a href=# class="button button-big active fixed-bottom video-next-button">下一步</a></div>{{/model.success}} {{#model.fail}}<div class="info-content vertical-align"><div class=info><i class="iconfont icon-fail"></i>{{model.failText}}</div></div><div class=content-block><a href=# class="button button-big active fixed-bottom video-retry-button">重新验证</a></div>{{/model.fail}}</div></div></div>'}),define("views/videoView",["utils","text!templates/video_popup.mustache","mustache"],function(e,t,a){function n(t){e.bindEvents(t.bindings)}function i(n){var i=a.render(t,{model:n.model});$$(".popup").html(i),e.bindEvents(n.bindings)}function o(){$$("#readyLeft").show(),$$("#waitLeft").hide(),$$(".video-content").hide(),$$("#videoReady").show()}function s(e){$$("#readyLeft").hide(),$$("#waitLeft").show(),$$(".video-content").hide(),$$("#videoWait").show(),e&&$$(".wait-num").html(e)}function r(e){"hide"===e?$$(".dialog").hide():"show"===e&&$$(".dialog").show()}return{render:n,renderPopup:i,showWait:s,showReady:o,toggleDialog:r}}),define("controllers/videoController",["views/videoView","GS"],function(e){function t(){e.render({bindings:p})}function a(){e.showWait(),i()}function n(){if(h){if(f>=3)return e.toggleDialog("show"),void clearTimeout(d);$$.ajax({url:"api/video.json",type:"POST",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.videoStatus;1===a||0===a&&(e.showWait(t.waitNum),h=!0,f++)}else khApp.alert(t.errorInfo),f++},error:function(){f++}}),d=setTimeout(n,1500),window.videoQueryTimer=d}}function i(){e.toggleDialog("hide"),f=0,n()}function o(){e.showReady(),clearTimeout(d)}function s(){e.showReady(),khApp.closeModal()}function r(){mainView.loadPage("cert.html"),khApp.closeModal()}function l(){clearTimeout(d),khApp.showIndicator(),$$.ajax({url:"api/video_success.json",type:"POST",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:u}),khApp.popup(".popup")),khApp.hideIndicator()}})}function c(){clearTimeout(d),khApp.showIndicator(),$$.ajax({url:"api/video_fail.json",type:"POST",success:function(t){t=JSON.parse(t),1===t.errorNo&&(e.renderPopup({model:t.model,bindings:u}),khApp.popup(".popup")),khApp.hideIndicator()}})}var d,p=[{element:".video-start-button",event:"click",handler:a},{element:".video-wait-button",event:"click",handler:i},{element:".video-success-button",event:"click",handler:l},{element:".video-fail-button",event:"click",handler:c},{element:"#waitLeft",event:"click",handler:o}],u=[{element:".video-next-button",event:"click",handler:r},{element:".video-retry-button",event:"click",handler:s}],f=0,h=!0;return{init:t}}),define("text!templates/select.mustache",[],function(){return'<ul>{{#selectable}} {{#itemList}}<li><label class="label-radio item-content"><input type=radio name=deps value><div class=item-inner><div class=item-title>{{item}}</div></div></label></li>{{/itemList}} {{/selectable}} {{^selectable}} {{#itemList}}<li><a href=# class="item-link item-content"><div class=item-inner><div class=item-title>{{item}}</div></div></a></li>{{/itemList}} {{/selectable}}</ul>'}),define("views/provView",["utils","text!templates/select.mustache","mustache"],function(e,t,a){function n(n){var i=a.render(t,{itemList:n.model});$$("#provList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("models/depsModel",[],function(){function e(e){r.push(e)}function t(){var e=a();return e.length>0}function a(){return r}function n(){for(var e=[],t=r[0].provList,a=0;a<t.length;a++)e.push(t[a].prov);return s(e)}function i(e){for(var t,a=[],n=r[0].provList,i=0;i<n.length;i++)if(n[i].prov===e){t=n[i].cityList;break}for(var o=0;o<t.length;o++)a.push(t[o].city);return s(a)}function o(e){for(var t,a=[],n=r[0].provList,i=0;i<n.length;i++)for(var o=0,l=n[i].cityList.length;l>o;o++)n[i].cityList[o].city===e&&(t=n[i].cityList[o].depsList);for(var c=0;c<t.length;c++)a.push(t[c].deps);return s(a)}function s(e){if(e instanceof Array){for(var t=[],a=0,n=e.length;n>a;a++)t.push({item:e[a]});return t}return""}var r=[];return{save:e,saved:t,fetchProv:n,fetchCity:i,fetchDeps:o}}),define("controllers/provController",["views/provView","models/depsModel"],function(e,t){function a(){var a,n=t.saved();n?(khApp.alert("数据已获取！"),a=t.fetchProv(),e.render({model:a,bindings:i})):(khApp.showIndicator(),$$.ajax({url:"api/department_alls.json",type:"GET",success:function(n){n=JSON.parse(n),0===n.errorNo&&(t.save(n.model),khApp.hideIndicator(),a=t.fetchProv(),e.render({model:a,bindings:i}))}}))}function n(){var e=$$(this).find(".item-title").html();mainView.loadPage("select/city.html?prov="+e)}var i=[{element:"#provList .item-link",event:"click",handler:n}];return{init:a}}),define("views/cityView",["utils","text!templates/select.mustache","mustache"],function(e,t,a){function n(n){var i=a.render(t,{itemList:n.model});$$("#cityList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("controllers/cityController",["views/cityView","models/depsModel"],function(e,t){function a(a){var n=t.fetchCity(a.prov);e.render({model:n,bindings:i})}function n(){var e=$$(this).find(".item-title").html();mainView.loadPage("select/deps.html?city="+e)}var i=[{element:"#cityList .item-link",event:"click",handler:n}];return{init:a}}),define("views/depsView",["utils","text!templates/select.mustache","mustache"],function(e,t,a){function n(n){var i=a.render(t,{itemList:n.model,selectable:!0});$$("#depsList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("controllers/depsController",["views/depsView","models/depsModel"],function(e,t){function a(a){var n=t.fetchDeps(a.city);e.render({model:n,bindings:o})}function n(){var e=$$(".deps-select-button"),t=e.hasClass("disabled");if(t){var a=$$(this).find("input")[0];setTimeout(function(){a.checked&&e.removeClass("disabled")},200)}}function i(){var e=$$("#depsList").find("input:checked"),t=e.parent(),a=t.find(".item-title").html();mainView.loadPage("department.html?depsname="+a,!1)}var o=[{element:"#depsList .label-radio",event:"click",handler:n},{element:".deps-select-button",event:"click",handler:i}];return{init:a}});