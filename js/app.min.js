(function(){window.Framework7=function(e){function s(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});n["onPage"+t]=function(t,r){return n.onPage(e,t,r)}}function a(e,r,i){r=t(r);var s=r.find(e);return s.length>1&&(typeof i.selector=="string"&&(s=r.find(i.selector+" "+e)),s.length>1&&(s=r.find("."+n.params.viewMainClass+" "+e))),s.length===1?s:undefined}function f(e,t,n,r){n==="to-left"&&(e.removeClass("page-on-center").addClass("page-from-center-to-left"),t.addClass("page-from-right-to-center")),n==="to-right"&&(e.removeClass("page-on-left").addClass("page-from-left-to-center"),t.removeClass("page-on-center").addClass("page-from-center-to-right"))}function l(e,r,i,s){i==="to-left"&&(r.removeClass("navbar-on-right").addClass("navbar-from-right-to-center"),r.find(".sliding").each(function(){var e=t(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass("navbar-on-center").addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e=t(this);n.params.animateNavBackIcon&&(e.hasClass("center")&&r.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=r.find(".sliding.left .back span")[0].offsetLeft),e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarLeftOffset+"px,0,0)")),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),i==="to-right"&&(e.removeClass("navbar-on-left").addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=t(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),r.removeClass("navbar-on-center").addClass("navbar-from-center-to-right"),r.find(".sliding").each(function(){var e=t(this);n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))}function c(e,r,i,s){function E(){n.allowPageChange=!0,c.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),h.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),y&&(m.removeClass("navbar-from-right-to-center navbar-on-right").addClass("navbar-on-center"),v.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),n.pageAnimCallbacks("after",e,{pageContainer:c[0],url:r,position:"right",oldPage:h,newPage:c}),n.params.pushState&&n.pushStateClearQueue()}var o=t(e.container),u=t(e.pagesContainer),c,h,p,d,v,m,g,y;typeof s=="undefined"&&(s=e.params.animatePages),n.pluginHook("loadPage",e,r,i),n._tempDomElement.innerHTML="";if(r||typeof i=="string")n._tempDomElement.innerHTML=i;else if("length"in i&&i.length>1)for(var b=0;b<i.length;b++)t(n._tempDomElement).append(i[b]);else t(n._tempDomElement).append(i);c=a(".page",n._tempDomElement,e);if(!c){n.allowPageChange=!0;return}c.addClass("page-on-right"),p=u.children(".page:not(.cached)");if(p.length>1){for(d=0;d<p.length-2;d++)e.params.domCache?t(p[d]).addClass("cached"):(n.pageRemoveCallback(e,p[d],"left"),t(p[d]).remove());e.params.domCache?t(p[d]).addClass("cached"):(n.pageRemoveCallback(e,p[d],"left"),t(p[d]).remove())}h=u.children(".page:not(.cached)");if(e.params.dynamicNavbar){y=!0,m=a(".navbar-inner",n._tempDomElement,e),m||(y=!1),g=o.find(".navbar"),v=g.find(".navbar-inner:not(.cached)");if(v.length>0){for(d=0;d<v.length-1;d++)e.params.domCache?t(v[d]).addClass("cached"):t(v[d]).remove();!m&&v.length===1&&(e.params.domCache?t(v[0]).addClass("cached"):t(v[0]).remove()),v=g.find(".navbar-inner:not(.cached)")}}y&&(m.addClass("navbar-on-right"),g.append(m[0]),n.navbarInitCallback(e,c[0],g[0],m[0],r,"right")),r||(r="#content-"+e.history.length,e.params.domCache||(e.history.length===1&&(e.contentCache[e.history[0]]={nav:v,page:h}),e.contentCache[r]={nav:m,page:c})),e.url=r,e.history.push(r),u.append(c[0]),n.pageInitCallback(e,c[0],r,"right"),y&&s&&m.find(".sliding").each(function(){var e=t(this);e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarRightOffset+"px,0,0)")});var w=c[0].clientLeft;n.pageAnimCallbacks("before",e,{pageContainer:c[0],url:r,position:"left",oldPage:h,newPage:c}),s?(f(h,c,"to-left",e),y&&setTimeout(function(){l(v,m,"to-left",e)},0),c.animationEnd(function(e){E()})):E()}function h(e,t,r){n.pluginHook("preprocess",e,t,r),e=n.pluginProcess("preprocess",e),n.params.preprocess?(e=n.params.preprocess(e,t,r),typeof e!="undefined"&&r(e)):r(e)}function d(){var e=this,n=e.scrollTop,r=e.scrollHeight,i=e.offsetHeight,s=e.getAttribute("data-distance");s||(s=50),typeof s=="string"&&s.indexOf("%")>=0&&(s=parseInt(s,10)/100*i),s>i&&(s=i),n+i>=r-s&&t(e).trigger("infinite")}function v(){n.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var n=this;n.version="0.9.4",n.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,pushState:!1,pushStateRoot:undefined,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageBoxShadow:!0,ajaxLinks:undefined,externalLinks:["external"],sortable:!0,swipeout:!0,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back-blue"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,swipePanel:!1,swipePanelActiveArea:0,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,panelsVisibleZIndex:6e3,modalTemplate:'<div class="modal {{noButtons}}"><div class="modal-inner">{{if title}}<div class="modal-title">{{title}}</div>{{/if title}}<div class="modal-text">{{text}}</div>{{afterText}}</div><div class="modal-buttons">{{buttons}}</div></div>',modalActionsTemplate:'<div class="actions-modal">{{buttons}}</div>',modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",init:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0};for(var r in e)n.params[r]=e[r];n.$=t,n.touchEvents={start:n.support.touch?"touchstart":"mousedown",move:n.support.touch?"touchmove":"mousemove",end:n.support.touch?"touchend":"mouseup"},n.ls=localStorage,n.rtl=t("body").css("direction")==="rtl",n.rtl&&t("html").attr("dir","rtl"),typeof n.params.statusbarOverlay!="undefined"&&(n.params.statusbarOverlay?t("html").addClass("with-statusbar-overlay"):t("html").removeClass("with-statusbar-overlay")),n.views=[];var i=function(e,r){var i={dynamicNavbar:!1,domCache:!1,linksView:undefined,swipeBackPage:n.params.swipeBackPage,swipeBackPageBoxShadow:n.params.swipeBackPageBoxShadow,swipeBackPageActiveArea:n.params.swipeBackPageActiveArea,swipeBackPageThreshold:n.params.swipeBackPageThreshold,animatePages:n.params.animatePages};r=r||{};for(var s in i)typeof r[s]=="undefined"&&(r[s]=i[s]);var o=this;o.params=r,o.selector=e;var u=t(e);o.container=u[0];var a=document.location.href;o.history=[];var f=a,l=n.params.pushStateSeparator,c=n.params.pushStateRoot;n.params.pushState&&(c?f=c:f.indexOf(l)>=0&&f.indexOf(l+"#")<0&&(f=f.split(l)[0])),o.url=u.attr("data-url")||o.params.url||f,o.url&&o.history.push(o.url),o.contentCache={},u[0].f7View=o,o.pagesContainer=u.find(".pages")[0];if(!o.activePage){var h=t(o.pagesContainer).find(".page-on-center"),p;h.length===0&&(h=t(o.pagesContainer).find(".page"),h=h.eq(h.length-1)),h.length>0&&(p=h[0].f7PageData),p&&(p.view=o,o.url&&(p.url=o.url),o.activePage=p,h[0].f7PageData=p)}o.main=u.hasClass(n.params.viewMainClass);var d=!1,v=!1,m={},g,y,b,w,E,S=!0,x,T,N,C,k,L,A,O,M;o.handleTouchStart=function(e){if(!S||!o.params.swipeBackPage||d||n.swipeoutOpenedEl)return;v=!1,d=!0,g=undefined,m.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,m.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,x=(new Date).getTime(),O=o.params.dynamicNavbar&&u.find(".navbar-inner").length>1},o.handleTouchMove=function(e){if(!d)return;var r=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,i=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;typeof g=="undefined"&&(g=!!(g||Math.abs(i-m.y)>Math.abs(r-m.x)));if(g||e.f7PreventSwipeBack){d=!1;return}e.f7PreventPanelSwipe=!0;if(!v){var s=!1;w=u.width();var a=t(e.target);y=a.is(".page")?a:a.parents(".page"),y.hasClass("no-swipeback")&&(s=!0),b=u.find(".page-on-left:not(.cached)");var f=m.x-u.offset().left>o.params.swipeBackPageActiveArea;n.rtl?f=m.x<u.offset().left-u[0].scrollLeft+w-o.params.swipeBackPageActiveArea:f=m.x-u.offset().left>o.params.swipeBackPageActiveArea,f&&(s=!0);if(b.length===0||y.length===0)s=!0;if(s){d=!1;return}O&&(T=u.find(".navbar-on-center:not(.cached)"),N=u.find(".navbar-on-left:not(.cached)"),C=T.find(".left, .center, .right"),k=N.find(".left, .center, .right"),n.params.animateNavBackIcon&&(L=T.find(".left.sliding .back .icon"),A=N.find(".left.sliding .back .icon")))}v=!0,e.preventDefault();var l=n.rtl?-1:1;E=(r-m.x-o.params.swipeBackPageThreshold)*l,E<0&&(E=0);var c=E/w,h=E*l,p=(E/5-w/5)*l;n.device.pixelRatio===1&&(h=Math.round(h),p=Math.round(p)),y.transform("translate3d("+h+"px,0,0)"),o.params.swipeBackPageBoxShadow&&n.device.os!=="android"&&(y[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*c)+")"),b.transform("translate3d("+p+"px,0,0)"),b[0].style.opacity=.9+.1*c;if(O){var S;for(S=0;S<C.length;S++){M=t(C[S]),M[0].style.opacity=1-c*1.3;if(M[0].className.indexOf("sliding")>=0){var x=c*M[0].f7NavbarRightOffset;n.device.pixelRatio===1&&(x=Math.round(x)),M.transform("translate3d("+x+"px,0,0)"),n.params.animateNavBackIcon&&M[0].className.indexOf("left")>=0&&L.length>0&&L.transform("translate3d("+ -x+"px,0,0)")}}for(S=0;S<k.length;S++){M=t(k[S]),M[0].style.opacity=c*1.3-.3;if(M[0].className.indexOf("sliding")>=0){var _=M[0].f7NavbarLeftOffset*(1-c);n.device.pixelRatio===1&&(_=Math.round(_)),M.transform("translate3d("+_+"px,0,0)"),n.params.animateNavBackIcon&&M[0].className.indexOf("left")>=0&&A.length>0&&A.transform("translate3d("+ -_+"px,0,0)")}}}},o.handleTouchEnd=function(e){if(!d||!v){d=!1,v=!1;return}d=!1,v=!1;if(E===0){t([y[0],b[0]]).transform("").css({opacity:"",boxShadow:""}),O&&(C.transform("").css({opacity:""}),k.transform("").css({opacity:""}),L&&L.length>0&&L.transform(""),A&&L.length>0&&A.transform(""));return}var r=(new Date).getTime()-x,i=!1;if(r<300&&E>10||r>=300&&E>w/2)y.removeClass("page-on-center").addClass("page-on-right"),b.removeClass("page-on-left").addClass("page-on-center"),O&&(T.removeClass("navbar-on-center").addClass("navbar-on-right"),N.removeClass("navbar-on-left").addClass("navbar-on-center")),i=!0;t([y[0],b[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),O&&(C.css({opacity:""}).each(function(){var e=i?this.f7NavbarRightOffset:0,r=t(this);r.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&r.hasClass("left")&&L.length>0&&L.addClass("page-transitioning").transform("translate3d("+ -e+"px,0,0)")}).addClass("page-transitioning"),k.transform("").css({opacity:""}).each(function(){var e=i?0:this.f7NavbarLeftOffset,r=t(this);r.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&r.hasClass("left")&&A.length>0&&A.addClass("page-transitioning").transform("translate3d("+ -e+"px,0,0)")}).addClass("page-transitioning")),S=!1,n.allowPageChange=!1;if(i){var s=o.history[o.history.length-2];o.url=s,n.pageAnimCallbacks("before",o,{pageContainer:b[0],url:s,position:"left",newPage:b,oldPage:y})}y.transitionEnd(function(){t([y[0],b[0]]).removeClass("page-transitioning"),O&&(C.removeClass("page-transitioning").css({opacity:""}),k.removeClass("page-transitioning").css({opacity:""}),L&&L.length>0&&L.removeClass("page-transitioning"),A&&A.length>0&&A.removeClass("page-transitioning")),S=!0,n.allowPageChange=!0,i&&(n.params.pushState&&history.back(),n.afterGoBack(o,y,b))})},o.attachEvents=function(e){var t=e?"off":"on";u[t](n.touchEvents.start,o.handleTouchStart),u[t](n.touchEvents.move,o.handleTouchMove),u[t](n.touchEvents.end,o.handleTouchEnd)},o.detachEvents=function(){o.attachEvents(!0)},o.params.swipeBackPage&&o.attachEvents(),n.views.push(o),o.main&&(n.mainView=o),o.loadPage=function(e,t){return n.loadPage(o,e,t)},o.loadContent=function(e,t){return n.loadContent(o,e,t)},o.goBack=function(e,t){return n.goBack(o,e,t)},o.hideNavbar=function(){return n.hideNavbar(u)},o.showNavbar=function(){return n.showNavbar(u)},o.hideToolbar=function(){return n.hideToolbar(u)},o.showToolbar=function(){return n.showToolbar(u)};if(n.params.pushState&&o.main){var _;c?_=a.split(n.params.pushStateRoot+l)[1]:a.indexOf(l)>=0&&a.indexOf(l+"#")<0&&(_=a.split(l)[1]);var D;n.params.pushStateNoAnimation===!0&&(D=!1),_&&n.loadPage(o,_,D,!1)}return o.destroy=function(){o.detachEvents(),o=undefined},n.pluginHook("addView",o),o};n.addView=function(e,t){return new i(e,t)},n.navbarInitCallback=function(e,r,i,s,o,u){var a={container:i,innerContainer:s},f={url:o,query:t.parseUrlQuery(o||""),container:r,name:t(r).attr("data-page"),view:e,from:u},l={navbar:a,page:f};n.pluginHook("navbarInit",a,f),t(s).trigger("navbarInit",l)},n.sizeNavbars=function(e){var r=e?t(e).find(".navbar .navbar-inner:not(.cached)"):t(".navbar .navbar-inner:not(.cached)");r.each(function(){var e=t(this),r=n.rtl?e.find(".right"):e.find(".left"),i=n.rtl?e.find(".left"):e.find(".right"),s=e.find(".center"),o=r.length===0,u=i.length===0,a=o?0:r.outerWidth(!0),f=u?0:i.outerWidth(!0),l=s.outerWidth(!0),c=e.width(),h=e.hasClass("navbar-on-left"),p,d;u&&(p=c-l),o&&(p=0),!o&&!u&&(p=(c-f-l+a)/2);var v=(c-l)/2;c-a-f>l?(v<a&&(v=a),v+l>c-f&&(v=c-f-l),d=v-p):d=0;var m=n.rtl?-1:1,g=d;n.rtl&&o&&u&&s.length>0&&(g=-g),s.css({left:g+"px"}),s.hasClass("sliding")&&(s[0].f7NavbarLeftOffset=-(p+d)*m,s[0].f7NavbarRightOffset=(c-p-d-l)*m,h&&s.transform("translate3d("+s[0].f7NavbarLeftOffset+"px, 0, 0)")),!o&&r.hasClass("sliding")&&(n.rtl?(r[0].f7NavbarLeftOffset=-(c-r.outerWidth())/2*m,r[0].f7NavbarRightOffset=a*m):(r[0].f7NavbarLeftOffset=-a,r[0].f7NavbarRightOffset=(c-r.outerWidth())/2),h&&r.transform("translate3d("+r[0].f7NavbarLeftOffset+"px, 0, 0)")),!u&&i.hasClass("sliding")&&(n.rtl?(i[0].f7NavbarLeftOffset=-f*m,i[0].f7NavbarRightOffset=(c-i.outerWidth())/2*m):(i[0].f7NavbarLeftOffset=-(c-i.outerWidth())/2,i[0].f7NavbarRightOffset=f),h&&i.transform("translate3d("+i[0].f7NavbarLeftOffset+"px, 0, 0)"))})},n.hideNavbar=function(e){return t(e).addClass("hidden-navbar"),!0},n.showNavbar=function(e){var n=t(e);return n.addClass("hiding-navbar").removeClass("hidden-navbar").find(".navbar").transitionEnd(function(){n.removeClass("hiding-navbar")}),!0},n.hideToolbar=function(e){return t(e).addClass("hidden-toolbar"),!0},n.showToolbar=function(e){var n=t(e);n.addClass("hiding-toolbar").removeClass("hidden-toolbar").find(".toolbar").transitionEnd(function(){n.removeClass("hiding-toolbar")})},n.initSearchbar=function(e){function v(){s.val("").trigger("change"),r.removeClass("searchbar-active searchbar-not-empty"),u.length>0&&u.css(d,-p+"px"),a&&i.removeClass("searchbar-overlay-active"),n.device.ios?setTimeout(function(){s.blur()},400):s.blur()}function m(){n.device.ios?setTimeout(function(){a&&!r.hasClass("searchbar-active")&&i.addClass("searchbar-overlay-active"),r.addClass("searchbar-active"),u.length>0&&u.css(d,"0px"),a.trigger("enableSearch")},400):(a&&!r.hasClass("searchbar-active")&&i.addClass("searchbar-overlay-active"),r.addClass("searchbar-active"),u.length>0&&u.css(d,"0px"),a.trigger("disableSearch"))}function g(){s.val("").trigger("change"),a.trigger("clearSearch")}function y(){setTimeout(function(){var e=s.val().trim();e.length===0?(r.removeClass("searchbar-not-empty"),a&&r.hasClass("searchbar-active")&&i.addClass("searchbar-overlay-active")):(r.addClass("searchbar-not-empty"),a&&r.hasClass("searchbar-active")&&i.removeClass("searchbar-overlay-active")),a.length>0&&f&&S(e)},0)}function b(e){e.preventDefault()}function w(e){var t=e?"off":"on";r[t]("submit",b),u[t]("click",v),i[t]("click",v),s[t]("focus",m),s[t]("change keydown keypress keyup",y),o[t]("click",g)}function E(){w(!0)}function S(e){var r=e.trim().toLowerCase().split(" ");a.find("li").removeClass("hidden-by-searchbar");var i=[];a.find("li").each(function(e,n){n=t(n);var s=n.find(f);if(s.length===0)return;var o;o=s.text().trim().toLowerCase();var u=0;for(var a=0;a<r.length;a++)o.indexOf(r[a])>=0&&u++;u!==r.length?n.addClass("hidden-by-searchbar"):i.push(n[0])}),n.params.searchbarHideDividers&&a.find(".item-divider, .list-group-title").each(function(){var e=t(this),n=e.nextAll("li"),r=!0;for(var i=0;i<n.length;i++){var s=t(n[i]);if(s.hasClass("list-group-title")||s.hasClass("item-divider"))break;s.hasClass("hidden-by-searchbar")||(r=!1)}r?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),n.params.searchbarHideGroups&&a.find(".list-group").each(function(){var e=t(this),n=e.find("li:not(.hidden-by-searchbar)");n.length===0?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),a.trigger("search",{query:e,foundItems:i}),i.length===0?(h.show(),c.hide()):(h.hide(),c.show())}function x(){E(),e.off("pageBeforeRemove",x)}e=t(e);var r=e.hasClass("searchbar")?e:e.find(".searchbar");if(r.length===0)return;e.hasClass("page")||(e=r.parents(".page").eq(0));var i=e.hasClass("page")?e.find(".searchbar-overlay"):t(".searchbar-overlay"),s=r.find('input[type="search"]'),o=r.find(".searchbar-clear"),u=r.find(".searchbar-cancel"),a=t(r.attr("data-search-list")),f=r.attr("data-search-in"),l=r.attr("data-search-by"),c=r.attr("data-searchbar-found");c?c=t(c):(c=e.find(".searchbar-found"),c.length===0&&(c=t(".searchbar-found")));var h=r.attr("data-searchbar-not-found");h?h=t(h):(h=e.find(".searchbar-not-found"),h.length===0&&(h=t(".searchbar-not-found")));var p,d=n.rtl?"margin-left":"margin-right";u.length>0&&(p=u.width(),u.css(d,-p+"px")),r[0].f7DestroySearchbar=E,w(),e.hasClass("page")&&e.on("pageBeforeRemove",x)},n.destroySearchbar=function(e){e=t(e);var n=e.hasClass("searchbar")?e:e.find(".searchbar");if(n.length===0)return;n[0].f7DestroySearchbar&&n[0].f7DestroySearchbar()},n.initMessagebar=function(e){function u(e){e.preventDefault()}function a(){r.css({height:""});var e=r[0].offsetHeight,u=e-r[0].clientHeight,a=r[0].scrollHeight;if(a+u>e){var f=a+u,l=s+(f-o),c=t(n).parents(".view")[0].offsetHeight-88;l>c&&(l=c,f=l-s+o),r.css("height",f+"px"),n.css("height",l+"px"),i.length>0&&(i.css("padding-bottom",l+"px"),i.scrollTop(i[0].scrollHeight-i[0].offsetHeight))}else i.length>0&&(n.css({height:""}),i.css({"padding-bottom":""}))}function l(e){clearTimeout(f),f=setTimeout(function(){a()},0)}function c(e){var t=e?"off":"on";n[t]("submit",u),r[t]("change keydown keypress keyup paste cut",l)}function h(){c(!0)}function p(){h(),e.off("pageBeforeRemove",p)}e=t(e);var n=e.hasClass("messagebar")?e:e.find(".messagebar");if(n.length===0)return;var r=n.find("textarea"),i=n.parents(".page").find(".page-content"),s=n[0].offsetHeight,o=r[0].offsetHeight,f;n[0].f7DestroyMessagebar=h,c(),e.hasClass("page")&&e.on("pageBeforeRemove",p)},n.destroyMessagebar=function(e){e=t(e);var n=e.hasClass("messagebar")?e:e.find(".messagebar");if(n.length===0)return;n[0].f7DestroyMessagebar&&n[0].f7DestroyMessagebar()},n.cache=[],n.removeFromCache=function(e){var t=!1;for(var r=0;r<n.cache.length;r++)n.cache[r].url===e&&(t=r);t!==!1&&n.cache.splice(t,1)},n.xhr=!1,n.get=function(e,r){var i=e;n.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(i=e.split("?")[0]);if(n.params.cache&&e.indexOf("nocache")<0&&n.params.cacheIgnore.indexOf(i)<0)for(var s=0;s<n.cache.length;s++)if(n.cache[s].url===i&&(new Date).getTime()-n.cache[s].time<n.params.cacheDuration)return r(n.cache[s].data),!1;return n.xhr=t.ajax({url:e,method:"GET",start:n.params.onAjaxStart,complete:function(e){e.status===200||e.status===0?(r(e.responseText,!1),n.params.cache&&(n.removeFromCache(i),n.cache.push({url:i,time:(new Date).getTime(),data:e.responseText}))):r(e.responseText,!0),n.params.onAjaxComplete&&n.params.onAjaxComplete(e)},error:function(e){r(e.responseText,!0),n.params.onAjaxError&&n.params.onAjaxonAjaxError(e)}}),n.xhr},n.pageCallbacks={},n.onPage=function(e,t,r){if(t&&t.split(" ").length>1){var i=t.split(" "),s=[];for(var o=0;o<i.length;o++)s.push(n.onPage(e,i[o],r));return s.remove=function(){for(var e=0;e<s.length;e++)s[e].remove()},s.trigger=function(){for(var e=0;e<s.length;e++)s[e].trigger()},s}var u=n.pageCallbacks[e][t];return u||(u=n.pageCallbacks[e][t]=[]),n.pageCallbacks[e][t].push(r),{remove:function(){var e;for(var t=0;t<u.length;t++)u[t].toString()===r.toString()&&(e=t);typeof e!="undefined"&&u.splice(e,1)},trigger:r}};var o="beforeInit init beforeAnimation afterAnimation beforeRemove".split(" ");for(var u=0;u<o.length;u++)n.pageCallbacks[o[u]]={},s(o[u]);n.triggerPageCallbacks=function(e,t,r){var i=n.pageCallbacks[e]["*"];if(i)for(var s=0;s<i.length;s++)i[s](r);var o=n.pageCallbacks[e][t];if(!o||o.length===0)return;for(var u=0;u<o.length;u++)o[u](r)},n.pageInitCallback=function(e,r,i,s){if(r.f7PageInitialized)return;r.f7PageInitialized=!0;var o={container:r,url:i,query:t.parseUrlQuery(i||""),name:t(r).attr("data-page"),view:e,from:s};r.f7PageData=o,e&&(e.activePage=o),n.pluginHook("pageBeforeInit",o),n.params.onPageBeforeInit&&n.params.onPageBeforeInit(n,o),n.triggerPageCallbacks("beforeInit",o.name,o),t(o.container).trigger("pageBeforeInit",{page:o}),n.initPage(r),n.pluginHook("pageInit",o),n.params.onPageInit&&n.params.onPageInit(n,o),n.triggerPageCallbacks("init",o.name,o),t(o.container).trigger("pageInit",{page:o})},n.pageRemoveCallback=function(e,r,i){var s={container:r,name:t(r).attr("data-page"),view:e,from:i};n.pluginHook("pageBeforeRemove",s),n.params.onPageBeforeRemove&&n.params.onPageBeforeRemove(n,s),n.triggerPageCallbacks("beforeRemove",s.name,s),t(s.container).trigger("pageBeforeRemove",{page:s})},n.pageAnimCallbacks=function(e,r,i){var s={container:i.pageContainer,url:i.url,query:t.parseUrlQuery(i.url||""),name:t(i.pageContainer).attr("data-page"),view:r,from:i.position},o=i.oldPage,u=i.newPage;i.pageContainer.f7PageData=s,e==="after"&&(n.pluginHook("pageAfterAnimation",s),n.params.onPageAfterAnimation&&n.params.onPageAfterAnimation(n,s),n.triggerPageCallbacks("afterAnimation",s.name,s),t(s.container).trigger("pageAfterAnimation",{page:s})),e==="before"&&(t(r.container).attr("data-page",s.name),r&&(r.activePage=s),u.hasClass("no-navbar")&&!o.hasClass("no-navbar")&&r.hideNavbar(),!u.hasClass("no-navbar")&&o.hasClass("no-navbar")&&r.showNavbar(),u.hasClass("no-toolbar")&&!o.hasClass("no-toolbar")&&r.hideToolbar(),!u.hasClass("no-toolbar")&&o.hasClass("no-toolbar")&&r.showToolbar(),n.pluginHook("pageBeforeAnimation",s),n.params.onPageBeforeAnimation&&n.params.onPageBeforeAnimation(n,s),n.triggerPageCallbacks("beforeAnimation",s.name,s),t(s.container).trigger("pageBeforeAnimation",{page:s}))},n.initPage=function(e){n.sizeNavbars&&n.sizeNavbars(t(e).parents("."+n.params.viewClass)[0]),n.initMessages&&n.initMessages(e),n.initFormsStorage&&n.initFormsStorage(e),n.initSmartSelects&&n.initSmartSelects(e),n.initSlider&&n.initSlider(e),n.initPullToRefresh&&n.initPullToRefresh(e),n.initInfiniteScroll&&n.initInfiniteScroll(e),n.initSearchbar&&n.initSearchbar(e),n.initMessagebar&&n.initMessagebar(e)},n.allowPageChange=!0,n._tempDomElement=document.createElement("div"),n.loadContent=function(e,t,r,i){if(!n.allowPageChange)return!1;n.allowPageChange=!1,n.xhr&&(n.xhr.abort(),n.xhr=!1);if(n.params.pushState){typeof i=="undefined"&&(i=!0);var s=n.params.pushStateRoot||"";i&&history.pushState({content:t,url:"#content-"+e.history.length},"",s+n.params.pushStateSeparator+"#content-"+e.history.length)}h(t,null,function(t){c(e,null,t,r)})},n.loadPage=function(e,t,r,i){if(!n.allowPageChange)return!1;if(e.url===t)return!1;n.allowPageChange=!1,n.xhr&&(n.xhr.abort(),n.xhr=!1),n.get(t,function(s,o){if(o){n.allowPageChange=!0;return}if(n.params.pushState){typeof i=="undefined"&&(i=!0);var u=n.params.pushStateRoot||"";i&&history.pushState({url:t},"",u+n.params.pushStateSeparator+t)}h(s,t,function(n){c(e,t,n,r)})})},n.goBack=function(e,r,i,s,o){function w(){function t(){n.afterGoBack(e,d[0],v[0]),n.pageAnimCallbacks("after",e,{pageContainer:v[0],url:r,position:"left",oldPage:d,newPage:v})}n.pageAnimCallbacks("before",e,{pageContainer:v[0],url:r,position:"left",oldPage:d,newPage:v}),i?(f(v,d,"to-right",e),b&&setTimeout(function(){l(g,m,"to-right",e)},0),v.animationEnd(function(){t()})):(g.find(".sliding, .sliding .back .icon").transform(""),t())}function E(){v=a(".page",n._tempDomElement,e);if(!v){n.allowPageChange=!0;return}v.addClass("page-on-left"),d=t(p[0]),e.params.dynamicNavbar&&(b=!0,g=a(".navbar-inner",n._tempDomElement,e),g||(b=!1)),b&&(y=u.find(".navbar"),m=y.find(".navbar-inner"),g.addClass(m.length>0?"navbar-on-left":"navbar-on-center"),m.length>1&&(t(m[0]).remove(),m=y.find(".navbar-inner")),y.prepend(g[0]),n.navbarInitCallback(e,v[0],y[0],g[0],r,"left")),c.prepend(v[0]),n.pageInitCallback(e,v[0],r,"left"),b&&g.hasClass("navbar-on-left")&&i&&g.find(".sliding").each(function(){var e=t(this);n.params.animateNavBackIcon&&(e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+ -this.f7NavbarLeftOffset+"px,0,0)"),e.hasClass("center")&&m.find(".left .back .icon").length>0&&(this.f7NavbarLeftOffset+=m.find(".left .back span")[0].offsetLeft)),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")});if(s){v.addClass("page-on-left"),n.allowPageChange=!0;return}e.url=r;var o=v[0].clientLeft;w()}if(!n.allowPageChange)return!1;n.allowPageChange=!1,n.xhr&&(n.xhr.abort(),n.xhr=!1),n.pluginHook("goBack",e,r,s),n.params.pushState&&(typeof o=="undefined"&&(o=!0),!s&&history.state&&o&&history.back());var u=t(e.container),c=t(e.pagesContainer),p=c.children(".page"),d,v,m,g,y,b;typeof i=="undefined"&&(i=e.params.animatePages);if(p.length>1){if(s){n.allowPageChange=!0;return}e.url=e.history[e.history.length-2],v=t(p[p.length-2]),d=t(p[p.length-1]);if(e.params.dynamicNavbar){b=!0;var S=u.find(".navbar-inner:not(.cached)");g=t(S[0]),m=t(S[1])}w()}else{r&&r.indexOf("#")===0&&(r=undefined),e.history.length>1&&(r=e.history[e.history.length-2]);if(!r){n.allowPageChange=!0;return}if(!e.params.domCache&&r in e.contentCache){var x=e.contentCache[r];n._tempDomElement.innerHTML="",t(n._tempDomElement).append(x.nav[0]).append(x.page[0]),E();return}n.get(r,function(e,t){if(t){n.allowPageChange=!0;return}h(e,null,function(e){n._tempDomElement.innerHTML=e,E()})})}},n.afterGoBack=function(e,r,i){r=t(r),i=t(i),n.pageRemoveCallback(e,r[0],"right"),r.remove(),i.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),n.allowPageChange=!0;if(e.params.dynamicNavbar){var s=t(e.container).find(".navbar-inner:not(.cached)"),o=t(s[1]).remove(),u=t(s[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center");if(n.params.preloadPreviousPage&&e.params.domCache){var a=t(e.container).find(".navbar-inner.cached");t(a[a.length-1]).removeClass("cached")}}var f=e.history.pop();!e.params.domCache&&f&&f.indexOf("#content-")>-1&&f in e.contentCache&&(e.contentCache[f]=null,delete e.contentCache[f]),n.params.pushState&&n.pushStateClearQueue();if(n.params.preloadPreviousPage){if(e.params.domCache){var l=t(e.container).find(".page.cached");t(l[l.length-1]).removeClass("cached")}n.goBack(e,!1,undefined,!0)}};var p=document.createElement("div");n.modal=function(e){e=e||{};var r="";if(e.buttons&&e.buttons.length>0)for(var i=0;i<e.buttons.length;i++)r+='<span class="modal-button'+(e.buttons[i].bold?" modal-button-bold":"")+'">'+e.buttons[i].text+"</span>";var s=n.params.modalTemplate;e.title?s=s.replace(/{{if\ title}}/g,"").replace(/{{\/if\ title}}/g,""):s=s.split("{{if title}}")[0]+s.split("{{/if title}}")[1];var o=s.replace(/{{title}}/g,e.title||"").replace(/{{text}}/g,e.text||"").replace(/{{afterText}}/g,e.afterText||"").replace(/{{buttons}}/g,r).replace(/{{noButtons}}/g,!e.buttons||e.buttons.length===0?"modal-no-buttons":"");p.innerHTML=o;var u=t(p).children();return t("body").append(u[0]),u.find(".modal-button").each(function(r,i){t(i).on("click",function(t){e.buttons[r].close!==!1&&n.closeModal(u),e.buttons[r].onClick&&e.buttons[r].onClick(u,t),e.onClick&&e.onClick(u,r)})}),n.openModal(u),u[0]},n.alert=function(e,t,r){return typeof t=="function"&&(r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonOk,bold:!0,onClick:r}]})},n.confirm=function(e,t,r,i){return typeof t=="function"&&(i=arguments[2],r=arguments[1],t=undefined),n.modal({text:e||"",title:typeof t=="undefined"?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonCancel,onClick:i},{text:n.params.modalButtonOk,bold:!0,onClick:r}]})},n.prompt=function(e,r,i,s){return typeof r=="function"&&(s=arguments[2],i=arguments[1],r=undefined),n.modal({text:e||"",title:typeof r=="undefined"?n.params.modalTitle:r,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,n){n===0&&s&&s(t(e).find(".modal-text-input").val()),n===1&&i&&i(t(e).find(".modal-text-input").val())}})},n.modalLogin=function(e,r,i,s){return typeof r=="function"&&(s=arguments[2],i=arguments[1],r=undefined),n.modal({text:e||"",title:typeof r=="undefined"?n.params.modalTitle:r,afterText:'<input type="text" name="modal-username" placeholder="'+n.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,n){var r=t(e).find('.modal-text-input[name="modal-username"]').val(),o=t(e).find('.modal-text-input[name="modal-password"]').val();n===0&&s&&s(r,o),n===1&&i&&i(r,o)}})},n.modalPassword=function(e,r,i,s){return typeof r=="function"&&(s=arguments[2],i=arguments[1],r=undefined),n.modal({text:e||"",title:typeof r=="undefined"?n.params.modalTitle:r,afterText:'<input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,n){var r=t(e).find('.modal-text-input[name="modal-password"]').val();n===0&&s&&s(r),n===1&&i&&i(r)}})},n.showPreloader=function(e){return n.modal({title:e||n.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},n.hidePreloader=function(){n.closeModal(".modal.modal-in")},n.showIndicator=function(){t("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},n.hideIndicator=function(){t(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},n.actions=function(e){e=e||[],e.length>0&&!t.isArray(e[0])&&(e=[e]);var r=n.params.modalActionsTemplate,i="";for(var s=0;s<e.length;s++)for(var o=0;o<e[s].length;o++){o===0&&(i+='<div class="actions-modal-group">');var u=e[s][o],a=u.label?"actions-modal-label":"actions-modal-button";u.bold&&(a+=" actions-modal-button-bold"),u.red&&(a+=" actions-modal-button-red"),i+='<span class="'+a+'">'+u.text+"</span>",o===e[s].length-1&&(i+="</div>")}var f=r.replace(/{{buttons}}/g,i);p.innerHTML=f;var l=t(p).children();t("body").append(l[0]);var c=l.find(".actions-modal-group");return c.each(function(r,i){var s=r;t(i).children().each(function(r,i){var o=r,u=e[s][o];t(i).hasClass("actions-modal-button")&&t(i).on("click",function(e){u.close!==!1&&n.closeModal(l),u.onClick&&u.onClick(l,e)})})}),n.openModal(l),l[0]},n.popover=function(e,r,i){function o(){e.css({left:"",top:""});var n=e.width(),i=e.height(),s=e.find(".popover-angle"),o=s.width()/2;s.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var u=r.outerWidth(),a=r.outerHeight(),f=r.offset(),l=r.parents(".page");l.length>0&&(f.top=f.top-l[0].scrollTop);var c=t(window).height(),h=t(window).width(),p=0,d=0,v=0,m="top";i+o<f.top?p=f.top-i-o:i+o<c-f.top-a?(m="bottom",p=f.top+a+o):(m="middle",p=a/2+f.top-i/2,v=p,p<0?p=5:p+i>c&&(p=c-i-5),v-=p),m==="top"||m==="bottom"?(d=u/2+f.left-n/2,v=d,d<5&&(d=5),d+n>h&&(d=h-n-5),m==="top"&&s.addClass("on-bottom"),m==="bottom"&&s.addClass("on-top"),v-=d,s.css({left:n/2-o+v+"px"})):m==="middle"&&(d=f.left-n-o,s.addClass("on-right"),d<5&&(d=f.left+u+o,s.removeClass("on-right").addClass("on-left")),d+n>h&&(d=h-n-5,s.removeClass("on-right").addClass("on-left")),s.css({top:i/2-o+v+"px"})),e.css({top:p+"px",left:d+"px"})}typeof i=="undefined"&&(i=!0);if(typeof e=="string"&&e.indexOf("<")>=0){var s=document.createElement("div");s.innerHTML=t.trim(e);if(!(s.childNodes.length>0))return!1;e=s.childNodes[0],i&&e.classList.add("remove-on-close"),t("body").append(e)}return e=t(e),r=t(r),e.length===0||r.length===0?!1:(e.find(".popover-angle").length===0&&e.append('<div class="popover-angle"></div>'),e.show(),o(),t(window).on("resize",o),e.on("close",function(){t(window).off("resize",o)}),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.popup=function(e,r){typeof r=="undefined"&&(r=!0);if(typeof e=="string"&&e.indexOf("<")>=0){var i=document.createElement("div");i.innerHTML=t.trim(e);if(!(i.childNodes.length>0))return!1;e=i.childNodes[0],r&&e.classList.add("remove-on-close"),t("body").append(e)}return e=t(e),e.length===0?!1:(e.show(),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.loginScreen=function(e){return e||(e=".login-screen"),e=t(e),e.length===0?!1:(e.show(),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars(e.find("."+n.params.viewClass)[0]),n.openModal(e),e[0])},n.openModal=function(e){e=t(e);var n=e.hasClass("popover"),r=e.hasClass("popup"),i=e.hasClass("login-screen");!n&&!r&&!i&&e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"});var s;i||(t(".modal-overlay").length===0&&!r&&t("body").append('<div class="modal-overlay"></div>'),t(".popup-overlay").length===0&&r&&t("body").append('<div class="popup-overlay"></div>'),s=r?t(".popup-overlay"):t(".modal-overlay"));var o=e[0].clientLeft;return e.trigger("open"),i||s.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened")}),!0},n.closeModal=function(e){e=t(e||".modal-in");var n=e.hasClass("popover"),r=e.hasClass("popup"),i=e.hasClass("login-screen"),s=e.hasClass("remove-on-close"),o=r?t(".popup-overlay"):t(".modal-overlay");return o.removeClass("modal-overlay-visible"),e.trigger("close"),n?(e.removeClass("modal-in modal-out").trigger("closed").hide(),s&&e.remove()):e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened"),r||i?(e.removeClass("modal-out").hide(),s&&e.length>0&&e.remove()):e.remove()}),!0},n.allowPanelOpen=!0,n.openPanel=function(e){function a(){o.transitionEnd(function(e){t(e.target).is(o)?(r.hasClass("active")?r.trigger("opened"):r.trigger("closed"),n.allowPanelOpen=!0):a()})}if(!n.allowPanelOpen)return!1;var r=t(".panel-"+e);if(r.length===0||r.hasClass("active"))return!1;n.closePanel(),n.allowPanelOpen=!1;var i=r.hasClass("panel-reveal")?"reveal":"cover";r.css({display:"block"}).addClass("active"),r.trigger("open"),r.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(r.find("."+n.params.viewClass)[0]);var s=r[0].clientLeft,o=i==="reveal"?t("."+n.params.viewsClass):r,u=!1;return a(),t("body").addClass("with-panel-"+e+"-"+i),!0},n.closePanel=function(){var e=t(".panel.active");if(e.length===0)return!1;var r=e.hasClass("panel-reveal")?"reveal":"cover",i=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var s=r==="reveal"?t("."+n.params.viewsClass):e;e.trigger("close"),n.allowPanelOpen=!1,s.transitionEnd(function(){if(e.hasClass("active"))return;e.css({display:""}),e.trigger("closed"),t("body").removeClass("panel-closing"),n.allowPanelOpen=!0}),t("body").addClass("panel-closing").removeClass("with-panel-"+i+"-"+r)},n.initSwipePanels=function(){function g(e){if(!n.allowPanelOpen||!n.params.swipePanel)return;if(t(".modal-in, .photo-browser-in").length>0)return;u.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,u.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY;if(n.params.swipePanelActiveArea){if(n.params.swipePanel==="left"&&u.x>n.params.swipePanelActiveArea)return;if(n.params.swipePanel==="right"&&u.x<window.innerWidth-n.params.swipePanelActiveArea)return}s=!1,i=!0,o=undefined,a=(new Date).getTime(),d=undefined}function y(t){if(!i)return;if(t.f7PreventPanelSwipe)return;var g=t.type==="touchmove"?t.targetTouches[0].pageX:t.pageX,y=t.type==="touchmove"?t.targetTouches[0].pageY:t.pageY;typeof o=="undefined"&&(o=!!(o||Math.abs(y-u.y)>Math.abs(g-u.x)));if(o){i=!1;return}if(!d){g>u.x?d="to-right":d="to-left";if(v==="left"&&d==="to-left"&&!e.hasClass("active")||v==="right"&&d==="to-right"&&!e.hasClass("active")){i=!1;return}}if(n.params.swipePanelNoFollow){var b=(new Date).getTime()-a;b<300&&(d==="to-left"&&(v==="right"&&n.openPanel(v),v==="left"&&e.hasClass("active")&&n.closePanel()),d==="to-right"&&(v==="left"&&n.openPanel(v),v==="right"&&e.hasClass("active")&&n.closePanel())),i=!1,s=!1;return}s||(p=e.hasClass("panel-cover")?"cover":"reveal",e.show(),r.show(),c=e.hasClass("active"),h=e.width(),e.transition(0),e.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(e.find("."+n.params.viewClass)[0])),s=!0,t.preventDefault();var w=c?0:-n.params.swipePanelThreshold;v==="right"&&(w=-w),f=g-u.x+w,v==="right"?(l=f-(c?h:0),l>0&&(l=0),l<-h&&(l=-h)):(l=f+(c?h:0),l<0&&(l=0),l>h&&(l=h)),p==="reveal"?(m.transform("translate3d("+l+"px,0,0)").transition(0),r.transform("translate3d("+l+"px,0,0)"),n.pluginHook("swipePanelSetTransform",m[0],e[0],Math.abs(l/h))):(e.transform("translate3d("+l+"px,0,0)").transition(0),n.pluginHook("swipePanelSetTransform",m[0],e[0],Math.abs(l/h)))}function b(o){if(!i||!s){i=!1,s=!1;return}i=!1,s=!1;var u=(new Date).getTime()-a,f,d=l===0||Math.abs(l)===h;c?l===-h?f="reset":u<300&&Math.abs(l)>=0||u>=300&&Math.abs(l)<=h/2?v==="left"&&l===h?f="reset":f="swap":f="reset":l===0?f="reset":u<300&&Math.abs(l)>0||u>=300&&Math.abs(l)>=h/2?f="swap":f="reset",f==="swap"&&(n.allowPanelOpen=!0,c?(n.closePanel(),d&&(e.css({display:""}),t("body").removeClass("panel-closing"))):n.openPanel(v),d&&(n.allowPanelOpen=!0));if(f==="reset")if(c)n.allowPanelOpen=!0,n.openPanel(v);else{n.closePanel();if(d)n.allowPanelOpen=!0,e.css({display:""});else{var g=p==="reveal"?m:e;t("body").addClass("panel-closing"),g.transitionEnd(function(){n.allowPanelOpen=!0,e.css({display:""}),t("body").removeClass("panel-closing")})}}p==="reveal"&&(m.transition(""),m.transform("")),e.transition("").transform(""),r.css({display:""}).transform("")}var e=t(".panel.panel-"+n.params.swipePanel);if(e.length===0)return;var r=t(".panel-overlay"),i,s,o,u={},a,f,l,c,h,p,d,v,m=t("."+n.params.viewsClass);v=n.params.swipePanel,t(document).on(n.touchEvents.start,g),t(document).on(n.touchEvents.move,y),t(document).on(n.touchEvents.end,b)},n.initMessages=function(e){var r=t(e),i=r.find(".messages");if(i.length===0)return;var s=r.find(".page-content");i.hasClass("new-messages-first")||(s[0].scrollTop=i.height()-s.height()),n.updateMessagesAngles(i)},n.addMessage=function(e){e=e||{},e.type=e.type||"sent";if(!e.text||e.length===0)return!1;var r=t(".messages-content");if(r.length===0)return!1;var i=r.find(".messages"),s=i.hasClass("new-messages-first"),o="";e.day&&(o+='<div class="messages-date">'+e.day+(e.time?",":"")+(e.time?" <span>"+e.time+"</span>":"")+"</div>");var u=e.text.indexOf("<img")>=0?"message-pic":"",a=e.avatar?"message-with-avatar":"",f="message message-"+e.type+u+" "+a+" message-appear";o+='<div class="'+f+'">'+(e.name?'<div class="message-name">'+e.name+"</div>":"")+'<div class="message-text">'+e.text+"</div>"+(e.avatar?'<div class="message-avatar" style="background-image:url('+e.avatar+')"></div>':"")+"</div>",s?i.prepend(o):i.append(o),n.updateMessagesAngles(i),n.scrollMessagesContainer(r)},n.updateMessagesAngles=function(e){e.find(".message").each(function(){var e=t(this);e.find(".message-text img").length>0&&e.addClass("message-pic"),e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),e.find(".message-sent").each(function(){var e=t(this),n=e.next(".message-sent"),r=e.prev(".message-sent");n.length===0?e.addClass("message-last"):e.removeClass("message-last"),r.length===0?e.addClass("message-first"):e.removeClass("message-first"),r.length>0&&r.find(".message-name").length>0&&e.find(".message-name").length>0&&r.find(".message-name").text()!==e.find(".message-name").text()&&(r.addClass("message-last"),e.addClass("message-first"))}),e.find(".message-received").each(function(){var e=t(this),n=e.next(".message-received"),r=e.prev(".message-received");n.length===0?e.addClass("message-last"):e.removeClass("message-last"),r.length===0?e.addClass("message-first"):e.removeClass("message-first"),r.length>0&&r.find(".message-name").length>0&&e.find(".message-name").length>0&&r.find(".message-name").text()!==e.find(".message-name").text()&&(r.addClass("message-last"),e.addClass("message-first"))})},n.scrollMessagesContainer=function(e){e=t(e||".messages-content");if(e.length===0)return;var n=e.find(".messages"),r=n.hasClass("new-messages-first"),i=e[0].scrollTop,s=r?0:n.height()-e.height();if(s===i)return;e.scrollTop(s,300)},n.swipeoutOpenedEl=undefined,n.allowSwipeout=!0,n.initSwipeout=function(e){function v(e){if(!n.allowSwipeout)return;i=!1,r=!0,s=undefined,o.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,o.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,u=(new Date).getTime()}function m(e){if(!r)return;var u=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,v=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;typeof s=="undefined"&&(s=!!(s||Math.abs(v-o.y)>Math.abs(u-o.x)));if(s){r=!1;return}if(!i){if(t(".list-block.sortable-opened").length>0)return;f=t(this),l=f.find(".swipeout-content"),c=f.find(".swipeout-actions-inner"),h=c.width(),d=f.hasClass("swipeout-opened"),f.removeClass("transitioning")}i=!0,e.preventDefault(),e.f7PreventPanelSwipe=!0,n.rtl&&(e.f7PreventSwipeBack=!0),a=u-o.x,p=a-(d?h:0),p>0&&(p=0),p<-h&&(p=-h-Math.pow(-p-h,.8));if(n.params.swipeoutNoFollow){if(a<0&&!d){n.swipeoutOpen(f),r=!1,i=!1;return}if(a>0&&d){n.swipeoutClose(f),r=!1,i=!1;return}}else f.trigger("swipeout",{progress:Math.abs(p/h)}),l.transform("translate3d("+p+"px,0,0)")}function g(e){if(!r||!i){r=!1,i=!1;return}r=!1,i=!1;var t=(new Date).getTime()-u;p!==0&&p!==-h&&(n.allowSwipeout=!1);var s;d?t<300&&p>-(h-10)||t>=300&&p>-h/2?s="close":s="open":t<300&&p<-10||t>=300&&p<-h/2?s="open":s="close";if(s==="open"){n.swipeoutOpenedEl=f,f.trigger("open"),f.addClass("swipeout-opened transitioning");var o=-h;l.transform("translate3d("+o+"px,0,0)")}else f.trigger("close"),n.swipeoutOpenedEl=undefined,f.addClass("transitioning").removeClass("swipeout-opened"),l.transform("translate3d(0px,0,0)");p<=-h?(d||f.trigger("opened"),n.allowSwipeout=!0):p>=0?(d&&f.trigger("closed"),n.allowSwipeout=!0):l.transitionEnd(function(){n.allowSwipeout=!0,f.trigger(s==="open"?"opened":"closed")})}var r,i,s,o={},u,a,f,l,c,h,p,d;t(document).on(n.touchEvents.start,function(e){if(n.swipeoutOpenedEl){var r=t(e.target);n.swipeoutOpenedEl.is(r[0])||r.parents(".swipeout").is(n.swipeoutOpenedEl)||r.hasClass("modal-in")||r.parents(".modal-in").length>0||r.hasClass("modal-overlay")||n.swipeoutClose(n.swipeoutOpenedEl)}}),e?(t(e).on(n.touchEvents.start,v),t(e).on(n.touchEvents.move,m),t(e).on(n.touchEvents.end,g)):(t(document).on(n.touchEvents.start,".list-block li.swipeout",v),t(document).on(n.touchEvents.move,".list-block li.swipeout",m),t(document).on(n.touchEvents.end,".list-block li.swipeout",g))},n.swipeoutOpen=function(e){e=t(e);if(!e.hasClass("swipeout"))return;if(e.length===0)return;e.length>1&&(e=t(e[0])),e.trigger("open").addClass("transitioning swipeout-opened");var r=e.find(".swipeout-actions-inner"),i=-r.width();e.find(".swipeout-content").transform("translate3d("+i+"px,0,0)").transitionEnd(function(){e.trigger("opened")}),n.swipeoutOpenedEl=e},n.swipeoutClose=function(e){e=t(e);if(e.length===0)return;n.allowSwipeout=!1,e.trigger("close"),e.removeClass("swipeout-opened").addClass("transitioning").find(".swipeout-content").transform("translate3d(0px,0,0)").transitionEnd(function(){e.trigger("closed"),n.allowSwipeout=!0}),n.swipeoutOpenedEl&&n.swipeoutOpenedEl[0]===e[0]&&(n.swipeoutOpenedEl=undefined)},n.swipeoutDelete=function(e){e=t(e);if(e.length===0)return;e.length>1&&(e=t(e[0])),n.swipeoutOpenedEl=undefined,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});var r=e[0].clientLeft;e.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){e.trigger("deleted"),e.remove()});var i="-100%";e.find(".swipeout-content").transform("translate3d("+i+",0,0)")},n.sortableToggle=function(e){return e=t(e),e.length===0&&(e=t(".list-block.sortable")),e.toggleClass("sortable-opened"),e.hasClass("sortable-opened")?e.trigger("open"):e.trigger("close"),e},n.sortableOpen=function(e){return e=t(e),e.length===0&&(e=t(".list-block.sortable")),e.addClass("sortable-opened"),e.trigger("open"),e},n.sortableClose=function(e){return e=t(e),e.length===0&&(e=t(".list-block.sortable")),e.removeClass("sortable-opened"),e.trigger("close"),e},n.initSortable=function(){function p(s){r=!1,e=!0,i=s.type==="touchstart"?s.targetTouches[0].pageY:s.pageY,o=t(this).parent(),u=o.parent().find("li"),h=o.parents(".sortable"),s.preventDefault(),n.allowsPanelOpen=n.allowSwipeout=!1}function d(n){if(!e||!o)return;var p=n.type==="touchmove"?n.targetTouches[0].pageX:n.pageX,d=n.type==="touchmove"?n.targetTouches[0].pageY:n.pageY;r||(o.addClass("sorting"),h.addClass("sortable-sorting"),a=o[0].offsetTop,f=o.parent().height()-o[0].offsetTop-o.height()),r=!0,n.preventDefault(),n.f7PreventPanelSwipe=!0,s=d-i;var v=s;v<-a&&(v=-a),v>f&&(v=f),o.transform("translate3d(0,"+v+"px,0)"),c=l=undefined,u.each(function(){var e=t(this);if(e[0]===o[0])return;var n=e[0].offsetTop,r=e.height(),i=o[0].offsetTop+v;i>=n-r/2&&o.index()<e.index()?(e.transform("translate3d(0,-100%,0)"),l=e,c=undefined):i<=n+r/2&&o.index()>e.index()?(t(this).transform("translate3d(0,100%,0)"),l=undefined,c||(c=e)):t(this).transform("translate3d(0, 0%,0)")})}function v(t){n.allowsPanelOpen=n.allowSwipeout=!0;if(!e||!r){e=!1,r=!1;return}t.preventDefault(),u.transform(""),o.removeClass("sorting"),h.removeClass("sortable-sorting"),l&&(o.insertAfter(l),o.trigger("sort")),c&&(o.insertBefore(c),o.trigger("sort")),l=c=undefined,e=!1,r=!1}var e,r,i,s,o,u,a,f,l,c,h;t(document).on(n.touchEvents.start,".list-block.sortable .sortable-handler",p),t(document).on(n.touchEvents.move,".list-block.sortable .sortable-handler",d),t(document).on(n.touchEvents.end,".list-block.sortable .sortable-handler",v)},n.initSmartSelects=function(e){var n=t(e);if(n.length===0)return;var r=n.find(".smart-select");if(r.length===0)return;r.each(function(){var e=t(this),n=e.find("select");if(n.length===0)return;var r=n[0];if(r.length===0)return;var i=[];for(var s=0;s<r.length;s++)r[s].selected&&i.push(r[s].textContent.trim());var o=e.find(".item-after");o.length===0?e.find(".item-inner").append('<div class="item-after">'+i.join(", ")+"</div>"):o.text(i)})},n.smartSelectOpen=function(e){function k(n){var s=n.detail.page;s.name===b&&(t(document).off("pageInit",k),t(s.container).find('input[name="'+h+'"]').on("change",function(){var n=this,s=n.value,o=[];if(n.type==="checkbox"){var u=[];for(var a=0;a<i.options.length;a++){var l=i.options[a];l.value===s&&(l.selected=n.checked),l.selected&&o.push(l.textContent.trim())}}else o=[e.find('option[value="'+s+'"]').text()],i.value=s;t(i).trigger("change"),e.find(".item-after").text(o.join(", ")),f&&c==="radio"&&r.goBack()}))}e=t(e);if(e.length===0)return;var r=e.parents("."+n.params.viewClass);if(r.length===0)return;r=r[0].f7View;if(!r)return;var i=e.find("select")[0];if(i.disabled||e.hasClass("disabled")||t(i).hasClass("disabled"))return;var s={};s.length=i.length;for(var o=0;o<i.length;o++)s[o]={value:i[o].value,text:i[o].textContent.trim(),selected:i[o].selected,group:t(i[o]).parent("optgroup")[0],disabled:i[o].disabled};var u=e.attr("data-pagetitle")||e.find(".item-title").text(),a=e.attr("data-backtext")||n.params.smartSelectBackText,f=e.attr("data-backonselect")?e.attr("data-backonselect")==="true"?!0:!1:n.params.smartSelectBackOnSelect,l=(new Date).getTime(),c=i.multiple?"checkbox":"radio",h=c+"-"+l,p="",d;for(var v=0;v<s.length;v++){if(s[v].disabled)continue;var m=s[v].selected?"checked":"";s[v].group&&s[v].group!==d&&(p+='<li class="item-divider">'+s[v].group.label+"</li>",d=s[v].group),p+='<li><label class="label-'+c+' item-content">'+'<input type="'+c+'" name="'+h+'" value="'+s[v].value+'" '+m+">"+(c==="checkbox"?'<div class="item-media"><i class="icon icon-form-checkbox"></i></div>':"")+'<div class="item-inner">'+'<div class="item-title">'+s[v].text+"</div>"+"</div>"+"</label>"+"</li>"}var g='<div class="navbar">  <div class="navbar-inner">'+n.params.smartSelectBackTemplate.replace(/{{backText}}/g,a)+'    <div class="center sliding">'+u+"</div>"+"  </div>"+"</div>",y="static";e.parents(".navbar-through").length>0&&(y="through"),e.parents(".navbar-fixed").length>0&&(y="fixed");var b="smart-select-"+h,w=e.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",E=e.parents(".page").hasClass("no-navbar")?"no-navbar":"",S=typeof e.data("searchbar")=="undefined"?n.params.smartSelectSearchbar:e.data("searchbar")==="true"?!0:!1,x,T;S&&(x=e.data("searchbar-placeholder")||"Search",T=e.data("searchbar-cancel")||"Cancel");var N='<form class="searchbar" data-search-list=".smart-select-list-'+l+'" data-search-in=".item-title">'+'<div class="searchbar-input">'+'<input type="search" placeholder="'+x+'">'+'<a href="#" class="searchbar-clear"></a>'+"</div>"+'<a href="#" class="searchbar-cancel">'+T+"</a>"+"</form>"+'<div class="searchbar-overlay"></div>',C=(y==="through"?g:"")+'<div class="pages">'+'  <div data-page="'+b+'" class="page smart-select-page'+E+" "+w+'">'+(y==="fixed"?g:"")+(S?N:"")+'    <div class="page-content">'+(y==="static"?g:"")+'      <div class="list-block smart-select-list-'+l+'">'+"        <ul>"+p+"        </ul>"+"      </div>"+"    </div>"+"  </div>"+"</div>";t(document).on("pageInit",k),r.loadContent(C)},n.initPullToRefresh=function(e){function d(e){if(i)return;s=!1,i=!0,u=undefined,o.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,o.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,f=(new Date).getTime()}function v(e){if(!i)return;var r=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,f=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;typeof u=="undefined"&&(u=!!(u||Math.abs(f-o.y)>Math.abs(r-o.x)));if(!u){i=!1;return}s||(l=t(this),l.removeClass("transitioning"),p=l.hasClass("refreshing")?44:0,l[0].scrollHeight===l[0].offsetHeight||n.device.os!=="ios"?h=!0:h=!1),s=!0,a=f-o.y;if(!(a>0&&l[0].scrollTop<=0||l[0].scrollTop<0)){l.removeClass("pull-up"),c=!1;return}h&&(e.preventDefault(),l.transform("translate3d(0,"+(Math.pow(a,.85)+p)+"px,0)")),h&&Math.pow(a,.85)>44||!h&&a>=88?(c=!0,l.addClass("pull-up")):(c=!1,l.removeClass("pull-up"))}function m(e){if(!i||!s){i=!1,s=!1;return}l.addClass("transitioning"),l.transform(""),c&&(l.addClass("refreshing"),l.trigger("refresh",{done:function(){n.pullToRefreshDone(l)}})),i=!1,s=!1}function y(){r.off(n.touchEvents.start,d),r.off(n.touchEvents.move,v),r.off(n.touchEvents.end,m),g.off("pageBeforeRemove",y)}var r=t(e);r.hasClass("pull-to-refresh-content")||(r=r.find(".pull-to-refresh-content"));if(r.length===0)return;var i,s,o={},u,a,f,l,c=!1,h=!1,p=0;r.on(n.touchEvents.start,d),r.on(n.touchEvents.move,v),r.on(n.touchEvents.end,m);var g=r.hasClass("page")?r:r.parents(".page");if(g.length===0)return;g.on("pageBeforeRemove",y)},n.pullToRefreshDone=function(e){e=t(e),e.length===0&&(e=t(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up")})},n.attachInfiniteScroll=function(e){t(e).on("scroll",d)},n.detachInfiniteScroll=function(e){t(e).off("scroll",d)},n.initInfiniteScroll=function(e){function i(){n.detachInfiniteScroll(r),e.off("pageBeforeRemove",i)}e=t(e);var r=e.find(".infinite-scroll");n.attachInfiniteScroll(r),e.on("pageBeforeRemove",i)},n.showTab=function(e,r){var i=t(e);if(i.hasClass("active"))return!1;if(i.length===0)return!1;var s=i.parent(".tabs");if(s.length===0)return!1;n.allowSwipeout=!0;var o=s.parent().hasClass("tabs-animated-wrap");o&&s.transform("translate3d("+ -i.index()*100+"%,0,0)"),s.children(".tab.active").removeClass("active"),i.addClass("active"),i.trigger("show");if(!o&&i.find(".navbar").length>0){var u;i.hasClass(n.params.viewClass)?u=i[0]:u=i.parents("."+n.params.viewClass)[0],n.sizeNavbars(u)}r?r=t(r):(typeof e=="string"?r=t('.tab-link[href="'+e+'"]'):r=t('.tab-link[href="#'+i.attr("id")+'"]'),r.length===0&&t("[data-tab]").each(function(){i.is(t(this).attr("data-tab"))&&(r=t(this))}));if(r.length===0)return;return r.parent().find(".active").removeClass("active"),r.addClass("active"),!0},n.accordionToggle=function(e){e=t(e);if(e.length===0)return;e.hasClass("accordion-item-expanded")?n.accordionClose(e):n.accordionOpen(e)},n.accordionOpen=function(e){e=t(e);var r=e.parents(".accordion-list"),i=e.find(".accordion-item-content"),s=r.find(".accordion-item-expanded");s.length>0&&n.accordionClose(s),i.css("height",i[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){i.transition(0),i.css("height","auto");var t=i[0].clientLeft;i.transition("")}else i.css("height","")}),e.addClass("accordion-item-expanded")},n.accordionClose=function(e){e=t(e);var n=e.find(".accordion-item-content");e.removeClass("accordion-item-expanded"),n.transition(0),n.css("height",n[0].scrollHeight+"px");var r=n[0].clientLeft;n.transition(""),n.css("height","").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){n.transition(0),n.css("height","auto");var t=n[0].clientLeft;n.transition("")}else n.css("height","")})},n.initFastClicks=function(){function c(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),r="button checkbox file image radio submit".split(" ");if(e.disabled||e.readOnly)return!1;if(t==="textarea")return!0;if(t==="select")return n.device.os==="android"?!1:!0;if(t==="input"&&r.indexOf(e.type)<0)return!0}function h(e){e=t(e);if(e.is("label")||e.parents("label").length>0){if(n.device.os==="android"){var r=n.device.osVersion.split(".");return r[0]*1>4||r[0]*1===4&&r[1]*1>=4?!1:!0}return!1}return!0}function p(c){l=!1;if(c.targetTouches.length>1)return!0;if(n.device.os==="ios"){var h=window.getSelection();if(h.rangeCount&&(!h.isCollapsed||document.activeElement===h.focusNode))return u=!0,!0;u=!1}o=!0,s=c.target,i=(new Date).getTime(),e=c.targetTouches[0].pageX,r=c.targetTouches[0].pageY,n.device.os==="ios"&&(a=undefined,t(s).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!a&&(a=e,a.f7ScrollTop=a.scrollTop)})),c.timeStamp-f<200&&c.preventDefault()}function d(e){if(!o)return;o=!1,s=null,l=!0}function v(e){if(!o)return u||e.preventDefault(),!0;if(document.activeElement===e.target)return!0;u||e.preventDefault();if(e.timeStamp-f<200)return!0;f=e.timeStamp,i=0,o=!1;if(n.device.os==="ios"&&a&&a.scrollTop!==a.f7ScrollTop)return!1;c(s)&&s.focus(),e.preventDefault();var t=e.changedTouches[0],r=document.createEvent("MouseEvents"),l="click";return n.device.os==="android"&&s.nodeName.toLowerCase()==="select"&&(l="mousedown"),r.initMouseEvent(l,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,s.dispatchEvent(r),!1}function m(e){o=!1,s=null}function g(e){var t=!1;return o?(s=null,o=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(s||(t=!0),document.activeElement===s&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),t||(e.stopImmediatePropagation(),e.stopPropagation(),s?(h(s)||l)&&e.preventDefault():e.preventDefault(),s=null),t)}if(!n.support.touch)return;var e,r,i,s,o,u,a,f,l;document.addEventListener("click",g,!0),t(document).on("touchstart",p),t(document).on("touchmove",d),t(document).on("touchend",v),t(document).on("touchcancel",m)},n.initClickEvents=function(){function e(e){var r=t(this),i=r.attr("href"),s=r[0].nodeName.toLowerCase()==="a";if(s)for(var o=0;o<n.params.externalLinks.length;o++){if(r.hasClass(n.params.externalLinks[o]))return;if(r[0].rel===n.params.externalLinks[o])return}r.hasClass("smart-select")&&n.smartSelectOpen&&n.smartSelectOpen(r),r.hasClass("open-panel")&&(t(".panel").length===1?t(".panel").hasClass("panel-left")?n.openPanel("left"):n.openPanel("right"):r.attr("data-panel")==="right"?n.openPanel("right"):n.openPanel("left")),r.hasClass("close-panel")&&n.closePanel(),r.hasClass("panel-overlay")&&n.params.panelsCloseByOutside&&n.closePanel();if(r.hasClass("open-popover")){var u;r.attr("data-popover")?u=r.attr("data-popover"):u=".popover",n.popover(u,r)}r.hasClass("close-popover")&&n.closeModal(".popover.modal-in");var a;r.hasClass("open-popup")&&(r.attr("data-popup")?a=r.attr("data-popup"):a=".popup",n.popup(a)),r.hasClass("close-popup")&&n.closeModal(".popup.modal-in");var f;r.hasClass("open-login-screen")&&(r.attr("data-login-screen")?f=r.attr("data-login-screen"):f=".login-screen",n.loginScreen(f)),r.hasClass("close-login-screen")&&n.closeModal(".login-screen.modal-in"),r.hasClass("modal-overlay")&&(t(".modal.modal-in").length>0&&n.params.modalCloseByOutside&&n.closeModal(".modal.modal-in"),t(".actions-modal.modal-in").length>0&&n.params.actionsCloseByOutside&&n.closeModal(".actions-modal.modal-in"),t(".popover.modal-in").length>0&&n.closeModal(".popover.modal-in")),r.hasClass("popup-overlay")&&t(".popup.modal-in").length>0&&n.params.popupCloseByOutside&&n.closeModal(".popup.modal-in"),r.hasClass("tab-link")&&n.showTab(r.attr("data-tab")||r.attr("href"),r);if(r.hasClass("swipeout-delete"))if(r.attr("data-confirm")){var l=r.attr("data-confirm"),c=r.attr("data-confirm-title");c?n.confirm(l,c,function(){n.swipeoutDelete(r.parents(".swipeout"))}):n.confirm(l,function(){n.swipeoutDelete(r.parents(".swipeout"))})}else n.swipeoutDelete(r.parents(".swipeout"));r.hasClass("toggle-sortable")&&n.sortableToggle(r.data("sortable")),r.hasClass("open-sortable")&&n.sortableOpen(r.data("sortable")),r.hasClass("close-sortable")&&n.sortableClose(r.data("sortable"));if(r.hasClass("accordion-item-toggle")||r.hasClass("item-link")&&r.parent().hasClass("accordion-item")){var h=r.parents(".accordion-item");h.length===0&&(h=r.parents("li")),n.accordionToggle(h)}if(n.params.ajaxLinks&&!r.is(n.params.ajaxLinks)||!s)return;s&&e.preventDefault();var p=i&&i.length>0&&i.indexOf("#")!==0;if(p||r.hasClass("back")){var d;r.attr("data-view")?d=t(r.attr("data-view"))[0].f7View:(d=r.parents("."+n.params.viewClass)[0]&&r.parents("."+n.params.viewClass)[0].f7View,d&&d.params.linksView&&(d=t(d.params.linksView)[0].f7View));if(!d)for(var o=0;o<n.views.length;o++)n.views[o].main&&(d=n.views[o]);if(!d)return;var v;r.hasClass("no-animation")&&(v=!1),r.hasClass("back")?d.goBack(r.attr("href"),v):d.loadPage(r.attr("href"),v)}}t(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle",e)},n.initResize=function(){t(window).on("resize",n.resize),t(window).on("orientationchange",n.orientationchange)},n.resize=function(){n.sizeNavbars&&n.sizeNavbars(),v()},n.orientationchange=function(){n.device&&n.device.minimalUi&&(window.orientation===90||window.orientation===-90)&&(document.body.scrollTop=0),v()},n.formsData={},n.formStoreData=function(e,t){n.formsData[e]=t,n.ls["f7form-"+e]=JSON.stringify(t)},n.formDeleteData=function(e){n.formsData[e]&&(n.formsData[e]="",delete n.formsData[e]),n.ls["f7form-"+e]&&(n.ls["f7form-"+e]="",delete n.ls["f7form-"+e])},n.formGetData=function(e){if(n.ls["f7form-"+e])return JSON.parse(n.ls["f7form-"+e]);if(n.formsData[e])return n.formsData[e]},n.formToJSON=function(e){e=t(e);if(e.length!==1)return!1;var n={},r=["submit","image","button","file"],i=[];return e.find("input, select, textarea").each(function(){var s=t(this),o=s.attr("name"),u=s.attr("type"),a=this.nodeName.toLowerCase();if(r.indexOf(u)>=0)return;if(i.indexOf(o)>=0||!o)return;if(a==="select"&&s.attr("multiple"))i.push(o),n[o]=[],e.find('select[name="'+o+'"] option').each(function(){this.selected&&n[o].push(this.value)});else switch(u){case"checkbox":i.push(o),n[o]=[],e.find('input[name="'+o+'"]').each(function(){this.checked&&n[o].push(this.value)});break;case"radio":i.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked&&(n[o]=this.value)});break;default:n[o]=s.val()}}),n},n.formFromJSON=function(e,n){e=t(e);if(e.length!==1)return!1;var r=["submit","image","button","file"],i=[];e.find("input, select, textarea").each(function(){var s=t(this),o=s.attr("name"),u=s.attr("type"),a=this.nodeName.toLowerCase();if(!n[o])return;if(r.indexOf(u)>=0)return;if(i.indexOf(o)>=0||!o)return;if(a==="select"&&s.attr("multiple"))i.push(o),e.find('select[name="'+o+'"] option').each(function(){n[o].indexOf(this.value)>=0?this.selected=!0:this.selected=!1});else switch(u){case"checkbox":i.push(o),e.find('input[name="'+o+'"]').each(function(){n[o].indexOf(this.value)>=0?this.checked=!0:this.checked=!1});break;case"radio":i.push(o),e.find('input[name="'+o+'"]').each(function(){n[o]===this.value?this.checked=!0:this.checked=!1});break;default:s.val(n[o])}})},n.initFormsStorage=function(e){function i(){var e=t(this),r=e[0].id;if(!r)return;var i=n.formToJSON(e);if(!i)return;n.formStoreData(r,i),e.trigger("store",{data:i})}function s(){r.off("change submit",i),e.off("pageBeforeRemove",s)}e=t(e);if(e.length===0)return;var r=e.find("form.store-data");if(r.length===0)return;r.each(function(){var e=this.getAttribute("id");if(!e)return;var t=n.formGetData(e);t&&n.formFromJSON(this,t)}),r.on("change submit",i),e.on("pageBeforeRemove",s)},t(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var r=t(this);if(e.type==="change"&&!r.hasClass("ajax-submit-onchange"))return;e.type==="submit"&&e.preventDefault();var i=r.attr("method")||"GET",s=r.attr("enctype"),o=r.attr("action");if(!o)return;var u;i==="POST"?u=new FormData(r[0]):u=t.serializeObject(n.formToJSON(r[0]));var a=t.ajax({method:i,url:o,contentType:s,data:u,success:function(e){r.trigger("submitted",{data:e,xhr:a})}})}),n.pushStateQueue=[],n.pushStateClearQueue=function(){if(n.pushStateQueue.length===0)return;var e=n.pushStateQueue.pop(),t;n.params.pushStateNoAnimation===!0&&(t=!1),e.action==="goBack"&&n.goBack(e.view,undefined,t,!1,!1),e.action==="loadPage"&&n.loadPage(e.view,e.stateUrl,t,!1),e.action==="loadContent"&&n.loadContent(e.view,e.stateContent,t,!1)},n.initPushState=function(){function r(t){if(e)return;var r;for(var i=0;i<n.views.length;i++)n.views[i].main&&(r=n.views[i]);if(!r)return;var s=t.state;s||(s={url:r.history[0]});var o=s&&s.url||undefined,u=s&&s.content||undefined,a;n.params.pushStateNoAnimation===!0&&(a=!1),o!==r.url&&(r.history.indexOf(o)>=0?n.allowPageChange?n.goBack(r,undefined,a,!1,!1):n.pushStateQueue.push({action:"goBack",view:r}):o&&!u?n.allowPageChange?n.loadPage(r,o,a,!1):n.pushStateQueue.unshift({action:"loadPage",stateUrl:o,view:r}):u&&(n.allowPageChange?n.loadContent(r,u,a,!1):n.pushStateQueue.unshift({action:"loadContent",stateContent:u,view:r})))}var e=!0;t(window).on("load",function(){setTimeout(function(){e=!1},0)}),t(window).on("popstate",r)};var m=function(e,r){var i={initialSlide:0,spaceBetween:0,speed:300,slidesPerView:1,direction:"horizontal",paginationHide:!0,slideClass:"slider-slide",slideActiveClass:"slider-slide-active",slideNextClass:"slider-slide-next",slidePrevClass:"slider-slide-prev",wrapperClass:"slider-wrapper",bulletClass:"slider-pagination-bullet",bulletActiveClass:"slider-pagination-active",preventClicks:!0,preventClicksPropagation:!0,autoplay:!1,autoplayDisableOnInteraction:!0};r=r||{};for(var s in i)typeof r[s]=="undefined"&&(r[s]=i[s]);var o=this;o.params=r,o.container=t(e);if(o.container.length===0)return;o.container[0].f7Slider=o,o.params.direction==="vertical"?o.container.addClass("slider-container-vertical"):o.container.addClass("slider-container-horizontal"),o.wrapper=o.container.children("."+o.params.wrapperClass),o.params.pagination&&(o.paginationContainer=t(o.params.pagination)),o.activeSlideIndex=o.previousSlideIndex=o.params.initialSlide||0;var u=o.params.direction==="horizontal",a=u?n.rtl?-1:1:1;o.updateSlides=function(){o.slides=o.wrapper.children("."+o.params.slideClass);if(o.params.spaceBetween!==0){var e=n.rtl?"margin-left":"margin-right";u?o.slides.css(e,o.params.spaceBetween+"px"):o.slides.css({marginBottom:o.params.spaceBetween+"px"})}if(o.params.slidesPerView>1){var t="(100% - "+(o.params.slidesPerView-1)*r.spaceBetween+"px)/"+o.params.slidesPerView;u?(o.slides.css("width","-webkit-calc("+t+")"),o.slides.css("width","-moz-calc("+t+")"),o.slides.css("width","calc("+t+")")):(o.slides.css("height","-webkit-calc("+t+")"),o.slides.css("height","-moz-calc("+t+")"),o.slides.css("height","calc("+t+")"))}},o.updatePagination=function(){if(o.paginationContainer&&o.paginationContainer.length>0){var e="";for(var t=0;t<o.slides.length-o.params.slidesPerView+1;t++)e+='<span class="'+o.params.bulletClass+'"></span>';o.paginationContainer.html(e),o.bullets=o.paginationContainer.find("."+o.params.bulletClass)}},o.updateSize=function(){o.width=o.container[0].offsetWidth,o.height=o.container[0].offsetHeight,o.size=u?o.width:o.height},o.attachEvents=function(e){var r=e?"off":"on";o.container[r](n.touchEvents.start,o.onTouchStart),o.container[r](n.touchEvents.move,o.onTouchMove),o.container[r](n.touchEvents.end,o.onTouchEnd),t(window)[r]("resize",o.onResize),o.params.nextButton&&t(o.params.nextButton)[r]("click",o.onClickNext),o.params.prevButton&&t(o.params.prevButton)[r]("click",o.onClickPrev),o.params.indexButton&&t(o.params.indexButton)[r]("click",o.onClickIndex),o.params.preventClicks&&o.container[r]("click",o.onClick)},o.detachEvents=function(){o.attachEvents(!0)},o.onResize=function(){o.updateSize(),o.slideTo(o.activeSlideIndex,0,!1)};var f,l,c={},h={},p,d,v,m=!1,g=Date.now(),y;o.allowClick=!0,o.onClick=function(e){o.params.preventClicks&&!o.allowClick&&(e.preventDefault(),o.params.preventClicksPropagation&&e.stopPropagation())},o.onTouchStart=function(e){f=!0,l=!1,d=undefined,c.x=h.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,c.y=h.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY,p=Date.now(),o.allowClick=!0,o.updateSize(),o.params.onTouchStart&&o.params.onTouchStart(o,e),e.type==="mousedown"&&e.preventDefault()},o.onTouchMove=function(e){o.params.onTouchMove&&o.params.onTouchMove(o,e),o.allowClick=!1;if(e.targetTouches&&e.targetTouches.length>1)return;h.x=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,h.y=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY,typeof d=="undefined"&&(d=!!(d||Math.abs(h.y-c.y)>Math.abs(h.x-c.x))),(u&&d||!u&&!d)&&o.params.onOppositeTouchMove&&o.params.onOppositeTouchMove(o,e);if(!f)return;if(u&&d||!u&&!d){f=!1;return}o.params.onSliderMove&&o.params.onSliderMove(o,e),e.preventDefault(),e.stopPropagation(),l||(v=t.getTranslate(o.wrapper[0],u?"x":"y")*a,o.wrapper.transition(0),m&&o.onSlideChangeEnd(),r.autoplay&&w&&(o.params.autoplayDisableOnInteraction?o.stopAutoplay():b&&clearTimeout(b))),l=!0;var n=u?(h.x-c.x)*a:h.y-c.y;n>0&&o.activeSlideIndex===0?n=Math.pow(n,.85):n<0&&o.activeSlideIndex===o.slides.length-o.params.slidesPerView&&(n=-Math.pow(-n,.85));var i=u?(n+v)*a:0,s=u?0:n+v;o.wrapper.transform("translate3d("+i+"px, "+s+"px,0)")},o.onTouchEnd=function(e){o.params.onTouchEnd&&o.params.onTouchEnd(o,e);var t=Date.now(),n=t-p;o.allowClick&&(n<300&&t-g>300&&(y&&clearTimeout(y),y=setTimeout(function(){if(!o)return;o.params.paginationHide&&o.paginationContainer&&o.paginationContainer.toggleClass("slider-pagination-hidden"),o.params.onClick&&o.params.onClick(o,e)},300)),n<300&&t-g<300&&(y&&clearTimeout(y),o.params.onDoubleTap&&o.params.onDoubleTap(o,e)),o.params.onTap&&o.params.onTap(o,e)),g=Date.now();if(!f||!l){f=l=!1;return}f=l=!1;var r=u?(h.x-c.x)*a:h.y-c.y;Math.abs(r)<5&&n<300&&o.allowClick===!1&&(o.allowClick=!0),setTimeout(function(){if(!o)return;o.allowClick=!0},100);var i=o.params.autoplay&&w&&!o.params.autoplayDisableOnInteraction;if(r===0){i&&o.startAutoplay();return}var s=1,d=o.size/o.params.slidesPerView;o.params.slidesPerView>1&&(s=Math.abs((Math.abs(r)+d/2)/d)),i&&o.wrapper.transitionEnd(function(){o.startAutoplay()}),n>300?r<=-d/2?o.slideTo(o.activeSlideIndex+Math.floor(s)):r>d/2?o.slideTo(o.activeSlideIndex-Math.floor(s)):o.slideReset():Math.abs(r)<10?o.slideReset():r<0?o.slideTo(o.activeSlideIndex+Math.round(s)):o.slideTo(o.activeSlideIndex-Math.round(s))},o.slideTo=function(e,t,n){typeof e=="undefined"&&(e=0),e<0&&(e=0),e>o.slides.length-o.params.slidesPerView&&(e=o.slides.length-o.params.slidesPerView);var r=-(o.size+o.params.spaceBetween)*e/o.params.slidesPerView;typeof t=="undefined"&&(t=o.params.speed),o.previousSlideIndex=o.activeSlideIndex,o.activeSlideIndex=Math.round(e),o.isFirst=o.activeSlideIndex===0,o.isLast=o.activeSlideIndex===o.slides.length-o.params.slidesPerView,o.onSlideChangeStart();var i=u?r*a:0,s=u?0:r;t===0?(o.wrapper.transition(0).transform("translate3d("+i+"px,"+s+"px,0)"),n!==!1&&o.onSlideChangeEnd()):(m=!0,o.wrapper.transition(t).transform("translate3d("+i+"px,"+s+"px,0)").transitionEnd(function(){n!==!1&&o.onSlideChangeEnd()}))},o.updateClasses=function(){o.slides.removeClass(o.params.slideActiveClass+" "+o.params.slideNextClass+" "+o.params.slidePrevClass);var e=o.slides.eq(o.activeSlideIndex);e.addClass(o.params.slideActiveClass),e.next().addClass(o.params.slideNextClass),e.prev().addClass(o.params.slidePrevClass),o.bullets&&o.bullets.length>0&&(o.bullets.removeClass(o.params.bulletActiveClass),o.bullets.eq(o.activeSlideIndex).addClass(o.params.bulletActiveClass))},o.onSlideChangeStart=function(){o.updateClasses(),o.params.onSlideChangeStart&&o.params.onSlideChangeStart(o)},o.onSlideChangeEnd=function(){m=!1,o.wrapper.transition(0),o.params.onSlideChangeEnd&&o.params.onSlideChangeEnd(o)},o.slideNext=function(){o.slideTo(o.activeSlideIndex+1)},o.slidePrev=function(){o.slideTo(o.activeSlideIndex-1)},o.slideReset=function(){o.slideTo(o.activeSlideIndex)},o.onClickNext=function(e){e.preventDefault(),o.slideNext()},o.onClickPrev=function(e){e.preventDefault(),o.slidePrev()},o.onClickIndex=function(e){e.preventDefault(),o.slideTo(t(this).index())};var b,w;return o.startAutoplay=function(){if(!o.params.autoplay)return;w=!0,b&&clearTimeout(b),b=setTimeout(function(){o.wrapper.transitionEnd(function(){o.startAutoplay()});var e=o.activeSlideIndex+1;e>o.slides.length-o.params.slidesPerView&&(e=0),o.slideTo(e)},o.params.autoplay)},o.stopAutoplay=function(){w=!1,b&&clearTimeout(b)},o.resetAutoplay=function(){o.stopAutoplay(),o.startAutoplay()},o.init=function(){o.updateSlides(),o.updatePagination(),o.updateSize(),o.slideTo(o.params.initialSlide,0),o.attachEvents(),o.params.autoplay&&o.startAutoplay()},o.destroy=function(){o.detachEvents(),o.params.onDestroy&&o.params.onDestroy(),o=undefined},o.init(),o};n.slider=function(e,t){return new m(e,t)},n.initSlider=function(e){function s(e){function t(){e.destroy(),r.off("pageBeforeRemove",t)}r.on("pageBeforeRemove",t)}var r=t(e),i=r.find(".slider-init");if(i.length===0)return;for(var o=0;o<i.length;o++){var u=i.eq(o),a;u.data("slider")?a=JSON.parse(u.data("slider")):a={initialSlide:parseInt(u.data("initialSlide"),10)||undefined,spaceBetween:parseInt(u.data("spaceBetween"),10)||undefined,speed:parseInt(u.data("speed"),10)||undefined,slidesPerView:u.data("slidesPerView"),direction:u.data("direction"),pagination:u.data("pagination"),paginationHide:u.data("paginationHide")&&(u.data("paginationHide")==="true"?!0:!1),slideClass:u.data("slideClass"),slideActiveClass:u.data("slideActiveClass"),slideNextClass:u.data("slideNextClass"),slidePrevClass:u.data("slidePrevClass"),wrapperClass:u.data("wrapperClass"),bulletClass:u.data("bulletClass"),bulletActiveClass:u.data("bulletActiveClass"),nextButton:u.data("nextButton"),prevButton:u.data("prevButton"),indexButton:u.data("indexButton"),autoplay:u.data("autoplay")};var f=n.slider(u[0],a);s(f)}};var g=function(e){function u(){var e;for(i=0;i<n.views.length;i++)n.views[i].main&&(e=n.views[i]);return e}var r=this,i,s={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close"};e=e||{};for(var o in s)typeof e[o]=="undefined"&&(e[o]=s[o]);r.params=e;var a=r.params.theme==="dark"?"white":"blue",f=r.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+(r.params.type==="page"&&"back")+' close-popup photo-browser-close-link"><i class="icon icon-back-'+a+'"></i><span>'+r.params.backLinkText+"</span></a></div>"+'<div class="center sliding"><span><span class="photo-browser-current"></span> of <span class="photo-browser-total"></span></span></div>'+'<div class="right"></div>'+"</div>"+"</div>",l=r.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-prev-'+a+'"></i></a>'+'<a href="#" class="link photo-browser-next"><i class="icon icon-next-'+a+'"></i></a>'+"</div>"+"</div>",c=r.params.template||'<div class="photo-browser photo-browser-'+r.params.theme+'">'+'<div class="view navbar-fixed toolbar-fixed">'+"{{navbar}}"+'<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">'+"{{toolbar}}"+"{{captions}}"+'<div class="photo-browser-slider-container slider-container">'+'<div class="photo-browser-slider-wrapper slider-wrapper">'+"{{photos}}"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>",h=r.params.photoTemplate||'<div class="photo-browser-slide slider-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',p=r.params.captionsTheme||r.params.theme,d=r.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+p+'">{{captions}}</div>',v=r.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',m=r.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide slider-slide">{{html}}</div>',g="",y="";for(i=0;i<r.params.photos.length;i++){var b=r.params.photos[i],w="";typeof b=="string"||b instanceof String?b.indexOf("<")>=0||b.indexOf(">")>=0?w=m.replace(/{{html}}/g,b):w=h.replace(/{{url}}/g,b):typeof b=="object"&&(b.hasOwnProperty("html")&&b.html.length>0?w=m.replace(/{{html}}/g,b.html):b.hasOwnProperty("url")&&b.url.length>0&&(w=h.replace(/{{url}}/g,b.url)),b.hasOwnProperty("caption")&&b.caption.length>0?y+=v.replace(/{{caption}}/g,b.caption).replace(/{{captionIndex}}/g,i):w=w.replace(/{{caption}}/g,"")),g+=w}var E=c.replace("{{navbar}}",r.params.navbar?f:"").replace("{{noNavbar}}",r.params.navbar?"":"no-navbar").replace("{{photos}}",g).replace("{{captions}}",d.replace(/{{captions}}/g,y)).replace("{{toolbar}}",r.params.toolbar?l:"");r.activeSlideIndex=r.params.initialSlide,r.openIndex=r.activeSlideIndex,r.opened=!1,r.open=function(e){typeof e=="undefined"&&(e=r.activeSlideIndex),e=parseInt(e,10);if(r.opened&&r.slider){r.slider.slideTo(e);return}r.opened=!0,r.openIndex=e,r.params.type==="standalone"&&t("body").append(E),r.params.type==="popup"&&(r.popup=n.popup('<div class="popup photo-browser-popup">'+E+"</div>"),t(r.popup).on("closed",r.onPopupClose));if(r.params.type==="page"){t(document).on("pageBeforeInit",r.onPageBeforeInit),t(document).on("pageBeforeRemove",r.onPageBeforeRemove),r.params.view||(r.params.view=u()),r.params.view.loadContent(E);return}r.layout(r.openIndex)},r.close=function(){r.opened=!1;if(!r.sliderContainer||r.sliderContainer.length===0)return;r.attachEvents(!0),r.params.type==="standalone"&&r.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){r.container.remove()}),r.slider.destroy(),r.slider=r.sliderContainer=r.sliderWrapper=r.slides=M=_=D=undefined},r.onPopupClose=function(e){r.close(),t(r.popup).off("pageBeforeInit",r.onPopupClose)},r.onPageBeforeInit=function(e){e.detail.page.name==="photo-browser-slides"&&r.layout(r.openIndex),t(document).off("pageBeforeInit",r.onPageBeforeInit)},r.onPageBeforeRemove=function(e){e.detail.page.name==="photo-browser-slides"&&r.close(),t(document).off("pageBeforeRemove",r.onPageBeforeRemove)},r.layout=function(e){r.params.type==="page"?r.container=t(".photo-browser-slider-container").parents(".view"):r.container=t(".photo-browser"),r.params.type==="standalone"&&(r.container.addClass("photo-browser-in"),n.sizeNavbars(r.container)),r.sliderContainer=r.container.find(".photo-browser-slider-container"),r.sliderWrapper=r.container.find(".photo-browser-slider-wrapper"),r.slides=r.container.find(".photo-browser-slide"),r.captionsContainer=r.container.find(".photo-browser-captions"),r.captions=r.container.find(".photo-browser-caption");var i={nextButton:r.params.nextButton||".photo-browser-next",prevButton:r.params.prevButton||".photo-browser-prev",indexButton:r.params.indexButton,initialSlide:e,spaceBetween:r.params.spaceBetween,speed:r.params.speed,onTap:function(e,t){r.params.onTap&&r.params.onTap(e,t)},onClick:function(e,t){r.params.exposition&&r.toggleExposition(),r.params.onClick&&r.params.onClick(e,t)},onDoubleTap:function(e,n){r.toggleZoom(t(n.target).parents(".photo-browser-slide")),r.params.onDoubleTap&&r.params.onDoubleTap(e,n)},onSlideChangeStart:function(e){r.activeSlideIndex=e.activeSlideIndex,r.container.find(".photo-browser-current").text(e.activeSlideIndex+1),r.container.find(".photo-browser-total").text(e.slides.length),e.isFirst?(t(".photo-browser-prev").addClass("photo-browser-link-inactive"),t(".photo-browser-next").removeClass("photo-browser-link-inactive")):e.isLast?(t(".photo-browser-next").addClass("photo-browser-link-inactive"),t(".photo-browser-prev").removeClass("photo-browser-link-inactive")):t(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),r.captions.length>0&&(r.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),r.captionsContainer.find('[data-caption-index="'+r.activeSlideIndex+'"]').addClass("photo-browser-caption-active"));var n=e.slides.eq(e.previousSlideIndex).find("video");n.length>0&&"pause"in n[0]&&n[0].pause(),r.params.onSlideChangeStart&&r.params.onSlideChangeStart(e)},onSlideChangeEnd:function(e){r.params.zoom&&M&&e.previousSlideIndex!==e.activeSlideIndex&&(_.transform("translate3d(0,0,0) scale(1)"),D.transform("translate3d(0,0,0)"),M=_=D=undefined,P=H=1),r.params.onSlideChangeEnd&&r.params.onSlideChangeEnd(e)}};r.params.swipeToClose&&r.params.type!=="page"&&(i.onTouchStart=r.swipeCloseTouchStart,i.onOppositeTouchMove=r.swipeCloseTouchMove,i.onTouchEnd=r.swipeCloseTouchEnd),r.slider=n.slider(r.sliderContainer,i),r.attachEvents()},r.attachEvents=function(e){var t=e?"off":"on";r.params.zoom&&(r.slides[t]("gesturestart",r.onSlideGestureStart),r.slides[t]("gesturechange",r.onSlideGestureChange),r.slides[t]("gestureend",r.onSlideGestureEnd),r.slides[t](n.touchEvents.start,r.onSlideTouchStart),r.slides[t](n.touchEvents.move,r.onSlideTouchMove),r.slides[t](n.touchEvents.end,r.onSlideTouchEnd)),r.container.find(".photo-browser-close-link")[t]("click",r.close)};var S,x,T={},N={},C,k,L=!1,A,O=!0;r.exposed=!1,r.toggleExposition=function(){r.container&&r.container.toggleClass("photo-browser-exposed"),r.params.expositionHideCaptions&&r.captionsContainer.toggleClass("photo-browser-captions-exposed"),r.exposed=!r.exposed},r.expositionOn=function(){r.container&&r.container.addClass("photo-browser-exposed"),r.params.expositionHideCaptions&&r.captionsContainer.addClass("photo-browser-captions-exposed"),r.exposed=!0},r.expositionOff=function(){r.container&&r.container.removeClass("photo-browser-exposed"),r.params.expositionHideCaptions&&r.captionsContainer.removeClass("photo-browser-captions-exposed"),r.exposed=!1};var M,_,D,P=1,H=1,B=!1;r.onSlideGestureStart=function(e){M||(M=t(this),_=M.find("img"),D=_.parent()),_.transition(0),B=!0},r.onSlideGestureChange=function(e){P=e.scale*H,P>r.params.maxZoom&&(P=r.params.maxZoom-1+Math.pow(P-r.params.maxZoom+1,.5)),P<r.params.minZoom&&(P=r.params.minZoom+1-Math.pow(r.params.minZoom-P+1,.5)),_.transform("translate3d(0,0,0) scale("+P+")")},r.onSlideGestureEnd=function(e){P=Math.max(Math.min(P,r.params.maxZoom),r.params.minZoom),_.transition(r.params.speed).transform("translate3d(0,0,0) scale("+P+")"),H=P,B=!1,P===1&&(M=undefined)},r.toggleZoom=function(){M||(M=r.slides.eq(r.slider.activeSlideIndex),_=M.find("img"),D=_.parent()),D.transition(300).transform("translate3d(0,0,0)"),P&&P!==1?(P=H=1,_.transition(300).transform("translate3d(0,0,0) scale(1)"),M=undefined):(P=H=r.params.maxZoom,_.transition(300).transform("translate3d(0,0,0) scale("+P+")"))};var j,F,I,q,R,U,z,W,X,V,J={},K={},Q,G,Y,Z,et,tt,nt;r.onSlideTouchStart=function(e){if(j)return;j=!0,J.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX,J.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY},r.onSlideTouchMove=function(e){r.slider.allowClick=!1;if(!j||!M)return;F||(X=_[0].offsetWidth,V=_[0].offsetHeight,Q=t.getTranslate(D[0],"x")||0,G=t.getTranslate(D[0],"y")||0,D.transition(0));var n=X*P,i=V*P;if(n<r.slider.width&&i<r.slider.height)return;R=Math.min(r.slider.width/2-n/2,0),z=-R,U=Math.min(r.slider.height/2-i/2,0),W=-U,K.x=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX,K.y=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(!F&&!B)if(Math.floor(R)===Math.floor(Q)&&K.x<J.x||Math.floor(z)===Math.floor(Q)&&K.x>J.x){j=!1;return}e.stopPropagation(),F=!0,I=K.x-J.x+Q,q=K.y-J.y+G,I<R&&(I=R+1-Math.pow(R-I+1,.8)),I>z&&(I=z-1+Math.pow(I-z+1,.8)),q<U&&(q=U+1-Math.pow(U-q+1,.8)),q>W&&(q=W-1+Math.pow(q-W+1,.8)),Y||(Y=K.x),tt||(tt=K.y),Z||(Z=Date.now()),et=(K.x-Y)/(Date.now()-Z)/2,nt=(K.y-tt)/(Date.now()-Z)/2,Math.abs(K.x-Y)<2&&(et=0),Math.abs(K.y-tt)<2&&(nt=0),Y=K.x,tt=K.y,Z=Date.now(),D.transform("translate3d("+I+"px, "+q+"px,0)")},r.onSlideTouchEnd=function(e){if(!j||!F){j=!1,F=!1;return}j=!1,F=!1;var t=300,n=300,i=et*t,s=I+i,o=nt*n,u=q+o;et!==0&&(t=Math.abs((s-I)/et)),nt!==0&&(n=Math.abs((u-q)/nt));var a=Math.max(t,n);I=s,q=u;var f=X*P,l=V*P;R=Math.min(r.slider.width/2-f/2,0),z=-R,U=Math.min(r.slider.height/2-l/2,0),W=-U,I=Math.max(Math.min(I,z),R),q=Math.max(Math.min(q,W),U),D.transition(a).transform("translate3d("+I+"px, "+q+"px,0)")};var rt=!1,it=!0,st,ot,ut,at=!1,ft,lt;return r.swipeCloseTouchStart=function(e,t){if(!it)return;rt=!0},r.swipeCloseTouchMove=function(e,t){if(!rt)return;at||(at=!0,ot=t.type==="touchmove"?t.targetTouches[0].pageY:t.pageY,ft=r.slider.slides.eq(r.slider.activeSlideIndex),lt=(new Date).getTime()),t.preventDefault(),ut=t.type==="touchmove"?t.targetTouches[0].pageY:t.pageY,st=ot-ut;var n=1-Math.abs(st)/300;ft.transform("translate3d(0,"+ -st+"px,0)"),r.slider.container.css("opacity",n).transition(0)},r.swipeCloseTouchEnd=function(e,t){rt=!1;if(!at){at=!1;return}at=!1,it=!1;var i=Math.abs(st),s=(new Date).getTime()-lt;if(s<300&&i>20||s>=300&&i>100){setTimeout(function(){r.params.type==="standalone"&&r.close(),r.params.type==="popup"&&n.closeModal(r.popup),it=!0},0);return}i!==0?ft.addClass("transitioning").transitionEnd(function(){it=!0,ft.removeClass("transitioning")}):it=!0,r.slider.container.css("opacity","").transition(""),ft.transform("")},r};n.photoBrowser=function(e){return new g(e)};var y;n.addNotification=function(e){if(!e)return;typeof e.media=="undefined"&&(e.media=n.params.notificationMedia),typeof e.title=="undefined"&&(e.title=n.params.notificationTitle),typeof e.subtitle=="undefined"&&(e.subtitle=n.params.notificationSubtitle),typeof e.closeIcon=="undefined"&&(e.closeIcon=n.params.notificationCloseIcon),typeof e.hold=="undefined"&&(e.hold=n.params.notificationHold),typeof e.closeOnClick=="undefined"&&(e.closeOnClick=n.params.notificationCloseOnClick),y||(y=document.createElement("div"));var r=t(".notifications");r.length===0&&(t("body").append('<div class="notifications list-block media-list"><ul></ul></div>'),r=t(".notifications"));var i=r.children("ul"),s;e.custom?s="<li>"+e.custom+"</li>":s='<li class="notification-item notification-hidden"><div class="item-content">'+(e.media?'<div class="item-media">'+e.media+"</div>":"")+'<div class="item-inner">'+'<div class="item-title-row">'+(e.title?'<div class="item-title">'+e.title+"</div>":"")+(e.closeIcon?'<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>':"")+"</div>"+(e.subtitle?'<div class="item-subtitle">'+e.subtitle+"</div>":"")+(e.message?'<div class="item-text">'+e.message+"</div>":"")+"</div>"+"</div></li>",y.innerHTML=s;var o=t(y).children();o.on("click",function(r){e.onClick&&e.onClick(r,o[0]),e.closeOnClick?n.closeNotification(o[0]):(t(r.target).is(".close-notification")||t(r.target).parents(".close-notification").length>0)&&n.closeNotification(o[0])}),e.onClose&&o.data("f7NotificationOnClose",function(){e.onClose(o[0])}),e.additionalClass&&o.addClass(e.additionalClass),e.hold&&setTimeout(function(){o.length>0&&n.closeNotification(o[0])},e.hold),i.prepend(o[0]),r.show();var u=o.height();o.css("marginTop",-u+"px"),o.transition(0);var a=o[0].clientLeft;return o.transition(""),o.css("marginTop","0px"),r.transform("translate3d(0, 0,0)"),o.removeClass("notification-hidden"),o[0]},n.closeNotification=function(e){e=t(e);if(e.length===0)return;if(e.hasClass("notification-item-removing"))return;var n=t(".notifications"),r=e.height();e.css("height",r+"px").transition(0);var i=e[0].clientLeft;e.css("height","0px").transition("").addClass("notification-item-removing"),e.data("f7NotificationOnClose")&&e.data("f7NotificationOnClose")(),n.find(".notification-item:not(.notification-item-removing)").length===0&&n.transform(""),e.addClass("notification-hidden").transitionEnd(function(){e.remove(),n.find(".notification-item").length===0&&n.hide()})};var b=[];return n.initPlugins=function(){for(var e in n.plugins){var t=n.plugins[e](n,n.params[e]);t&&b.push(t)}},n.pluginHook=function(e){for(var t=0;t<b.length;t++)b[t].hooks&&e in b[t].hooks&&b[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},n.pluginPrevent=function(e){var t=!1;for(var n=0;n<b.length;n++)b[n].prevents&&e in b[n].prevents&&b[n].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},n.pluginProcess=function(e,t){var n=t;for(var r=0;r<b.length;r++)b[r].preprocess&&process in b[r].preprocess&&(n=b[r].preprocess[process](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},n.init=function(){n.initPlugins&&n.initPlugins(),n.getDeviceInfo&&n.getDeviceInfo(),n.initFastClicks&&n.params.fastClicks&&n.initFastClicks(),n.initClickEvents&&n.initClickEvents(),t(".page").each(function(){var e=t(this),r=e.parents("."+n.params.viewClass),i=r[0].f7View||!1,s=i&&i.url?i.url:!1;r&&r.attr("data-page",e.attr("data-page")||undefined),n.pageInitCallback(i,this,s,"center")}),n.initResize&&n.initResize(),n.initPushState&&n.params.pushState&&n.initPushState(),n.initSwipeout&&n.params.swipeout&&n.initSwipeout(),n.initSortable&&n.params.sortable&&n.initSortable(),n.initSwipePanels&&n.params.swipePanel&&n.initSwipePanels(),n.params.onAppInit&&n.params.onAppInit(),n.pluginHook("appInit")},n.params.init&&n.init(),n};var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this};e.prototype={addClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.add(t[n]);return this},removeClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.remove(t[n]);return this},hasClass:function(e){return this[0]?this[0].classList.contains(e):!1},toggleClass:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++)for(var r=0;r<this.length;r++)this[r].classList.toggle(t[n]);return this},attr:function(e,t){if(typeof t=="undefined")return this[0]?this[0].getAttribute(e):undefined;for(var n=0;n<this.length;n++)this[n].setAttribute(e,t);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e)},prop:function(e,t){if(typeof t=="undefined")return this[0]?this[0][e]:undefined;for(var n=0;n<this.length;n++)this[n][e]=t;return this},data:function(e,t){if(typeof t=="undefined"){if(this[0]){var n=this[0].getAttribute("data-"+e);return n?n:this[0].dom7ElementDataStorage&&this[0].dom7ElementDataStorage[e]?this[0].dom7ElementDataStorage[e]:undefined}return undefined}for(var r=0;r<this.length;r++){var i=this[r];i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t}return this},val:function(e){if(typeof e=="undefined")return this[0]?this[0].value:null;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){typeof e!="string"&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,r){function i(e){var i=e.target;if(t(i).is(n))r.call(i,e);else{var s=t(i).parents();for(var o=0;o<s.length;o++)t(s[o]).is(n)&&r.call(s[o],e)}}var s=e.split(" "),o,u;for(o=0;o<this.length;o++)if(arguments.length===2||n===!1){arguments.length===2&&(r=arguments[1]);for(u=0;u<s.length;u++)this[o].addEventListener(s[u],r,!1)}else for(u=0;u<s.length;u++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:r,liveListener:i}),this[o].addEventListener(s[u],i,!1);return this},off:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)for(var i=0;i<this.length;i++)if(arguments.length===3){var s=arguments[1],o=arguments[2];if(this[i].dom7LiveListeners)for(var u=0;u<this[i].dom7LiveListeners.length;u++)this[i].dom7LiveListeners[u].listener===o&&this[i].removeEventListener(n[r],this[i].dom7LiveListeners[u].liveListener,!1)}else this[i].removeEventListener(n[r],t,!1);return this},trigger:function(e,t){for(var n=0;n<this.length;n++){var r;try{r=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){r=document.createEvent("Event"),r.initEvent(e,!0,!0),r.detail=t}this[n].dispatchEvent(r)}return this},transitionEnd:function(e){function s(r){e.call(this,r);for(n=0;n<t.length;n++)i.off(t[n],s)}var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n,r,i=this;if(e)for(n=0;n<t.length;n++)i.on(t[n],s);return this},animationEnd:function(e){function s(r){e(r);for(n=0;n<t.length;n++)i.off(t[n],s)}var t=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],n,r,i=this;if(e)for(n=0;n<t.length;n++)i.on(t[n],s);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width"))-parseFloat(this.css("padding-left"))-parseFloat(this.css("padding-right")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?this[0].offsetHeight-parseFloat(this.css("padding-top"))-parseFloat(this.css("padding-bottom")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),n=document.body,r=e.clientTop||n.clientTop||0,i=e.clientLeft||n.clientLeft||0,s=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return{top:t.top+s-r,left:t.left+o-i}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},css:function(e,t){var n;if(arguments.length===1){if(typeof e!="string"){for(n=0;n<this.length;n++)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(arguments.length===2&&typeof e=="string"){for(n=0;n<this.length;n++)this[n].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if(typeof e=="undefined")return this[0]?this[0].innerHTML:undefined;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if(typeof e=="undefined")return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[0].textContent=e},is:function(n){if(!this[0])return!1;var r,i;if(typeof n=="string"){var s=this[0];if(s===document)return n===document;if(s===window)return n===window;if(s.matches)return s.matches(n);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(n);if(s.mozMatchesSelector)return s.mozMatchesSelector(n);if(s.msMatchesSelector)return s.msMatchesSelector(n);r=t(n);for(i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof e){r=n.nodeType?[n]:n;for(i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){var e=this[0],t=0;while((e=e.previousSibling)!=null)e.nodeType===1&&t++;return t}return undefined},eq:function(t){if(typeof t=="undefined")return this;var n=this.length,r;return t>n-1?new e([]):t<0?(r=n+t,r<0?new e([]):new e([this[r]])):new e([this[t]])},append:function(e){for(var t=0;t<this.length;t++)if(typeof e=="string"){var n=document.createElement("div");n.innerHTML=e;while(n.firstChild)this[t].appendChild(n.firstChild)}else this[t].appendChild(e);return this},prepend:function(e){for(var t=0;t<this.length;t++)if(typeof e=="string"){var n=document.createElement("div");n.innerHTML=e;for(var r=n.childNodes.length-1;r>=0;r--)this[t].insertBefore(n.childNodes[r],this[t].childNodes[0])}else this[t].insertBefore(e,this[t].childNodes[0]);return this},insertBefore:function(e){var n=t(e);for(var r=0;r<this.length;r++)if(n.length===1)n[0].parentNode.insertBefore(this[r],n[0]);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i])},insertAfter:function(e){var n=t(e);for(var r=0;r<this.length;r++)if(n.length===1)n[0].parentNode.insertBefore(this[r],n[0].nextSibling);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i].nextSibling)},next:function(n){return this.length>0?n?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n)?new e([this[0].nextElementSibling]):new e([]):this[0].nextElementSibling?new e([this[0].nextElementSibling]):new e([]):new e([])},nextAll:function(n){var r=[],i=this[0];if(!i)return new e([]);while(i.nextElementSibling){var s=i.nextElementSibling;n&&t(s).is(n)?r.push(s):r.push(s),i=s}return new e(r)},prev:function(n){return this.length>0?n?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n)?new e([this[0].previousElementSibling]):new e([]):this[0].previousElementSibling?new e([this[0].previousElementSibling]):new e([]):new e([])},prevAll:function(n){var r=[],i=this[0];if(!i)return new e([]);while(i.previousElementSibling){var s=i.previousElementSibling;n&&t(s).is(n)?r.push(s):r.push(s),i=s}return new e(r)},parent:function(e){var n=[];for(var r=0;r<this.length;r++)e?t(this[r].parentNode).is(e)&&n.push(this[r].parentNode):n.push(this[r].parentNode);return t(t.unique(n))},parents:function(e){var n=[];for(var r=0;r<this.length;r++){var i=this[r].parentNode;while(i)e?t(i).is(e)&&n.push(i):n.push(i),i=i.parentNode}return t(t.unique(n))},find:function(t){var n=[];for(var r=0;r<this.length;r++){var i=this[r].querySelectorAll(t);for(var s=0;s<i.length;s++)n.push(i[s])}return new e(n)},children:function(n){var r=[];for(var i=0;i<this.length;i++){var s=this[i].childNodes;for(var o=0;o<s.length;o++)n?s[o].nodeType===1&&t(s[o]).is(n)&&r.push(s[o]):s[o].nodeType===1&&r.push(s[o])}return new e(t.unique(r))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}},function(){function r(t){e.prototype[t]=function(e){var r;if(typeof e=="undefined"){for(r=0;r<this.length;r++)n.indexOf(t)<0&&this[r][t]();return this}return this.on(t,e)}}var t="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),n="resize scroll".split(" ");for(var i=0;i<t.length;i++)r(t[i])}();var t=function(t,n){var r=[],i=0;if(t&&!n&&t instanceof e)return t;if(t)if(typeof t=="string"){var s=(n||document).querySelectorAll(t);for(i=0;i<s.length;i++)r.push(s[i])}else if(t.nodeType||t===window||t===document)r.push(t);else if(t.length>0&&t[0].nodeType)for(i=0;i<t.length;i++)r.push(t[i]);return new e(r)};t.parseUrlQuery=function(e){var t={},n,r,i;if(e.indexOf("?")>=0){e=e.split("?")[1],r=e.split("&");for(n=0;n<r.length;n++)i=r[n].split("="),t[i[0]]=i[1];return t}return t},t.isArray=function(e){return Object.prototype.toString.apply(e)==="[object Array]"?!0:!1},t.unique=function(e){var t=[];for(var n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t},t.trim=function(e){return e.trim()},t.serializeObject=function(e){if(typeof e=="string")return e;var n=[],r="&";for(var i in e)if(t.isArray(e[i])){var s=[];for(var o=0;o<e[i].length;o++)s.push(i+"="+e[i][o]);n.push(s.join(r))}else n.push(i+"="+e[i]);return n.join(r)},t.getTranslate=function(e,t){var n,r,i,s;return typeof t=="undefined"&&(t="x"),i=window.getComputedStyle(e,null),window.WebKitCSSMatrix?s=new WebKitCSSMatrix(i.webkitTransform==="none"?"":i.webkitTransform):(s=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),t==="x"&&(window.WebKitCSSMatrix?r=s.m41:n.length===16?r=parseFloat(n[12]):r=parseFloat(n[4])),t==="y"&&(window.WebKitCSSMatrix?r=s.m42:n.length===16?r=parseFloat(n[13]):r=parseFloat(n[5])),r||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},t.fn=e.prototype,t.fn.scrollTop=function(e,n){var r=this;return typeof e=="undefined"?r.length>0?r[0].scrollTop:null:r.each(function(){function a(e){e===undefined&&(e=(new Date).getTime()),u===null&&(u=e);var s=i+(e-u)/n*(o-i);if(o>i&&s>=o){r.scrollTop=o;return}if(o<i&&s<=o){r.scrollTop=o;return}r.scrollTop=s,t.requestAnimationFrame(a)}var r=this,i=r.scrollTop;if(!n){r.scrollTop=e;return}var s=r.scrollHeight-r.offsetHeight,o=Math.max(Math.min(e,s),0),u=null;if(o===i)return;t.requestAnimationFrame(a)})},t.ajax=function(e){var n={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded"};e.type&&(e.type=e.method);for(var r in n)r in e||(e[r]=n[r]);e.url||(e.url=window.location.toString());if((e.method==="GET"||e.method==="HEAD")&&e.data){var i;typeof e.data=="string"?e.data.indexOf("?")>=0?i=e.data.split("?")[1]:i=e.data:i=t.serializeObject(e.data),e.url.indexOf("?")>=0?e.url+="&"+i:e.url+="?"+i}if(e.dataType==="json"&&e.url.indexOf("callback=")>=0){var s="f7jsonp_"+Date.now(),o,u=e.url.split("callback=");if(u[1].indexOf("&")>=0){var a=u[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");o=u[0]+"callback="+s+(a.length>0?"&"+a:"")}else o=u[0]+"callback="+s;var f=document.createElement("script");f.type="text/javascript",f.src=o,window[s]=function(t){e.success&&e.success(t),f.parentNode.removeChild(f),f=null,delete window[s]},document.querySelector("head").appendChild(f);return}(e.method==="GET"||e.method==="HEAD")&&e.cache===!1&&(e.url+="_nocache="+Date.now());var l=new XMLHttpRequest;l.open(e.method,e.url,e.async,e.user,e.password);var c=null;if((e.method==="POST"||e.method==="PUT")&&e.data)if(e.processData){var h=[ArrayBuffer,Blob,Document,FormData];if(h.indexOf(e.data.constructor)>=0)c=e.data;else{var p="---------------------------"+Date.now().toString(16);e.contentType==="multipart/form-data"?l.setRequestHeader("Content-Type","multipart/form-data; boundary="+p):l.setRequestHeader("Content-Type",e.contentType),c="";var d=t.serializeObject(e.data);if(e.contentType==="multipart/form-data"){p="---------------------------"+Date.now().toString(16),d=d.split("&");var v=[];for(var m=0;m<d.length;m++)v.push('Content-Disposition: form-data; name="'+d[m].split("=")[0]+'"\r\n\r\n'+d[m].split("=")[1]+"\r\n");c="--"+p+"\r\n"+v.join("--"+p+"\r\n")+"--"+p+"--\r\n"}else c=e.contentType==="application/x-www-form-urlencoded"?d:d.replace(/&/g,"\r\n")}}else c=e.data;if(e.headers)for(var g in e.headers)l.setRequestHeader(g,e.headers[g]);typeof e.crossDomain=="undefined"&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||l.setRequestHeader("X-Requested-With","XMLHttpRequest");if(e.xhrFields)for(var y in e.xhrFields)l[y]=e.xhrFields[y];return l.onload=function(n){if(l.status===200||l.status===0){t(document).trigger("ajaxSuccess",{xhr:l});if(e.success){var r=l.responseText;e.dataType==="json"&&(r=JSON.parse(r)),e.success(r,l.status,l)}}e.statusCode&&e.statusCode[l.status]&&e.statusCode[l.status](l),e.complete&&e.complete(l),t(document).trigger("ajaxComplete",{xhr:l})},e.error,l.onerror=function(n){t(document).trigger("ajaxError",{xhr:l}),e.error&&e.error(l)},e.start&&e.start(l),t(document).trigger("ajaxStart",{xhr:l}),l.send(c),l},function(){function n(e){t[e]=function(n,r,i){return t.ajax({url:n,method:e==="post"?"POST":"GET",data:typeof r=="function"?undefined:r,success:typeof r=="function"?r:i,dataType:e==="getJSON"?"json":undefined})}}var e="get post getJSON".split(" ");for(var r=0;r<e.length;r++)n(e[r])}(),Framework7.$=t,Framework7.prototype.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),Framework7.prototype.device=function(){var e={},n=navigator.userAgent,r=n.match(/(Android);?[\s\/]+([\d.]+)?/),i=n.match(/(iPad).*OS\s([\d_]+)/),s=n.match(/(iPod)(.*OS\s([\d_]+))?/),o=!i&&n.match(/(iPhone\sOS)\s([\d_]+)/);e.ios=e.android=e.iphone=e.ipad=!1,r&&(e.os="android",e.osVersion=r[2],e.android=!0);if(i||o||s)e.os="ios",e.ios=!0;o&&!s&&(e.osVersion=o[2].replace(/_/g,"."),e.iphone=!0),i&&(e.osVersion=i[2].replace(/_/g,"."),e.ipad=!0),s&&(e.osVersion=s[3]?s[3].replace(/_/g,"."):null,e.iphone=!0),e.webView=(o||i||s)&&n.match(/.*AppleWebKit(?!.*Safari)/i);if(e.os&&e.os==="ios"){var u=e.osVersion.split(".");e.minimalUi=!e.webView&&(s||o)&&(u[0]*1===7?u[1]*1>=1:u[0]*1>7)&&t('meta[name="viewport"]').length>0&&t('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var a=t(window).width(),f=t(window).height();e.statusBar=!1,e.webView&&(a===320&&f===568||a===568&&f===320||a===320&&f===480||a===480&&f===320||a===768&&f===1024||a===1024&&f===768)?e.statusBar=!0:e.statusBar=!1,e.pixelRatio=window.devicePixelRatio||1;if(e.os){var l=e.os+" "+e.os+"-"+e.osVersion.split(".")[0]+" "+e.os+"-"+e.osVersion.replace(/\./g,"-");if(e.os==="ios"){var c=parseInt(e.osVersion.split(".")[0],10);for(var h=c-1;h>=6;h--)l+=" ios-gt-"+h}t("html").addClass(l)}return e.statusBar?t("html").addClass("with-statusbar-overlay"):t("html").removeClass("with-statusbar-overlay"),e}(),Framework7.prototype.plugins={}})(),define("Framework7",function(e){return function(){var t,n;return t||e.Framework7}}(this)),define("GS",[],function(){function t(){e||(e={},e.currentUser={},localStorage.getItem("user")&&(e.currentUser=JSON.parse(localStorage.getItem("user"))),localStorage.getItem("sid")&&(e.currentUser.sid=localStorage.getItem("sid")))}function n(){return e.currentUser}function r(){var e=$$.parseUrlQuery(window.location.href||"");return e.sid||localStorage.getItem("sid")}function i(t,n){e.currentUser=n,localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("sid",t)}function s(){e.currentUser={},localStorage.removeItem("user"),localStorage.removeItem("sid")}function o(){return e.currentUser&&localStorage.getItem("sid")?!0:!1}function u(){khApp.confirm("您确定要退出登录吗？",function(){s(),khApp.closeModal(),mainView.loadPage("guide.html")})}var e=null;return t(),{getSid:r,getCurrentUser:n,setCurrentUser:i,removeCurrentUser:s,isLogin:o,logout:u}}),define("router",["GS"],function(e){function n(){$$(document).on("pageBeforeInit",function(e){var t=e.detail.page;r(t.name,t.query)});if(!e.isLogin())mainView.loadPage("guide.html",!1);else{var t=e.getCurrentUser();mainView.loadPage(t.node+".html")}}function r(e,n){e in t&&require(["controllers/"+t[e]+"Controller"],function(e){e.init(n)})}var t={index:"index",guide:"guide",login:"login",identity:"identity",collect:"collect",profile:"profile",department:"department",video:"video",appoint:"appoint",cert:"cert",account:"account",risk:"risk",password:"password",depository:"depository",review:"review",audit:"audit",protocal:"protocal",reform:"reform"};return{init:n,load:r}}),require.config({baseUrl:"js",paths:{Framework7:"libs/framework7",mustache:"libs/mustache",text:"libs/text",templates:"../mustache",GS:"services/globalService"},shim:{Framework7:{exports:"Framework7"}}}),require(["Framework7","router"],function(e,t){window.$$=e.$,window.khApp=new e({pushState:!1,swipeBackPage:!1,popupCloseByOutside:!1,preloadPreviousPage:!1,animateNavBackIcon:!0,modalTitle:"系统消息",modalButtonOk:"确定",modalButtonCancel:"取消",smartSelectBackText:"完成",smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back-black"></i><span>{{backText}}</span></a></div>'}),window.mainView=khApp.addView("#mainView",{dynamicNavbar:!0}),t.init()}),define("app",function(){}),define("utils",[],function(){function e(e){if($$.isArray(e)&&e.length>0)for(var t in e)$$(e[t].element).on(e[t].event,e[t].handler)}function t(e){var r=$$(e).parents(".page-content");n(r[0])?$$(e).removeClass("fixed-bottom"):$$(e).addClass("fixed-bottom"),$$(window).resize(function(){t.call(this,e)})}function n(e){return e.scrollHeight>e.clientHeight}return{bindEvents:e,setButtonPosition:t}}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/account.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item">1 身份验证</li><li class="step-item current">2 协议签署</li><li class="step-item">3 三方存管</li></ol><div class="content-block-title">选择开通账户</div><div class="list-block"><ul><li><a href="#" class="item-link smart-select"><select name="account" multiple="multiple">{{#model.accountGroups}}<optgroup label="{{group}}">{{#types}}<option value="{{value}}">{{type}}</option>{{/types}}</optgroup>{{/model.accountGroups}}</select><div class="item-content"><div class="item-inner"><div class="item-title">账户类型</div><div class="item-after"></div></div></div></a></li></ul></div><div class="content-block-title">签署协议</div><div class="list-block"><ul>{{#model.protocals}}<li><a href="protocal.html?econtract_id={{id}}" class="item-link item-content protocal-link"><div class="item-inner"><div class="item-title">{{name}}</div></div></a></li>{{/model.protocals}}</ul></div><div class="content-block-title"><label><input type="checkbox" name="agreement" value="agreement"> 我已阅读并同意签署以上协议</label></div><div class="content-block"><a href="#" class="button button-big active account-next-button">下一步</a></div>'}),define("text!templates/protocal.mustache",[],function(){return'<div class="content-block"><p>{{{model.agreementContent}}}</p></div>'}),function(e,t){if(typeof exports=="object"&&exports)t(exports);else{var n={};t(n),typeof define=="function"&&define.amd?define("mustache",n):e.Mustache=n}}(this,function(e){function n(e,n){return t.call(e,n)}function i(e){return!n(r,e)}function u(e){return typeof e=="function"}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return f[e]})}function c(e){if(!o(e)||e.length!==2)throw new Error("Invalid tags: "+e);return[new RegExp(a(e[0])+"\\s*"),new RegExp("\\s*"+a(e[1]))]}function g(t,n){function E(){if(l&&!g)while(f.length)delete u[f.pop()];else f=[];l=!1,g=!1}n=n||e.tags,t=t||"",typeof n=="string"&&(n=n.split(p));var r=c(n),s=new w(t),o=[],u=[],f=[],l=!1,g=!1,S,x,T,N,C,k;while(!s.eos()){S=s.pos,T=s.scanUntil(r[0]);if(T)for(var L=0,A=T.length;L<A;++L)N=T.charAt(L),i(N)?f.push(u.length):g=!0,u.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();if(!s.scan(r[0]))break;l=!0,x=s.scan(m)||"name",s.scan(h),x==="="?(T=s.scanUntil(d),s.scan(d),s.scanUntil(r[1])):x==="{"?(T=s.scanUntil(new RegExp("\\s*"+a("}"+n[1]))),s.scan(v),s.scanUntil(r[1]),x="&"):T=s.scanUntil(r[1]);if(!s.scan(r[1]))throw new Error("Unclosed tag at "+s.pos);C=[x,T,S,s.pos],u.push(C);if(x==="#"||x==="^")o.push(C);else if(x==="/"){k=o.pop();if(!k)throw new Error('Unopened section "'+T+'" at '+S);if(k[1]!==T)throw new Error('Unclosed section "'+k[1]+'" at '+S)}else x==="name"||x==="{"||x==="&"?g=!0:x==="="&&(r=c(n=T.split(p)))}k=o.pop();if(k)throw new Error('Unclosed section "'+k[1]+'" at '+s.pos);return b(y(u))}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function b(e){var t=[],n=t,r=[],i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function w(e){this.string=e,this.tail=e,this.pos=0}function E(e,t){this.view=e==null?{}:e,this.cache={".":this.view},this.parent=t}function S(){this.cache={}}var t=RegExp.prototype.test,r=/\S/,s=Object.prototype.toString,o=Array.isArray||function(e){return s.call(e)==="[object Array]"},f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},h=/\s*/,p=/\s+/,d=/\s*=/,v=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/;w.prototype.eos=function(){return this.tail===""},w.prototype.scan=function(e){var t=this.tail.match(e);if(t&&t.index===0){var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},w.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{var n=this;while(n){if(e.indexOf(".")>0){t=n.view;var r=e.split("."),i=0;while(t!=null&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}this.cache[e]=t}return u(t)&&(t=t.call(this.view)),t},S.prototype.clearCache=function(){this.cache={}},S.prototype.parse=function(e,t){var n=this.cache,r=n[e];return r==null&&(r=n[e]=g(e,t)),r},S.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof E?t:new E(t);return this.renderTokens(r,i,n,e)},S.prototype.renderTokens=function(t,n,r,i){function f(e){return a.render(e,n,r)}var s="",a=this,l,c;for(var h=0,p=t.length;h<p;++h){l=t[h];switch(l[0]){case"#":c=n.lookup(l[1]);if(!c)continue;if(o(c))for(var d=0,v=c.length;d<v;++d)s+=this.renderTokens(l[4],n.push(c[d]),r,i);else if(typeof c=="object"||typeof c=="string")s+=this.renderTokens(l[4],n.push(c),r,i);else if(u(c)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(l[3],l[5]),f),c!=null&&(s+=c)}else s+=this.renderTokens(l[4],n,r,i);break;case"^":c=n.lookup(l[1]);if(!c||o(c)&&c.length===0)s+=this.renderTokens(l[4],n,r,i);break;case">":if(!r)continue;c=u(r)?r(l[1]):r[l[1]],c!=null&&(s+=this.renderTokens(this.parse(c),n,r,c));break;case"&":c=n.lookup(l[1]),c!=null&&(s+=c);break;case"name":c=n.lookup(l[1]),c!=null&&(s+=e.escape(c));break;case"text":s+=l[1]}}return s},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var x=new S;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(!u(i))return s;i(s)},e.escape=l,e.Scanner=w,e.Context=E,e.Writer=S}),define("views/accountView",["utils","text!templates/account.mustache","text!templates/protocal.mustache","mustache"],function(e,t,n,r){function i(n){var i=r.render(t,{model:n.model});$$("#accountContent").html(i),e.bindEvents(n.bindings),e.setButtonPosition(".account-next-button")}function s(t){var i=r.render(n,{model:t.model});$$(".popup").html(i),e.bindEvents(t.bindings)}return{render:i,renderPopup:s}}),define("controllers/accountController",["views/accountView","GS"],function(e,t){function r(){khApp.showIndicator(),$$.ajax({url:"api/account.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var r=t.model;e.render({bindings:n,model:r}),khApp.hideIndicator()}}})}function i(){var e=$$("[name=account]").find("optgroup"),t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n].getElementsByTagName("option");for(var s=0,o=i.length;s<o;s++)i[s].selected&&t.push({group:e[n].label,value:i[s].value})}return t}function s(){var e=i();console.log(e),mainView.loadPage("password.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".account-next-button",event:"click",handler:s}];return{init:r}}),define("views/appointView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}return{render:t}}),define("controllers/appointController",["views/appointView","GS"],function(e,t){function r(){e.render({bindings:n})}function i(){var e=khApp.formToJSON("#appointList");console.log(e),mainView.loadPage("index.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".appoint-done-button",event:"click",handler:i}];return{init:r}}),define("text!templates/audit.mustache",[],function(){return'<div class="info"><i class="iconfont icon-success"></i>开户成功</div><div class="content-block-title">我们将尽快完成申请资料的审核，审核后您将收到手机短信提示，请保持手机畅通。</div><div class="list-block"><ul>{{#model.accountInfo}}<li class="item-content"><div class="item-inner"><div class="item-title">{{key}}</div><div class="item-after">{{val}}</div></div></li>{{/model.accountInfo}}</ul></div>'}),define("views/auditView",["utils","text!templates/audit.mustache","mustache"],function(e,t,n){function r(r){var i=n.render(t,{model:r.model});$$("#auditContent").append(i),e.bindEvents(r.bindings)}return{render:r}}),define("controllers/auditController",["views/auditView","GS"],function(e,t){function r(){khApp.showIndicator(),$$.ajax({url:"api/audit.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var r=t.model;e.render({bindings:n,model:r}),khApp.hideIndicator()}}})}var n=[{element:"#logout",event:"click",handler:t.logout}];return{init:r}}),define("text!templates/cert_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class="navbar"><div class="navbar-inner"><div class="center sliding">安装证书</div>{{!--<div class="right"><a href="#" class="link">完成</a></div>--}}</div></div><div class="page"><div class="page-content">{{#model.success}}<div class="info-content vertical-align"><div class="info"><i class="iconfont icon-success"></i>{{model.successText}}</div></div><div class="content-block"><a href="#" class="button button-big active fixed-bottom cert-download-button">完成</a></div>{{/model.success}} {{#model.fail}}}<div class="info-content vertical-align"><div class="info"><i class="iconfont icon-fail"></i>{{model.failText}}</div></div><div class="content-block"><a href="#" class="button button-big active fixed-bottom cert-retry-button">重新下载</a></div>{{/model.fail}}</div></div></div>'}),define("views/certView",["utils","text!templates/cert_popup.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$(".popup").html(i),e.bindEvents(r.bindings)}function s(e){$$(".section").hide(),$$("#"+e).show(),khApp.closeModal()}function o(){s("download"),$$(".step").hide()}function u(){s("auditBefore"),$$(".step").show()}function a(){s("auditAfter"),$$(".step").show()}return{render:r,renderPopup:i,showDownloading:o,showAuditBefore:u,showAuditAfter:a}}),define("controllers/certController",["views/certView","GS"],function(e,t){function i(){e.render({bindings:n}),setTimeout(e.showAuditAfter,1500)}function s(){e.showDownloading(),setTimeout(function(){var t=$$.ajax({url:"api/cert.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&(e.renderPopup({model:t.model,bindings:r}),khApp.popup(".popup"))}});t.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t),$$("progress").val(t)}}},1500)}function o(){e.showAuditAfter(),khApp.closeModal(),mainView.loadPage("account.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".cert-request-button",event:"click",handler:s}],r=[{element:".cert-download-button",event:"click",handler:o},{element:".cert-retry-button",event:"click",handler:s}];return{init:i}}),define("text!templates/collect.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item current">1 身份验证</li><li class="step-item">2 协议签署</li><li class="step-item">3 三方存管</li></ol><div class="upload-block"><div class="upload-content" id="cardFront"><i class="iconfont icon-cardfront"></i><div class="title">上传身份证正面</div><input type="file" id="uploadFront" accept="image/*" capture="camera"></div><div class="upload-content" id="cardBack"><i class="iconfont icon-cardback"></i><div class="title">上传身份证反面</div><input type="file" id="uploadBack" accept="image/*" capture="camera"></div>{{#model.facePic}}<div class="upload-content" id="face"><i class="iconfont icon-user"></i><div class="title">大头照</div><input type="file" id="uploadFace" accept="image/*" capture="camera"></div>{{/model.facePic}}</div><div class="content-block-title agree-block"><input type="checkbox" id="agreement" name="agreement" value="agreement"><label for="agreement">我已阅读并同意签署<a id="protocalLink" href="protocal.html?econtract_id={{model.econtractId}}">《个人数字证书申请责任书》</a></label></div><div class="content-block"><a href="#" class="button button-big active collect-next-button">下一步</a></div>'}),define("views/collectView",["utils","text!templates/collect.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$("#collectContent").html(i),e.bindEvents(r.bindings)}function s(e){$$("#cardFront").html("<img src="+e+' alt="" height="160">')}function o(e){$$("#cardBack").html("<img src="+e+' alt="" height="160">')}function u(e){$$("#face").html("<img src="+e+' alt="" height="160">')}return{init:r,render:i,showPhotoFront:s,showPhotoBack:o,showPhotoFace:u}}),define("controllers/collectController",["views/collectView","GS"],function(e,t){function i(){e.init({bindings:n}),$$.ajax({url:"api/collect.json",type:"GET",success:function(t){t=JSON.parse(t),t.errorNo===0?e.render({model:t.model,bindings:r}):khApp.alert(t.errorInfo)}})}function s(){}function o(){}function u(){}function a(e){var t=["正面照","反面照","大头照"][e];khApp.modal({title:"上传"+t,buttons:[{text:"拍照",onClick:function(){khApp.alert("您选择了拍照")}},{text:"浏览相册",onClick:function(){khApp.alert("您选择了浏览相册")}},{text:"取消"}]})}function f(){mainView.loadPage("profile.html")}var n=[{element:"#logout",event:"click",handler:t.logout}],r=[{element:".collect-next-button",event:"click",handler:f},{element:"#cardFront",event:"click",handler:s},{element:"#cardBack",event:"click",handler:o}];return{init:i}}),define("text!templates/department.mustache",[],function(){return'{{#model.departmentsNearby}} <a href="#" class="item-link smart-select" id="nearbySelect" data-pagetitle="附近营业部"><select name="nearby">{{#model.departmentsNearby}}<option value="{{value}}">{{department}}</option>{{/model.departmentsNearby}}</select></a> {{/model.departmentsNearby}} {{#model.departmentsAll}} <a href="#" class="item-link smart-select" id="allSelect" data-pagetitle="选择营业部" data-searchbar="true" data-searchbar-placeholder="营业部名称" data-searchbar-cancel="取消"><select name="all">{{#model.departmentsAll}}<optgroup label="{{group}}">{{#departments}}<option value="{{value}}">{{department}}</option>{{/departments}}</optgroup>{{/model.departmentsAll}}</select></a> {{/model.departmentsAll}}'}),define("views/departmentView",["utils","text!templates/department.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings),e.setButtonPosition(".department-next-button")}function i(r){var i=n.render(t,{model:r.model});$$("#departmentContent").append(i),e.bindEvents(r.bindings),u()}function s(e){$$(".department-name").find("h2").text(e)}function o(){$$(".department-badge").html("您选择的是")}function u(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{render:r,renderName:s,renderBadge:o,renderSelect:i}}),define("controllers/departmentController",["views/departmentView","GS"],function(e,t){function i(){e.render({bindings:n}),s()}function s(){khApp.showIndicator(),$$.ajax({url:"api/department.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&(e.renderName(t.model.recDepartment),khApp.hideIndicator())}})}function o(){a("nearbySelect","api/department_near.json")}function u(){a("allSelect","api/department_all.json")}function a(e,t){var n=$$("#"+e)[0];n?l(e):f(e,t)}function f(t,n){var i=t;khApp.showIndicator(),$$.ajax({url:n,type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&(e.renderSelect({bindings:r,model:t.model}),khApp.hideIndicator(),l(i))}})}function l(e){khApp.smartSelectOpen("#"+e)}function c(){var t=this.options[this.selectedIndex].text;e.renderName(t),e.renderBadge()}function h(){mainView.loadPage("collect.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".department-next-button",event:"click",handler:h},{element:".nearby-link",event:"click",handler:o},{element:".all-link",event:"click",handler:u}],r=[{element:"[name=nearby]",event:"change",handler:c},{element:"[name=all]",event:"change",handler:c}];return{init:i}}),define("text!templates/depository.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item">1 身份验证</li><li class="step-item">2 协议签署</li><li class="step-item current">3 三方存管</li></ol><div class="content-block-title">开通三方存管后，您的资金可以在银行卡与交易账户中自由调度</div><div class="list-block"><ul><li><a href="#" class="item-link smart-select"><select name="bank" id="bank">{{#model.banks}}<option value="{{code}}" data-type="{{type}}" data-protocal-id="{{protocalId}}">{{name}}</option>{{/model.banks}} {{!--<option value="1">中信银行</option><option value="2">招商银行</option><option value="3">中国银行</option><option value="4">中国建设银行</option>--}}</select><div class="item-content"><div class="item-inner"><div class="item-title">请选择银行</div><div class="item-after"></div></div></div></a></li></ul></div><div class="list-block" id="inputGroup" style="display: none"><ul><li class="cardno-input"><div class="item-content"><div class="item-inner"><div class="item-title label">卡号</div><div class="item-input"><input type="text" name="cardNo" placeholder="请输入银行卡卡号"></div></div></div></li><li class="cardpsw-input"><div class="item-content"><div class="item-inner"><div class="item-title label">密码</div><div class="item-input"><input type="text" name="cardPSW" placeholder="请输入银行卡密码"></div></div></div></li><li class="cardpsw-input"><div class="item-content"><div class="item-inner"><div class="item-title label">重复</div><div class="item-input"><input type="text" name="cardPSWrepeat" placeholder="请再次输入银行卡卡号"></div></div></div></li></ul></div><div class="content-block-title agree-block" id="agreeProtocal" style="display: none"><input type="checkbox" id="agreement" name="agreement" value="agreement"><label for="agreement">我已阅读并同意签署<a id="protocalLink" href="protocal.html">《<span id="bankName"></span>三方协议》</a></label></div><div class="content-block"><a href="#" class="button button-big active depository-next-button">开通三方存管</a></div>'}),define("views/depositoryView",["utils","text!templates/depository.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$("#depositoryContent").html(i),e.bindEvents(r.bindings),s()}function s(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}function o(){$$("#inputGroup").hide(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex")}function u(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().addClass("bare"),$$(".cardpsw-input").hide()}function a(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().removeClass("bare"),$$(".cardpsw-input").show()}function f(e,t){var n=document.querySelector("#protocalLink");l(n,t),$$("#bankName").text(e)}function l(e,t){e.search="?econtract_id="+t}return{init:r,render:i,noNeedInput:o,onlyCardNoInput:u,bothCardNoPswInput:a,syncProtocal:f}}),define("controllers/depositoryController",["views/depositoryView","GS"],function(e,t){function i(){e.init({bindings:n}),khApp.showIndicator(),$$.ajax({url:"api/depository.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&e.render({model:t.model,bindings:r}),khApp.hideIndicator()}})}function s(){var t=this.options[this.selectedIndex],n=$$(t).data("type"),r=t.text,i=$$(t).data("protocal-id");console.log(n);switch(n){case"00":e.noNeedInput();break;case"01":e.onlyCardNoInput();break;case"11":e.bothCardNoPswInput()}e.syncProtocal(r,i)}function o(){mainView.loadPage("risk.html")}var n=[{element:"#logout",event:"click",handler:t.logout}],r=[{element:"#bank",event:"change",handler:s},{element:".depository-next-button",event:"click",handler:o}];return{init:i}}),define("controllers/guideController",[],function(){function e(){var e=$$("a[data-type]");e.each(function(){this.addEventListener("click",function(){var e=this.getAttribute("data-type");t(e)},!1)})}function t(e){mainView.loadPage("login.html?type="+e)}return{init:e}}),define("views/loginView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}function n(){$$(".login-getcode").html("重新获取验证码"),$$(".login-getcode").removeClass("disabled")}function r(e){$$(".login-getcode").html(e+"秒后重新获取")}function i(){$$(".mobile").blur(),$$(".password").blur()}function s(e,t){$$(".sliding").html(e),$$(".desc").html(t)}return{init:t,resetBtn:n,reRenderBtn:r,inputBlur:i,changeType:s}}),define("controllers/loginController",["views/loginView","GS"],function(e,t){function i(t){var i=t.type;e.changeType(r[i].nav,r[i].desc),e.init({bindings:n})}function s(e){var t=/^[1][34578]\d{9}$/;return t.test(e)}function o(e){var t=/^\d{4}$/;return t.test(e)}function u(){f&&clearTimeout(f),e.resetBtn()}function a(){var e=$$(".mobile").val();s(e)?l.call(this,e):khApp.alert("手机号码为空或有误，请重新输入")}function l(e){var t=this,n=60,r=0;$$.ajax({url:"api/verify.json",type:"POST",data:{mphone:e},success:function(e){e=JSON.parse(e),e.errorNo===0?($$(t).hasClass("disabled")||$$(t).addClass("disabled"),c(n,r)):(khApp.alert(e.errorInfo),u())},error:function(){khApp.alert("服务器出错"),u()},timeout:function(){khApp.alert("服务器无响应"),u()}})}function c(t,n){var r;f&&clearTimeout(f),n++,r=t-n,e.reRenderBtn(r),r>0?f=setTimeout(function(){c(t,n)},1e3):e.resetBtn()}function h(){var n=$$(".mobile").val(),r=$$(".password").val();s(n)?f?o(r)?(khApp.showIndicator(),$$.ajax({url:"api/login.json",type:"POST",data:{mobile:n,validateCode:r},success:function(n){n=JSON.parse(n),n.errorNo===0?(e.inputBlur(),t.setCurrentUser(n.sid,n.user),mainView.loadPage("department.html"),khApp.hideIndicator()):(khApp.hideIndicator(),khApp.alert(n.errorInfo)),u()}})):khApp.alert("输入4位数字验证码"):khApp.alert("您还没有获取验证码，请先获取验证码"):khApp.alert("手机号码为空或有误，请重新输入")}var n=[{element:".login-submit",event:"click",handler:h},{element:".login-getcode",event:"click",handler:a}],r=[{nav:"新开户",desc:"我是新入市投资者，还没有股东账户"},{nav:"转户",desc:"我已有股东账户，已撤销指定交易和完成转托管"},{nav:"开理财户",desc:"无论有没有在其他券商开立股东账户，都可开立理财户"}],f=null;return{init:i}}),define("views/passwordView",["utils"],function(e){function t(t){e.bindEvents(t.bindings),e.setButtonPosition(".password-next-button")}function n(e){e==="hide"?$$("#sync").hide():e==="show"&&$$("#sync").show()}return{render:t,toggleInputs:n}}),define("controllers/passwordController",["views/passwordView","GS","utils"],function(e,t,n){function i(){e.render({bindings:r})}function s(){this.checked?e.toggleInputs("hide"):e.toggleInputs("show")}function o(){mainView.loadPage("depository.html")}var r=[{element:"#logout",event:"click",handler:t.logout},{element:".password-next-button",event:"click",handler:o},{element:".toggle-switch",event:"change",handler:s}];return{init:i}}),define("text!templates/profile.mustache",[],function(){return'<ol class="step clearfix"><li class="step-item current">1 身份验证</li><li class="step-item">2 协议签署</li><li class="step-item">3 三方存管</li></ol>{{!--<div class="content-block-title">请如实填写以下内容</div>--}}<div class="list-block"><ul><li><div class="item-content"><div class="item-inner"><div class="item-title label">姓名</div><div class="item-input"><input type="text" name="name" placeholder="您的姓名" value="{{model.name}}"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证号</div><div class="item-input"><input type="text" name="cid" placeholder="您的18位二代身份证号" value="{{model.cid}}"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证住址</div><div class="item-input"><textarea name="cidAddr" placeholder="您的身份证住址">{{model.cidAddr}}</textarea></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">联系地址</div><div class="item-input"><textarea name="address" placeholder="您的联系地址">{{model.address}}</textarea></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">邮编</div><div class="item-input"><input type="tel" name="postCode" maxlength="6" placeholder="联系地址的邮编" value="{{model.postCode}}"></div></div></div></li><li><a href="#" class="item-link smart-select" data-pagetitle="选择职业"><select name="career">{{#model.careers}}<option value="{{value}}">{{career}}</option>{{/model.careers}}</select><div class="item-content"><div class="item-inner"><div class="item-title">职业</div><div class="item-after">请选择</div></div></div></a></li><li><a href="#" class="item-link smart-select" data-pagetitle="选择行业"><select name="industry">{{#model.industries}}<option value="{{value}}">{{industry}}</option>{{/model.industries}}</select><div class="item-content"><div class="item-inner"><div class="item-title">行业</div><div class="item-after">请选择</div></div></div></a></li><li><a href="#" class="item-link smart-select" data-pagetitle="选择学历"><select name="industry">{{#model.educations}}<option value="{{value}}">{{education}}</option>{{/model.educations}}</select><div class="item-content"><div class="item-inner"><div class="item-title">学历</div><div class="item-after">请选择</div></div></div></a></li></ul></div><div class="content-block"><a href="#" class="button button-big active profile-next-button">下一步</a></div>'}),define("views/profileView",["utils","text!templates/profile.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$("#profileContent").append(i),e.bindEvents(r.bindings),s()}function s(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{init:r,render:i}}),define("controllers/profileController",["views/profileView","GS"],function(e,t){function r(){khApp.showIndicator(),$$.ajax({url:"api/profile.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var r=t.model;e.render({bindings:n,model:r}),khApp.hideIndicator()}}})}function i(){mainView.loadPage("video.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".profile-next-button",event:"click",handler:i}];return{init:r}}),define("views/protocalView",["text!templates/protocal.mustache","mustache"],function(e,t){function n(n){var r=t.render(e,{model:n.model});$$("#protocalContent").append(r)}return{render:n}}),define("controllers/protocalController",["views/protocalView","GS"],function(e,t){function n(e){console.log(e),r(e)}function r(t){khApp.showIndicator();var n=$$.ajax({url:"api/protocal.json",type:"POST",data:t,success:function(t){t=JSON.parse(t),t.errorNo===0&&e.render({model:t.model}),khApp.hideIndicator()}})}return{init:n}}),define("text!templates/review.mustache",[],function(){return'{{#model.questions}}<div class="content-block-title">{{index}}.{{topic}}</div><div class="content-block"><div class="row">{{#options}}<div class="col-50"><input class="select-radio" type="radio" name="{{groupId}}"><div class="select-trigger">{{option}}</div></div>{{/options}}</div></div>{{/model.questions}}<div class="content-block"><a href="#" class="button button-big active review-next-button">提交</a></div>'}),define("views/reviewView",["utils","text!templates/review.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$("#reviewContent").append(i),e.bindEvents(r.bindings)}return{init:r,render:i}}),define("controllers/reviewController",["views/reviewView","GS"],function(e,t){function i(){e.init({bindings:n}),khApp.showIndicator(),$$.ajax({url:"api/review.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var n=t.model;e.render({model:n,bindings:r}),khApp.hideIndicator()}}})}function s(){var e=khApp.formToJSON("#reviewContent");console.log(e),mainView.loadPage("audit.html")}function o(){var e=$$(this).parent().find("[type=radio]");e[0].checked=!0}var n=[{element:"#logout",event:"click",handler:t.logout}],r=[{element:".review-next-button",event:"click",handler:s},{element:".select-trigger",event:"click",handler:o}];return{init:i}}),define("text!templates/risk.mustache",[],function(){return'<form id="riskForm">{{#model.questions}}<div class="content-block-title">{{index}}.{{topic}} {{#multi}} <small>（多选）</small></div><div class="list-block"><ul>{{#options}}<li><label class="label-radio item-content"><div class="item-media"></div><input type="checkbox" name="checkbox-{{groupId}}" value="{{value}}"><div class="item-inner">{{option}}</div></label></li>{{/options}} {{/multi}} {{^multi}} <small>（单选）</small></ul></div><div class="list-block"><ul>{{#options}}<li><label class="label-radio item-content"><div class="item-media"></div><input type="radio" name="radio-{{groupId}}" value="{{value}}"><div class="item-inner">{{option}}</div></label></li>{{/options}} {{/multi}}</ul></div>{{/model.questions}}</form><div class="content-block"><a href="#" class="button button-big active risk-submit-button">提交</a></div>'}),define("text!templates/risk_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class="navbar"><div class="navbar-inner"><div class="center sliding">风险测评结果</div><div class="right"><a href="#" class="link" id="logout">注销</a></div></div></div><div class="page"><div class="page-content"><div class="info-content vertical-align"><div class="info"><div class="score">{{model.riskScore}}分</div><div class="level">{{model.riskLevel}}</div></div></div><div class="content-block"><a href="#" class="button button-big active fixed-bottom risk-next-button">下一步</a></div></div></div></div>'}),define("views/riskView",["utils","text!templates/risk.mustache","text!templates/risk_popup.mustache","mustache"],function(e,t,n,r){function i(n){var i=r.render(t,{model:n.model});$$("#riskContent").append(i),e.bindEvents(n.bindings)}function s(t){var i=r.render(n,{model:t.model});$$(".popup").html(i),e.bindEvents(t.bindings)}return{render:i,renderPopup:s}}),define("controllers/riskController",["views/riskView","GS"],function(e,t){function i(){khApp.showIndicator(),$$.ajax({url:"api/risk.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var r=t.model;e.render({bindings:n,model:r}),khApp.hideIndicator()}}})}function s(){khApp.showIndicator(),$$.ajax({url:"api/risk_result.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&(e.renderPopup({model:t.model,bindings:r}),khApp.popup(".popup")),khApp.hideIndicator()}})}function o(){khApp.closeModal(),mainView.loadPage("review.html")}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".risk-submit-button",event:"click",handler:s}],r=[{element:"#logout",event:"click",handler:t.logout},{element:".risk-next-button",event:"click",handler:o}];return{init:i}}),define("text!templates/video_popup.mustache",[],function(){return'<div class="view view-popup navbar-fixed"><div class="navbar"><div class="navbar-inner"><div class="center sliding">视频验证</div><div class="right"><a href="#" class="link" id="logout">注销</a></div></div></div><div class="page"><div class="page-content">{{#model.success}}<div class="info-content vertical-align"><div class="info"><i class="iconfont icon-success"></i>{{model.successText}}</div></div><div class="content-block"><a href="#" class="button button-big active fixed-bottom video-next-button">下一步</a></div>{{/model.success}} {{#model.fail}}<div class="info-content vertical-align"><div class="info"><i class="iconfont icon-fail"></i>{{model.failText}}</div></div><div class="content-block"><a href="#" class="button button-big active fixed-bottom video-retry-button">重新验证</a></div>{{/model.fail}}</div></div></div>'}),define("views/videoView",["utils","text!templates/video_popup.mustache","mustache"],function(e,t,n){function r(t){e.bindEvents(t.bindings)}function i(r){var i=n.render(t,{model:r.model});$$(".popup").html(i),e.bindEvents(r.bindings)}function s(){$$("#readyLeft").show(),$$("#waitLeft").hide(),$$(".video-content").hide(),$$("#videoReady").show()}function o(e){$$("#readyLeft").hide(),$$("#waitLeft").show(),$$(".video-content").hide(),$$("#videoWait").show(),e&&$$(".wait-num").html(e)}function u(e){e==="hide"?$$(".dialog").hide():e==="show"&&$$(".dialog").show()}return{render:r,renderPopup:i,showWait:o,showReady:s,toggleDialog:u}}),define("controllers/videoController",["views/videoView","GS"],function(e,t){function u(){e.render({bindings:n})}function a(){e.showWait(),l()}function f(){if(!s)return;if(i>=3){e.toggleDialog("show"),clearTimeout(o);return}$$.ajax({url:"api/video.json",type:"POST",success:function(t){t=JSON.parse(t);if(t.errorNo===0){var n=t.videoStatus;n!==1&&n===0&&(e.showWait(t.waitNum),s=!0,i++)}else khApp.alert(t.errorInfo),i++},error:function(){i++}}),o=setTimeout(f,1500)}function l(){e.toggleDialog("hide"),i=0,f()}function c(){e.showReady(),clearTimeout(o)}function h(){e.showReady(),khApp.closeModal()}function p(){mainView.loadPage("cert.html"),khApp.closeModal()}function d(){clearTimeout(o),khApp.showIndicator(),$$.ajax({url:"api/video_success.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===0&&(e.renderPopup({model:t.model,bindings:r}),khApp.popup(".popup")),khApp.hideIndicator()}})}function v(){clearTimeout(o),khApp.showIndicator(),$$.ajax({url:"api/video_fail.json",type:"POST",success:function(t){t=JSON.parse(t),t.errorNo===1&&(e.renderPopup({model:t.model,bindings:r}),khApp.popup(".popup")),khApp.hideIndicator()}})}var n=[{element:"#logout",event:"click",handler:t.logout},{element:".video-start-button",event:"click",handler:a},{element:".video-wait-button",event:"click",handler:l},{element:".video-success-button",event:"click",handler:d},{element:".video-fail-button",event:"click",handler:v},{element:"#waitLeft",event:"click",handler:c}],r=[{element:"#logout",event:"click",handler:t.logout},{element:".video-next-button",event:"click",handler:p},{element:".video-retry-button",event:"click",handler:h}],i=0,s=!0,o;return{init:u}});